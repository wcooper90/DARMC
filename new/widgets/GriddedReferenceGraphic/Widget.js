// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/CoordinateControl":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/on dojo/has dojo/query dojo/dom-attr dojo/dom-class dojo/dom-style dojo/string dojo/topic dojo/keys dojo/Deferred dojo/Evented dojo/dom dojo/dom-construct dojo/aspect jimu/BaseWidget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/Tooltip dijit/TooltipDialog dijit/popup dojo/text!./templates/CoordinateControl.html esri/geometry/webMercatorUtils esri/graphic esri/geometry/Point esri/request esri/SpatialReference esri/tasks/GeometryService esri/tasks/ProjectParameters esri/toolbars/draw jimu/dijit/Message ./_CoordinateControlFormatNotation ./_CoordinateControlConfirmNotation dojo/_base/sniff dijit/form/TextBox dijit/form/Textarea dijit/form/Select dijit/InlineEditBox".split(" "),
function(t,k,d,q,b,e,g,m,r,h,n,c,l,a,p,A,z,w,f,B,K,G,L,D,x,E,u,y,I,C,F,N,T,P,Q,Y){return t([w,f,B,a],{templateString:x,baseClass:"jimu-coordinate-control",parentWidget:null,input:!0,label:null,showCopyButton:!1,showFormatButton:!1,zoomScale:null,showDeleteButton:!0,showExpandButton:!0,showDrawPoint:!0,drawButtonLabel:null,drawToolTip:null,graphicsLayer:null,type:"DD",inputFromText:!0,addSign:!1,hasCustomLabel:!1,postMixInProperties:function(){this.nls=window.jimuNls.coordinateControl;this.isRenderIdForAttrs=
!0},constructor:function(a){t.safeMixin(this,a);this.uid=a.id||K.getUniqueId("cc");null===this.parentWidget&&console.error("No parentWidget parameter supplied: Parameter is mandatory");null===this.label&&console.info("No label parameter supplied (optional): Coordinate Control will have no label");null===this.zoomScale&&console.info("No zoomScale parameter supplied (optional): Coordinate Control will have no zoom button");null===this.drawButtonLabel&&console.info("No drawButtonLabel parameter supplied (optional): Coordinate Control will have no draw button");
null===this.graphicsLayer&&console.info("No graphicsLayer parameter supplied: Input graphics will not be shown on map")},postCreate:function(){this._frmtdlg=new L({id:this.uid+"_formatCoordinateTooltip",content:new Q({nls:this.nls,ct:this.type}),style:"width: 400px",onClose:d.hitch(this,this.popupDidClose)});z.after(this._frmtdlg,"onShow",d.hitch(this,function(){this._frmtdlg.content.frmtSelect.focus()}));z.after(this._frmtdlg,"onClose",d.hitch(this,function(){this.formatButton.focus()}));this.own(q(this._frmtdlg,
"keydown",d.hitch(this,function(a){a.keyCode===c.ESCAPE&&D.close(this._frmtdlg)})));"DartTheme"===this.parentWidget.appConfig.theme.name&&m.add(this._frmtdlg.domNode,"coordinateControlDialog");this.defaultFormat&&(this._frmtdlg.content.formats[this.type].defaultFormat=this.defaultFormat);this.geomsrvc=new F(this.parentWidget.appConfig.geometryService);this.dt=new T(this.parentWidget.map);this.initUI();this.setUIListeners()},initUI:function(){null===this.label?this.setHidden(this.coordNameContainer,
!1):this.coordName.setValue(this.label);this.input?(this.zoomButton.parentNode.style.display="none",this.setHidden(this.expandButton,!0),this.setHidden(this.removeControlBtn,!0),this.coordName.set("disabled","disabled"),this.coordName.set("value",this.label+" ("+this._frmtdlg.content.ct+")"),this.showDrawPoint?(this.drawPointButton.title=this.drawButtonLabel,null===this.drawToolTip&&(this.drawToolTip=this.nls.tooltip)):this.setHidden(this.drawPointButton,!0)):(this.coordtext.disabled=!0,this.setHidden(this.drawPointButton,
!0),this.showExpandButton||(this.setHidden(this.expandButton,!0),m.remove(this.domNode,"coordinateContainer"),m.add(this.domNode,"outputCoordinateContainer"),m.add(this.cpbtn,"outputCopyBtn"),this.coordtext.readOnly=!0),this.showDeleteButton||this.setHidden(this.removeControlBtn,!0));this.showCopyButton||(this.setHidden(this.cpbtn,!0),m.add(this.cpbtn,"inputCopyBtn"),g.set(this.cpbtn,"title",this.nls.copyAll));this.showFormatButton||this.setHidden(this.formatButton,!0);null===this.zoomScale&&this.setHidden(this.zoomButton,
!0);this.formatButton.title=this.input?this.nls.formatInput:this.nls.formatOutput;g.set(this.formatButton,"aria-label",this.formatButton.title)},setUIListeners:function(){this.input||n.subscribe("INPUTPOINTDIDCHANGE",d.hitch(this,this.mapWasClicked));n.subscribe("INPUTERROR",d.hitch(this,this.inputError));this.own(q(this.expandButton,"click",d.hitch(this,this.expandButtonWasClicked)));this.own(q(this.expandButton,"keydown",d.hitch(this,function(a){if(a.keyCode===c.ENTER||a.keyCode===c.SPACE)this.expandButtonWasClicked(a),
a.preventDefault()})));this.own(q(this.zoomButton,"click",d.hitch(this,this.zoomButtonWasClicked)));this.own(q(this.zoomButton,"keydown",d.hitch(this,function(a){a.keyCode!==c.ENTER&&a.keyCode!==c.SPACE||this.zoomButtonWasClicked(a)})));this.own(q(this.coordName,"change",d.hitch(this,this.coordNameDidChange)));this.cpbtn.addEventListener("click",d.hitch(this,this.cpBtnWasClicked));this.own(q(this.cpbtn,"keydown",d.hitch(this,function(a){a.keyCode!==c.ENTER&&a.keyCode!==c.SPACE||this.cpBtnWasClicked(a)})));
this.subVal1CpBtn.addEventListener("click",d.hitch(this,this.cpSubBtnWasClicked));this.own(q(this.subVal1CpBtn,"keydown",d.hitch(this,function(a){a.keyCode!==c.ENTER&&a.keyCode!==c.SPACE||this.cpSubBtnWasClicked(a)})));this.subVal2CpBtn.addEventListener("click",d.hitch(this,this.cpSubBtnWasClicked));this.own(q(this.subVal2CpBtn,"keydown",d.hitch(this,function(a){a.keyCode!==c.ENTER&&a.keyCode!==c.SPACE||this.cpSubBtnWasClicked(a)})));this.subVal3CpBtn.addEventListener("click",d.hitch(this,this.cpSubBtnWasClicked));
this.own(q(this.subVal3CpBtn,"keydown",d.hitch(this,function(a){a.keyCode!==c.ENTER&&a.keyCode!==c.SPACE||this.cpSubBtnWasClicked(a)})));this.subVal4CpBtn.addEventListener("click",d.hitch(this,this.cpSubBtnWasClicked));this.own(q(this.subVal4CpBtn,"keydown",d.hitch(this,function(a){a.keyCode!==c.ENTER&&a.keyCode!==c.SPACE||this.cpSubBtnWasClicked(a)})));this.own(q(this.formatButton,"click",d.hitch(this,this.formatButtonWasClicked)));this.own(q(this.formatButton,"keydown",d.hitch(this,function(a){a.keyCode!==
c.ENTER&&a.keyCode!==c.SPACE||this.formatButtonWasClicked(a)})));this.own(q(this.drawPointButton,"click",d.hitch(this,this.drawPointButtonWasClicked)));this.own(q(this.drawPointButton,"keydown",d.hitch(this,function(a){a.keyCode!==c.ENTER&&a.keyCode!==c.SPACE||this.drawPointButtonWasClicked(a)})));this.own(q(this.removeControlBtn,"keydown",d.hitch(this,function(a){a.keyCode!==c.ENTER&&a.keyCode!==c.SPACE||this.remove()})));this.own(q(this._frmtdlg.content.applyButton,"click",d.hitch(this,this.formatDialogApplyButtonClicked)));
this.own(q(this._frmtdlg.content.applyButton,"keydown",d.hitch(this,function(a){a.keyCode!==c.ENTER&&a.keyCode!==c.SPACE||this.formatDialogApplyButtonClicked()})));this.own(q(this._frmtdlg.content.cancelButton,"click",d.hitch(this,function(){D.close(this._frmtdlg)})));this.own(q(this._frmtdlg.content.cancelButton,"keydown",d.hitch(this,function(a){a.keyCode!==c.ENTER&&a.keyCode!==c.SPACE||D.close(this._frmtdlg)})));this.own(q(this.coordtext,"keydown",d.hitch(this,this.coordTextInputKeyWasPressed)));
this.own(q(this.coordtext,"input",d.hitch(this,function(){this.currentClickPointDD=null;this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display="none");this.emit("coordinates-deleted",{})})));this.own(this.geomsrvc.on("error",d.hitch(this,this.geomSrvcDidFail)));this.own(q(this.dt,"draw-complete",d.hitch(this,this.drawComplete)));this.own(z.after(this.parentWidget,"onClose",d.hitch(this,function(){this.input&&m.contains(this.drawPointButton,"drawPointBtn-active")&&this.deactivateDrawTool();
this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&"closed"===this.parentWidget.state&&D.close(this._frmtdlg)})));this.own(z.after(this.parentWidget,"onOpen",d.hitch(this,function(){var a=this.parentWidget.getParent().getParent().domNode;this.own(q(a,"click",d.hitch(this,function(a){"settingBtn"!==a.target.className&&this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&"active"===this.parentWidget.state&&D.close(this._frmtdlg)})))})))},formatDialogApplyButtonClicked:function(){this.type=this._frmtdlg.content.ct;
this.updateDisplay();this.input?this.coordName.set("value",this.label+" ("+this._frmtdlg.content.ct+")"):this.hasCustomLabel&&this.coordName.set("value",this.label);D.close(this._frmtdlg)},popupDidClose:function(){if(this._frmtdlg.content.isCanceled)this.addSign!==this._frmtdlg.content.addSignChkBox.checked&&(this._frmtdlg.content.addSignChkBox.checked=this.addSign);else{this.addSign=this._frmtdlg.content.addSignChkBox.checked;var a=this._frmtdlg.content.ct;this.type!==a&&(this.type=a,this.updateDisplay())}},
coordNameDidChange:function(){this.hasCustomLabel=!0},cpSubBtnWasClicked:function(a){var c;this[a.currentTarget.id.split("~")[0]].select();try{c=document.execCommand("copy")}catch(R){c=!1}this.showToolTip(a.currentTarget.id,c?this.nls.copySuccessful:this.nls.copyFailed)},cpBtnWasClicked:function(a){a.preventDefault();var c,b;if(this.input){a=K.toArray().filter(function(a){return"jimu-coordinate-control"===a.baseClass&&!a.input});b=a.map(function(a){if(a.coordtext)return a.coordtext.value}).join("\r\n");
a=this.coordtext.value;this.coordtext.value=a+"\r\n"+b;this.selectText(this.coordtext);try{c=document.execCommand("copy")}catch(Z){c=!1}this.coordtext.value=a}else{this.selectText(this.coordtext);try{c=document.execCommand("copy")}catch(Z){c=!1}}this.showToolTip(this.cpbtn.id,c?this.nls.copySuccessful:this.nls.copyFailed)},selectText:function(a){var c=document.getSelection();c.removeAllRanges();a.focus();var f=/Edge/.test(navigator.userAgent),w=!!window.MSInputMethodContext&&!!document.documentMode;
if(b("ff")||b("chrome")||b("safari"))!this.input&&this.coordtext.disabled?(this.coordtext.disabled=!1,a.select(),this.coordtext.disabled=!0):a.select();f&&a.select();w&&(f=document.createRange(),f.selectNode(a),c.addRange(f))},showToolTip:function(a,c){var b=p.byId(a);G.show(c,b);setTimeout(function(){G.hide(b)},1E3)},geomSrvcDidComplete:function(a){0>=a[0].length?(new P({message:this.nls.parseCoordinatesError}),n.publish("INPUTERROR")):(this.currentClickPointDD=this.currentClickPoint=new y(a[0][0],
a[0][1],new C({wkid:4326})),this.input&&(this.parentWidget.map.centerAt(this.currentClickPointDD),this.updateDisplay(),n.publish("INPUTPOINTDIDCHANGE",{mapPoint:this.currentClickPointDD,inputFromText:!0})))},geomSrvcDidFail:function(){new P({message:this.nls.parseCoordinatesError});n.publish("INPUTERROR")},coordTextInputKeyWasPressed:function(a){if(a.keyCode===c.ENTER){a.preventDefault();var b=this.getCleanInput(a.currentTarget.value);this.getCoordinateType(b).then(d.hitch(this,function(a){if(a)if(1===
a.length){var c=this.processCoordTextInput(b,a[0],!1);this.getXYNotation(c,a[0].conversionType).then(d.hitch(this,function(a){0<a[0].length?this.geomSrvcDidComplete(a):this.geomSrvcDidFail()}))}else this.confirmNotationDialog||(this.confirmNotationDialog=new Y({title:this.nls.comfirmInputNotation,nls:this.nls,options:a,style:"width: 400px",hasSkipCheckBox:!1,theme:this.parentWidget.appConfig.theme.name})),this.confirmNotationDialog.show().then(d.hitch(this,function(){var c=k.filter(a,function(a){return a.name===
this.confirmNotationDialog.comboOptions.get("value")},this),f=this.processCoordTextInput(b,c[0],!1);this.getXYNotation(f,c[0].conversionType).then(d.hitch(this,function(a){0<a[0].length?this.geomSrvcDidComplete(a):this.geomSrvcDidFail()}))},function(){}));else new P({message:this.nls.parseCoordinatesError}),n.publish("INPUTERROR")}));g.set(this.coordtext,"value",b);this.emit("get-coordinate-complete",b);this.currentClickPoint=null;this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display=
"inline-block")}if(a.keyCode===c.BACKSPACE||a.keyCode===c.DELETE)this.clear(),this.currentClickPointDD=null,this.zoomButton.parentNode.style.display="none",this.emit("coordinates-deleted",{})},getFormattedCoordinateText:function(){return this.coordtext.value},getCurrentMapCoordinate:function(){return this.currentClickPoint},getMapCoordinateDD:function(){return this.currentClickPointDD},deactivateDrawTool:function(){this.dt.deactivate();m.remove(this.drawPointButton,"drawPointBtn-active")},processCoordTextInput:function(a,
c,b){var f=c.pattern.exec(a),w,e,g,p,J,l,d,A,m,B,z=!1,L=c.name;switch(c.name){case "DD":w=f[2];e=f[7];g=f[10];p=f[16];J=f[3].replace(/[,:]/,".");l=f[11].replace(/[,:]/,".");L="DD";break;case "DDrev":w=f[11];e=f[16];g=f[2];p=f[8];J=f[12].replace(/[,:]/,".");l=f[3].replace(/[,:]/,".");L="DD";break;case "DDM":w=f[2];e=f[7];g=f[10];p=f[15];J=f[3];d=f[4].replace(/[,:]/,".");l=f[11];A=f[12].replace(/[,:]/,".");L="DDM";break;case "DDMrev":w=f[10];e=f[15];g=f[2];p=f[7];J=f[11];d=f[12].replace(/[,:]/,".");
l=f[3];A=f[4].replace(/[,:]/,".");L="DDM";break;case "DMS":w=f[2];e=f[8];g=f[11];p=f[17];J=f[3];d=f[4];m=f[5].replace(/[,:]/,".");l=f[12];A=f[13];B=f[14].replace(/[,:]/,".");L="DMS";break;case "DMSrev":w=f[11],e=f[17],g=f[2],p=f[8],J=f[12],d=f[13],m=f[14].replace(/[,:]/,"."),l=f[3],A=f[4],B=f[5].replace(/[,:]/,"."),L="DMS"}w&&e?(z=!0,w=(new RegExp(/[Ss-]/)).test(w)?"-":"+"):w=w&&(new RegExp(/[Ss-]/)).test(w)?"-":e&&(new RegExp(/[Ss-]/)).test(e)?"-":"+";g&&p?(z=!0,g=(new RegExp(/[Ww-]/)).test(g)?"-":
"+"):g=g&&(new RegExp(/[Ww-]/)).test(g)?"-":p&&(new RegExp(/[Ww-]/)).test(p)?"-":"+";z&&(b||new P({message:this.nls.latLongWarningMessage}));switch(L){case "DD":a=w+J+","+g+l;break;case "DDM":a=w+J+" "+d+","+g+l+" "+A;break;case "DMS":a=w+J+" "+d+" "+m+","+g+l+" "+A+" "+B}return a},zoomButtonWasClicked:function(){this.currentClickPointDD&&(this.parentWidget.map.getZoom()<this.zoomScale?this.parentWidget.map.centerAt(this.currentClickPointDD).then(d.hitch(this,function(){this.parentWidget.map.setScale(this.zoomScale)})):
this.parentWidget.map.centerAt(this.currentClickPointDD))},setHidden:function(a,c){r.set(a,"display","none");c&&A.destroy(a.parentNode)},setVisible:function(a){r.set(a,"display","inline-flex")},remove:function(){this.destroyRecursive();this.emit("removeCoordsControl")},mapWasClicked:function(a){this.currentClickPoint=a.mapPoint;this.getDDPoint(a.mapPoint).then(d.hitch(this,function(c){this.currentClickPointDDDD=this.currentClickPointDD=c;this.inputFromText=a.inputFromText?!0:!1;this.updateDisplay()}),
d.hitch(this,function(a){console.error(a)}))},getDDPoint:function(a){var c=new l,b=new C(3857);E.canProject(a,b)?c.resolve(E.webMercatorToGeographic(E.project(a,b))):(b={url:this.geomsrvc.url+"/findTransformations",content:{f:"json",inSR:a.spatialReference.wkid,outSR:4326,extentOfInterest:JSON.stringify(this.parentWidget.map.extent)},handleAs:"json",callbackParamName:"callback"},(new I(b,{usePost:!1})).then(d.hitch(this,function(b){b=(b=b&&b.transformations?b.transformations:void 0)&&0<b.length?b[0].wkid:
void 0;var f=new N;f.outSR=new C(4326);f.geometries=[a];f.transformForward=!0;f.transformation=b;this.geomsrvc.project(f,d.hitch(this,function(a){c.resolve(a[0])}),function(a){c.reject(a)})}),d.hitch(this,function(a){c.reject(a)})));return c},getProjectedPoint:function(a){var c=new l;if(E.canProject(a,this.parentWidget.map))c.resolve(E.geographicToWebMercator(a));else{var b={url:this.geomsrvc.url+"/findTransformations",content:{f:"json",inSR:4326,outSR:this.parentWidget.map.spatialReference.wkid,
extentOfInterest:JSON.stringify(this.parentWidget.map.extent)},handleAs:"json",callbackParamName:"callback"};(new I(b,{usePost:!1})).then(d.hitch(this,function(b){b=(b=b&&b.transformations?b.transformations:void 0)&&0<b.length?b[0].geoTransforms[0].wkid:void 0;var f=new N;f.outSR=new C(this.parentWidget.map.spatialReference);f.geometries=[a];f.transformForward=!0;f.transformation=b;this.geomsrvc.project(f,d.hitch(this,function(a){c.resolve(a[0])}),function(a){c.reject(a)})}),d.hitch(this,function(a){c.reject(a)}))}return c},
expandButtonWasClicked:function(){m.toggle(this.coordcontrols,"expanded");m.contains(this.coordcontrols,"expanded")?(m.remove(this.expandButton,"expandBtn"),m.add(this.expandButton,"collapseBtn"),g.set(this.expandButton,"aria-expanded","true")):(m.remove(this.expandButton,"collapseBtn"),m.add(this.expandButton,"expandBtn"),g.set(this.expandButton,"aria-expanded","false"));this.setSubCoordUI(m.contains(this.coordcontrols,"expanded"));this._setCoordControlsTabindex(m.contains(this.coordcontrols,"expanded"));
this.emit("expandButtonClicked",m.contains(this.coordcontrols,"expanded"))},_setCoordControlsTabindex:function(a){var c,b=[];a?(c=0,a=-1):(c=-1,a=0);b=e("input[tabindex\x3d'"+a+"']",this.coordcontrols);b=b.concat(e("span[tabindex\x3d'"+a+"']",this.coordcontrols));k.forEach(b,d.hitch(this,function(a){g.set(a,"tabindex",c)}))},formatButtonWasClicked:function(){this._frmtdlg.content.setCt(this.type);D.open({popup:this._frmtdlg,around:this.formatButton})},drawPointButtonWasClicked:function(){if(m.contains(this.drawPointButton,
"drawPointBtn-active"))this.dt.deactivate(),this.parentWidget.map.enableMapNavigation();else{this.parentWidget.map.disableMapNavigation();this.dt.activate(T.POINT);var a=this.dt._tooltip;a&&(a.innerHTML=this.drawToolTip)}m.toggle(this.drawPointButton,"drawPointBtn-active")},drawComplete:function(a){var c={};c.mapPoint=a.geometry;this.parentWidget.map.enableMapNavigation();this.mapWasClicked(c)},setSubCoordUI:function(a){if(a){a="165px";switch(this.type){case "DD":case "DMS":case "DDM":this.sub1label.innerHTML=
"Lat";this.sub2label.innerHTML="Lon";this.setHidden(this.sub3,!1);this.setHidden(this.sub4,!1);a="90px";break;case "GARS":this.sub1label.innerHTML="Lon";this.sub2label.innerHTML="Lat";this.sub3label.innerHTML="Quadrant";this.sub4label.innerHTML="Key";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "GEOREF":this.sub1label.innerHTML="15\u00b0 Quad";this.sub2label.innerHTML="1\u00b0 Quad";this.sub3label.innerHTML="Easting";this.setVisible(this.sub3);this.sub4label.innerHTML="Northing";
this.setVisible(this.sub4);break;case "USNG":case "MGRS":this.sub1label.innerHTML="GZD";this.sub2label.innerHTML="Grid Sq";this.sub3label.innerHTML="Easting";this.sub4label.innerHTML="Northing";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "UTM":this.sub1label.innerHTML="Zone";this.sub2label.innerHTML="Band";this.sub3label.innerHTML="Easting";this.sub4label.innerHTML="Northing";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "UTM_H":this.sub1label.innerHTML="Zone",
this.sub2label.innerHTML="Hemisphere",this.sub3label.innerHTML="Easting",this.sub4label.innerHTML="Northing",this.setVisible(this.sub3),this.setVisible(this.sub4)}r.set(this.coordcontrols,"display","block");r.set(this.coordcontrols,"height",a);r.set(this.coordcontrols,"width","300px")}else r.set(this.coordcontrols,"display","none"),r.set(this.coordcontrols,"height","0px");a=this.uid.split("_")[1];g.set(this["cc_"+a+"sub1val"],"aria-label",this.sub1label.innerHTML);g.set(this["cc_"+a+"sub2val"],"aria-label",
this.sub2label.innerHTML);g.set(this["cc_"+a+"sub3val"],"aria-label",this.sub3label.innerHTML);g.set(this["cc_"+a+"sub4val"],"aria-label",this.sub4label.innerHTML)},setCoordUI:function(a){var c;if(a){var b=this.uid.split("_")[1];if(!this["cc_"+b+"sub1val"]||this.input&&this.inputFromText)return;var f;f=this._frmtdlg.content.formats[this.type];f=f.useCustom?f.customFormat:f.defaultFormat;switch(this.type){case "DD":a=this.getFormattedDDStr(a,f,this.addSign);this["cc_"+b+"sub1val"].value=h.substitute("${xcrd}",
{xcrd:a.latdeg});this["cc_"+b+"sub2val"].value=h.substitute("${ycrd}",{ycrd:a.londeg});c=a.formatResult;break;case "DDM":a=this.getFormattedDDMStr(a,f,this.addSign);this["cc_"+b+"sub1val"].value=h.substitute("${latd} ${latm}",{latd:a.latdeg,latm:a.latmin});this["cc_"+b+"sub2val"].value=h.substitute("${lond} ${lonm}",{lond:a.londeg,lonm:a.lonmin});c=a.formatResult;break;case "DMS":a=this.getFormattedDMSStr(a,f,this.addSign);this["cc_"+b+"sub1val"].value=h.substitute("${latd} ${latm} ${lats}",{latd:a.latdeg,
latm:a.latmin,lats:a.latsec});this["cc_"+b+"sub2val"].value=h.substitute("${lond} ${lonm} ${lons}",{lond:a.londeg,lonm:a.lonmin,lons:a.lonsec});c=a.formatResult;break;case "USNG":a=this.getFormattedUSNGStr(a,f,!1);this["cc_"+b+"sub1val"].value=a.gzd;this["cc_"+b+"sub2val"].value=a.grdsq;this["cc_"+b+"sub3val"].value=a.easting;this["cc_"+b+"sub4val"].value=a.northing;c=a.formatResult;break;case "MGRS":a=this.getFormattedMGRSStr(a,f,!1);this["cc_"+b+"sub1val"].value=a.gzd;this["cc_"+b+"sub2val"].value=
a.grdsq;this["cc_"+b+"sub3val"].value=a.easting;this["cc_"+b+"sub4val"].value=a.northing;c=a.formatResult;break;case "GARS":a=this.getFormattedGARSStr(a,f,!1);this["cc_"+b+"sub1val"].value=a.lon;this["cc_"+b+"sub2val"].value=a.lat;this["cc_"+b+"sub3val"].value=a.quadrant;this["cc_"+b+"sub4val"].value=a.key;c=a.formatResult;break;case "GEOREF":a=this.getFormattedGEOREFStr(a,f,!1);this["cc_"+b+"sub1val"].value=a.lon+a.lat;this["cc_"+b+"sub2val"].value=a.quadrant15lon+a.quadrant15lat;this["cc_"+b+"sub3val"].value=
a.quadrant1lon;this["cc_"+b+"sub4val"].value=a.quadrant1lat;c=a.formatResult;break;case "UTM":a=this.getFormattedUTMStr(a,f,!1);a.bandLetter.match(/^[AaBbYyZz]/)?(this["cc_"+b+"sub1val"].value="",this["cc_"+b+"sub2val"].value="",this["cc_"+b+"sub3val"].value="",this["cc_"+b+"sub4val"].value="",a.formatResult=""):(this["cc_"+b+"sub1val"].value=a.zone,this["cc_"+b+"sub2val"].value=a.bandLetter,this["cc_"+b+"sub3val"].value=a.easting,this["cc_"+b+"sub4val"].value=a.westing);c=a.formatResult;break;case "UTM_H":a=
this.getFormattedUTMHStr(a,f,!1),a.hemisphere.match(/^[AaBbYyZz]/)?(this["cc_"+b+"sub1val"].value="",this["cc_"+b+"sub2val"].value="",this["cc_"+b+"sub3val"].value="",this["cc_"+b+"sub4val"].value="",a.formatResult=""):(this["cc_"+b+"sub1val"].value=a.zone,this["cc_"+b+"sub2val"].value=a.hemisphere,this["cc_"+b+"sub3val"].value=a.easting,this["cc_"+b+"sub4val"].value=a.westing),c=a.formatResult}}else c="";this.coordcontrols&&this.setSubCoordUI(m.contains(this.coordcontrols,"expanded"));this.coordtext&&
(g.set(this.coordtext,"value",c),this.emit("get-coordinate-complete",c))},getFormattedCoordinates:function(){this.getCoordValues(this.currentClickPointDD,this.type,4).then(d.hitch(this,function(a){this.setCoordUI(a)}),d.hitch(this,function(a){console.log(a)}))},updateDisplay:function(){this.currentClickPoint&&(this.currentClickPointDD||(this.currentClickPointDD=this.currentClickPoint),this.getFormattedCoordinates(this.currentClickPointDD),this.input&&(null!==this.graphicsLayer&&(this.graphicsLayer.clear(),
this.currentClickPoint.spatialReference.wkid===this.parentWidget.map.spatialReference.wkid?this.graphicsLayer.add(new u(this.currentClickPoint)):this.getProjectedPoint(this.currentClickPointDD).then(d.hitch(this,function(a){this.graphicsLayer.add(new u(a))}),d.hitch(this,function(a){console.error(a)}))),n.publish("INPUTPOINTDIDCHANGE",{mapPoint:this.currentClickPointDD,inputFromText:!0}),this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display="inline-block")))},clear:function(){this.coordtext.value=
"";this.currentClickPointDDDD=this.currentClickPointDD=this.currentClickPoint=null;this.graphicsLayer.clear()},inputError:function(){this.setCoordUI()},getCleanInput:function(a){a=a.replace(/\n/g,"");a=a.replace(/\s+/g," ").trim();return a.toUpperCase()},getCoordValues:function(a,c,b){var f=new l;a={sr:4326,coordinates:[[a.x,a.y]],conversionType:c.name?c.name:c,numOfDigits:b||6,rounding:!0,addSpaces:!1};switch(c){case "DD":a.numOfDigits=6;break;case "USNG":a.numOfDigits=5;break;case "MGRS":a.conversionMode=
"mgrsDefault";a.numOfDigits=5;break;case "UTM_H":a.conversionType="utm";a.conversionMode="utmNorthSouth";a.addSpaces=!0;break;case "UTM":a.conversionType="utm";a.conversionMode="utmDefault";a.addSpaces=!0;break;case "GARS":a.conversionMode="garsDefault"}this.geomsrvc.toGeoCoordinateString(a).then(function(a){f.resolve(a)},function(){f.resolve(null)});return f.promise},getXYNotation:function(a,c){var b=new l,f;f=c.name?c.name:c;c={sr:4326,conversionType:f,strings:[]};switch(f){case "DD":case "DDM":case "DMS":c.numOfDigits=
2;a=a.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");c.strings.push(a);break;case "DDrev":c.conversionType="DD";c.numOfDigits=2;a=a.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");c.strings.push(a);break;case "DDMrev":c.conversionType="DDM";c.numOfDigits=2;a=a.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");c.strings.push(a);break;case "DMSrev":c.conversionType="DMS";c.numOfDigits=2;a=a.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");c.strings.push(a);
break;case "USNG":c.strings.push(a);c.addSpaces="false";break;case "MGRS":c.conversionMode="mgrsNewStyle";c.strings.push(a);c.addSpaces="false";break;case "UTM_H":c.conversionType="utm";c.conversionMode="utmNorthSouth";c.strings.push(a);break;case "UTM":c.conversionType="utm";c.conversionMode="utmDefault";c.strings.push(a);break;case "GARS":c.conversionMode="garsCenter";c.strings.push(a);break;case "GEOREF":c.strings.push(a)}this.geomsrvc.fromGeoCoordinateString(c).then(function(a){b.resolve(a)},
function(){b.resolve(null)});return b.promise},getNotations:function(){return[{name:"DD",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDLatLongNotation,conversionType:"DD"},{name:"DDrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)/,
/([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDLongLatNotation,conversionType:"DD"},{name:"DDM",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/[\s]*$/].map(function(a){return a.source}).join("")),
notationType:this.nls.DDMLatLongNotation,conversionType:"DDM"},{name:"DDMrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDMLongLatNotation,conversionType:"DDM"},{name:"DMS",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)/,
/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),notationType:this.nls.DMSLatLongNotation,conversionType:"DMS"},{name:"DMSrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),
notationType:this.nls.DMSLongLatNotation,conversionType:"DMS"},{name:"GARS",pattern:/^\d{3}[a-zA-Z]{2}[1-4]?[1-9]?$/,notationType:this.nls.GARSNotation,conversionType:"GARS"},{name:"GEOREF",pattern:/^[a-zA-Z]{4}\d{1,8}$/,notationType:this.nls.GEOREFNotation,conversionType:"GEOREF"},{name:"MGRS",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)/,
/(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/].map(function(a){return a.source}).join("")),notationType:this.nls.MGRSNotation,conversionType:"MGRS"},{name:"UTM",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/].map(function(a){return a.source}).join("")),
notationType:this.nls.UTMBandNotation,conversionType:"UTM"},{name:"UTM (H)",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[NnSs][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]+\d{1,7}\.?\d*[mM]?$/].map(function(a){return a.source}).join("")),notationType:this.nls.UTMHemNotation,conversionType:"UTM_H"}]},getCoordinateType:function(a){var c=this.getCleanInput(a);a=new l;var b=this.getNotations(),c=k.filter(b,function(a){return a.pattern.test(this.v)},{v:c});0<c.length?a.resolve(c):a.resolve(null);return a.promise},getFormattedDDStr:function(a,
c,b){var f={};f.sourceValue=a;f.sourceFormatString=c;a=a[0].split(/[ ,]+/);f.latdeg=a[0].replace(/[nNsS]/,"");f.londeg=a[1].replace(/[eEwW]/,"");b&&("N"===a[0].slice(-1)?f.latdeg="+"+f.latdeg:f.latdeg="-"+f.latdeg,"W"===a[1].slice(-1)?f.londeg="-"+f.londeg:f.londeg="+"+f.londeg);c=c.replace(/X/,f.londeg);c=c.replace(/[eEwW]/,a[1].slice(-1));c=c.replace(/[nNsS]/,a[0].slice(-1));c=c.replace(/Y/,f.latdeg);f.formatResult=c;return f},getFormattedDDMStr:function(a,c,b){var f={};f.sourceValue=a;f.sourceFormatString=
c;f.parts=a[0].split(/[ ,]+/);f.latdeg=f.parts[0];f.latmin=f.parts[1].replace(/[nNsS]/,"");f.londeg=f.parts[2];f.lonmin=f.parts[3].replace(/[eEwW]/,"");b&&("N"===f.parts[1].slice(-1)?f.latdeg="+"+f.latdeg:f.latdeg="-"+f.latdeg,"W"===f.parts[3].slice(-1)?f.londeg="-"+f.londeg:f.londeg="+"+f.londeg);a=c.replace(/[EeWw]/,f.parts[3].slice(-1));a=a.replace(/Y/,f.lonmin);a=a.replace(/X/,f.londeg);a=a.replace(/[NnSs]/,f.parts[1].slice(-1));a=a.replace(/B/,f.latmin);a=a.replace(/A/,f.latdeg);f.formatResult=
a;return f},getFormattedDMSStr:function(a,c,b){var f={};f.sourceValue=a;f.sourceFormatString=c;f.parts=a[0].split(/[ ,]+/);f.latdeg=f.parts[0];f.latmin=f.parts[1];f.latsec=f.parts[2].replace(/[NnSs]/,"");f.londeg=f.parts[3];f.lonmin=f.parts[4];f.parts[5]&&(f.lonsec=f.parts[5].replace(/[EWew]/,""));b&&("N"===f.parts[2].slice(-1)?f.latdeg="+"+f.latdeg:f.latdeg="-"+f.latdeg,"W"===f.parts[5].slice(-1)?f.londeg="-"+f.londeg:f.londeg="+"+f.londeg);a=c.replace(/A/,f.latdeg);a=a.replace(/B/,f.latmin);a=a.replace(/C/,
f.latsec);a=a.replace(/X/,f.londeg);a=a.replace(/Y/,f.lonmin);a=a.replace(/Z/,f.lonsec);a=a.replace(/[NnSs]/,f.parts[2].slice(-1));f.parts[5]&&(a=a.replace(/[EeWw]/,f.parts[5].slice(-1)));f.formatResult=a;return f},getFormattedUSNGStr:function(a,c){var f={};f.sourceValue=a;f.sourceFormatString=c;a[0].match(/^[ABYZ]/)?f.gzd=a[0].match(/[ABYZ]/)[0].trim():f.gzd=a[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();a[0].replace(f.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)&&(f.grdsq=a[0].replace(f.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim());
a[0].replace(f.gzd+f.grdsq,"").match(/^\d{1,5}/)&&(f.easting=a[0].replace(f.gzd+f.grdsq,"").match(/^\d{1,5}/)[0].trim());a[0].replace(f.gzd+f.grdsq,"").match(/\d{1,5}$/)&&(f.northing=a[0].replace(f.gzd+f.grdsq,"").match(/\d{1,5}$/)[0].trim());a=c.replace(/Y/,f.northing);a=a.replace(/X/,f.easting);a=a.replace(/S/,f.grdsq);a=a.replace(/Z/,f.gzd);f.formatResult=a;return f},getFormattedMGRSStr:function(a,c){var f={};f.sourceValue=a;f.sourceFormatString=c;a[0].match(/^[ABYZ]/)?f.gzd=a[0].match(/[ABYZ]/)[0].trim():
f.gzd=a[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();f.grdsq=a[0].replace(f.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();f.easting=a[0].replace(f.gzd+f.grdsq,"").match(/^\d{1,5}/)[0].trim();f.northing=a[0].replace(f.gzd+f.grdsq,"").match(/\d{1,5}$/)[0].trim();a=c.replace(/Y/,f.northing);a=a.replace(/X/,f.easting);a=a.replace(/S/,f.grdsq);a=a.replace(/Z/,f.gzd);f.formatResult=a;return f},getFormattedGARSStr:function(a,c){var f={};f.sourceValue=a;f.sourceFormatString=c;f.lon=a[0].match(/\d{3}/);f.lat=a[0].match(/[a-zA-Z]{2}/);
a=a[0].match(/\d*$/);f.quadrant=a[0][0];f.key=a[0][1];c=c.replace(/K/,f.key);c=c.replace(/Q/,f.quadrant);c=c.replace(/Y/,f.lat);c=c.replace(/X/,f.lon);f.formatResult=c;return f},getFormattedGEOREFStr:function(a,f){var c={};c.sourceValue=a;c.sourceFormatString=f;c.lon=a[0].match(/[a-zA-Z]{1}/)[0].trim();c.lat=a[0].replace(c.lon,"").match(/[a-zA-Z]{1}/)[0].trim();c.quadrant15lon=a[0].replace(c.lon+c.lat,"").match(/[a-zA-Z]{1}/)[0].trim();c.quadrant15lat=a[0].replace(c.lon+c.lat+c.quadrant15lon,"").match(/[a-zA-Z]{1}/)[0].trim();
a=a[0].replace(c.lon+c.lat+c.quadrant15lon+c.quadrant15lat,"");c.quadrant1lon=a.substr(0,a.length/2);c.quadrant1lat=a.substr(a.length/2,a.length);f=f.replace(/Y/,c.quadrant1lat);f=f.replace(/X/,c.quadrant1lon);f=f.replace(/D/,c.quadrant15lat);f=f.replace(/C/,c.quadrant15lon);f=f.replace(/B/,c.lat);f=f.replace(/A/,c.lon);c.formatResult=f;return c},getFormattedUTMStr:function(a,c){var f={};f.sourceValue=a;f.sourceFormatString=c;f.parts=a[0].split(/[ ,]+/);f.zone=f.parts[0].replace(/[A-Z]/,"");f.bandLetter=
f.parts[0].slice(-1);f.easting=f.parts[1];f.westing=f.parts[2];a=c.replace(/Y/,f.westing);a=a.replace(/X/,f.easting);a=a.replace(/B/,f.bandLetter);a=a.replace(/Z/,f.zone);f.formatResult=a;return f},getFormattedUTMHStr:function(a,f){var c={};c.sourceValue=a;c.sourceFormatString=f;c.parts=a[0].split(/[ ,]+/);c.zone=c.parts[0].replace(/[A-Z]/,"");c.hemisphere=c.parts[0].slice(-1);c.easting=c.parts[1];c.westing=c.parts[2];a=f.replace(/Y/,c.westing);a=a.replace(/X/,c.easting);a=a.replace(/H/,c.hemisphere);
a=a.replace(/Z/,c.zone);c.formatResult=a;return c}})})},"jimu/dijit/_CoordinateControlFormatNotation":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/on dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),function(t,k,d,q,b,e,g,m){return t([e,g,m],{baseClass:"jimu-coordinate-control",templateString:'\x3cdiv\x3e\x3cspan class\x3d"formatText"\x3e${nls.editCoordinateDialogTitle}\x3c/span\x3e\x3cdiv class\x3d"controlContainer"\x3e\x3cselect tabindex\x3d"0" class\x3d"selectFormat" data-dojo-attach-point\x3d"frmtSelect" aria-label\x3d"${nls.editCoordinateDialogTitle}" data-dojo-type\x3d"jimu/dijit/formSelect"\x3e\x3c/select\x3e\x3cinput tabindex\x3d"0" type\x3d"text" data-dojo-attach-point\x3d"frmtVal" class\x3d"formatInput"\x3e\x3c/input\x3e\x3cdiv class\x3d"settingsContainer" data-dojo-attach-point\x3d"prefixContainer"\x3e\x3cdiv class\x3d"formatText" data-dojo-attach-point\x3d"addSignChkBox" label\x3d"${nls.posNegPrefixLabel}" data-dojo-type\x3d"jimu/dijit/CheckBox"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btnContainer"\x3e\x3cdiv tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.applyButtonLabel}" data-dojo-attach-point\x3d"applyButton" class\x3d"jimu-btn"\x3e${nls.applyButtonLabel}\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"cancelButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.cancelButtonLabel}" class\x3d"jimu-btn formatCoordCancelButton"\x3e${nls.cancelButtonLabel}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
isCanceled:!1,formats:{},setCt:function(b){this.ct=b;this.frmtSelect.set("value",this.ct)},postCreate:function(){this.formats={DD:{defaultFormat:"YN XE",customFormat:null,useCustom:!1},DDM:{defaultFormat:"A\u00b0 B'N X\u00b0 Y'E",customFormat:null,useCustom:!1},DMS:{defaultFormat:"A\u00b0 B' C\"N X\u00b0 Y' Z\"E",customFormat:null,useCustom:!1},GARS:{defaultFormat:"XYQK",customFormat:null,useCustom:!1},GEOREF:{defaultFormat:"ABCDXY",customFormat:null,useCustom:!1},MGRS:{defaultFormat:"ZSXY",customFormat:null,
useCustom:!1},USNG:{defaultFormat:"ZSXY",customFormat:null,useCustom:!1},UTM:{defaultFormat:"ZB X Y",customFormat:null,useCustom:!1},UTM_H:{defaultFormat:"ZH X Y",customFormat:null,useCustom:!1}};var e=[],g,d;for(d in this.formats)g={value:d,label:this.nls.notations[d]},e.push(g);this.frmtSelect.addOption(e);b.set(this.frmtVal,"value",this.formats[this.ct].defaultFormat);this.own(q(this.frmtSelect,"change",k.hitch(this,this.frmtSelectValueDidChange)));this.own(q(this.frmtVal,"change",k.hitch(this,
this.formatValDidChange)));this.own(q(this.cancelButton,"click",k.hitch(this,function(){this.isCanceled=!0})));this.own(q(this.applyButton,"click",k.hitch(this,function(){this.isCanceled=!1})));this.displayPrefixContainer()},formatValDidChange:function(){var e=b.get(this.frmtVal,"value"),g=this.frmtSelect.get("value");this.formats[g].customFormat=e;this.formats[g].useCustom=!0},frmtSelectValueDidChange:function(e){var g=this.formats[e].useCustom?this.formats[e].customFormat:this.formats[e].defaultFormat;
this.ct=e;b.set(this.frmtVal,"value",g);this.displayPrefixContainer()},displayPrefixContainer:function(){switch(this.ct){case "DD":case "DDM":case "DMS":d.set(this.prefixContainer,{display:""});break;default:d.set(this.prefixContainer,{display:"none"})}}})})},"jimu/dijit/_CoordinateControlConfirmNotation":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/aspect dojo/keys dojo/query dijit/Dialog dijit/form/Select dojo/_base/lang".split(" "),
function(t,k,d,q,b,e,g,m,r,h,n){return t([r],{baseClass:"jimu-coordinate-control",numberOfInputs:0,selectOptions:{},comboOptions:{},dfd:null,constructor:function(c){n.mixin(this,c);this.numberOfInputs=c.options.length;this.selectOptions=c.options},postCreate:function(){this.inherited("postCreate",arguments);this.closable=!1;this.closeButtonNode.style.display="none";"DartTheme"===this.theme&&b.add(this.containerNode,"coordinateControlDialog");this.message=q.create("div",{style:"margin-bottom: 5px"},
this.containerNode,"first");this.message.innerHTML=this.numberOfInputs+" "+this.nls.multipleNotationLabel;this.comboOptions=new h({style:{width:"99%"},"aria-label":this.numberOfInputs+" "+this.nls.multipleNotationLabel},q.create("div",{},this.containerNode,"last"));this.own(e.after(this.comboOptions,"onChange",d.hitch(this,this._onComboOptionsChanged)));for(var c=0;c<this.selectOptions.length;c++)this.comboOptions.addOption({value:this.selectOptions[c].name,label:this.selectOptions[c].notationType});
this.buttonDiv=q.create("div",{"class":"buttonContainer",style:"margin-top:10px;"+(window.isRTL?"text-align:left":"text-align:right")},this.containerNode,"last");this.okButton=q.create("div",{innerHTML:this.nls.applyButtonLabel,"class":"jimu-btn",role:"button",tabindex:"0","aria-label":this.nls.applyButtonLabel,onclick:n.hitch(this,function(){this.hide();this.dfd.resolve()}),onkeypress:n.hitch(this,function(c){if(c.keyCode===g.ENTER||c.keyCode===g.SPACE)this.hide(),this.dfd.resolve()})},this.buttonDiv,
"first");this.cancelButton=q.create("div",{innerHTML:this.nls.cancelButtonLabel,"class":"jimu-btn",style:"margin: 0 5px 0 5px",role:"button",tabindex:"0","aria-label":this.nls.cancelButtonLabel,onclick:n.hitch(this,function(){this.hide();this.dfd.cancel()}),onkeypress:n.hitch(this,function(c){if(c.keyCode===g.ENTER||c.keyCode===g.SPACE)this.hide(),this.dfd.cancel()})},this.buttonDiv,"last")},show:function(){this.inherited("show",arguments);this.dfd=new k;var c=this._getDOMElement(".dijitSelectLabel",
this.comboOptions.domNode);c&&b.add(c,"dijitSelectLabelConfirmNotation");return this.dfd},_onComboOptionsChanged:function(){var c=this._getDOMElement(".dijitSelectLabel",this.comboOptions.domNode);c&&b.add(c,"dijitSelectLabelConfirmNotation")},_getDOMElement:function(c,b){return(c=m(c,b))&&1===c.length?c[0]:null}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(t,k,d,q){return t("dijit.form.Textarea",[q,d],
{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);k.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),function(t,k,d,q,b,e,g){d.add("textarea-needs-help-shrinking",
function(){var b=e.body(),g=k.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},b,"last"),d=g.scrollHeight>=g.clientHeight;b.removeChild(g);return d});return t("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments);
this.resize()},postCreate:function(){this.inherited(arguments);var e=this.textbox;e.style.overflowY="hidden";this.own(b(e,"focus, resize",q.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(g.on("resize",q.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(b){this.inherited(arguments);this.resize()},_estimateHeight:function(){var b=this.textbox;b.rows=(b.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},resize:function(){function b(){var a=
!1;""===e.value&&(e.value=" ",a=!0);var c=e.scrollHeight;a&&(e.value="");return c}var e=this.textbox;"hidden"==e.style.overflowY&&(e.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(b()||e.offsetHeight){var g=b()+Math.max(e.offsetHeight-e.clientHeight,0),n=g+"px";n!=e.style.height&&(e.style.height=n,e.rows=1);if(d("textarea-needs-help-shrinking")){var c=b(),l=e.style.minHeight,a=4,p=e.scrollTop;e.style.minHeight=n;for(e.style.height="auto";0<g;){e.style.minHeight=Math.max(g-a,4)+"px";n=
b();c-=n;g-=c;if(c<a)break;c=n;a<<=1}e.style.height=g+"px";e.style.minHeight=l;e.scrollTop=p}e.style.overflowY=b()>e.clientHeight?"auto":"hidden";"hidden"==e.style.overflowY&&(e.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/InlineEditBox":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/when ./a11yclick ./focus ./_Widget ./_TemplatedMixin ./_WidgetsInTemplateMixin ./_Container ./form/Button ./form/_TextBoxMixin ./form/TextBox dojo/text!./templates/InlineEditBox.html dojo/i18n!./nls/common".split(" "),
function(t,k,d,q,b,e,g,m,r,h,n,c,l,a,p,A,z,w,f,B,K,G,L,D,x){f=q("dijit._InlineEditor",[w,f,B],{templateString:x,contextRequire:t,postMixInProperties:function(){this.inherited(arguments);this.messages=r.getLocalization("dijit","common",this.lang);k.forEach(["buttonSave","buttonCancel"],function(a){this[a]||(this[a]=this.messages[a])},this)},buildRendering:function(){this.inherited(arguments);var a="string"==typeof this.editor?c.getObject(this.editor)||t(this.editor):this.editor,f=this.sourceStyle,
b="line-height:"+f.lineHeight+";",e=m.getComputedStyle(this.domNode);k.forEach(["Weight","Family","Size","Style"],function(a){e["font"+a]!=f["font"+a]&&(b+="font-"+a+":"+f["font"+a]+";")},this);k.forEach("marginTop marginBottom marginLeft marginRight position left top right bottom float clear display".split(" "),function(a){this.domNode.style[a]=f[a]},this);var w=this.inlineEditBox.width;"100%"==w?(b+="width:100%;",this.domNode.style.display="block"):b+="width:"+(w+(Number(w)==w?"px":""))+";";w=c.delegate(this.inlineEditBox.editorParams,
{style:b,dir:this.dir,lang:this.lang,textDir:this.textDir});this.editWidget=new a(w,this.editorPlaceholder);this.inlineEditBox.autoSave&&(this.saveButton.destroy(),this.cancelButton.destroy(),this.saveButton=this.cancelButton=null,g.destroy(this.buttonContainer))},postCreate:function(){this.inherited(arguments);var a=this.editWidget;this.inlineEditBox.autoSave?this.own(d.after(a,"onChange",c.hitch(this,"_onChange"),!0),l(a,"keydown",c.hitch(this,"_onKeyDown"))):"intermediateChanges"in a&&(a.set("intermediateChanges",
!0),this.own(d.after(a,"onChange",c.hitch(this,"_onIntermediateChange"),!0)),this.saveButton.set("disabled",!0))},startup:function(){this.editWidget.startup();this.inherited(arguments)},_onIntermediateChange:function(){this.saveButton.set("disabled",this.getValue()==this._resetValue||!this.enableSave())},destroy:function(){this.editWidget.destroy(!0);this.inherited(arguments)},getValue:function(){var a=this.editWidget;return String(a.get("displayedValue"in a||"_getDisplayedValueAttr"in a?"displayedValue":
"value"))},_onKeyDown:function(a){this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&!a.altKey&&!a.ctrlKey&&(a.keyCode==n.ESCAPE?(a.stopPropagation(),a.preventDefault(),this.cancel(!0)):a.keyCode==n.ENTER&&"INPUT"==a.target.tagName&&(a.stopPropagation(),a.preventDefault(),this._onChange()))},_onBlur:function(){this.inherited(arguments);this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(this.getValue()==this._resetValue?this.cancel(!1):this.enableSave()&&this.save(!1))},_onChange:function(){this.inlineEditBox.autoSave&&
this.inlineEditBox.editing&&this.enableSave()&&z.focus(this.inlineEditBox.displayNode)},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():!0},focus:function(){this.editWidget.focus();this.editWidget.focusNode&&(z._onFocusNode(this.editWidget.focusNode),"INPUT"==this.editWidget.focusNode.tagName&&this.defer(function(){L.selectInputText(this.editWidget.focusNode)}))}});w=q("dijit.InlineEditBox"+(a("dojo-bidi")?"_NoBidi":""),w,{editing:!1,autoSave:!0,buttonSave:"",buttonCancel:"",
renderAsHtml:!1,editor:D,editorWrapper:f,editorParams:{},disabled:!1,onChange:function(){},onCancel:function(){},width:"100%",value:"",noValueIndicator:6>=a("ie")?"\x3cspan style\x3d'font-family: wingdings; text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e":"\x3cspan style\x3d'text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e",constructor:function(){this.editorParams=
{}},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;this.own(l(this.displayNode,A,c.hitch(this,"_onClick")),l(this.displayNode,"mouseover, focus",c.hitch(this,"_onMouseOver")),l(this.displayNode,"mouseout, blur",c.hitch(this,"_onMouseOut")));this.displayNode.setAttribute("role","button");this.displayNode.getAttribute("tabIndex")||this.displayNode.setAttribute("tabIndex",0);this.value||"value"in this.params||(this.value=c.trim(this.renderAsHtml?this.displayNode.innerHTML:
this.displayNode.innerText||this.displayNode.textContent||""));this.value||(this.displayNode.innerHTML=this.noValueIndicator);e.add(this.displayNode,"dijitInlineEditBoxDisplayMode")},setDisabled:function(a){h.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.domNode.setAttribute("aria-disabled",a?"true":"false");a?this.displayNode.removeAttribute("tabIndex"):this.displayNode.setAttribute("tabIndex",
0);e.toggle(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",a);this._set("disabled",a)},_onMouseOver:function(){this.disabled||e.add(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onMouseOut:function(){e.remove(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onClick:function(a){this.disabled||(a&&(a.stopPropagation(),a.preventDefault()),this._onMouseOut(),this.defer("edit"))},edit:function(){if(!this.disabled&&!this.editing){this._set("editing",!0);this._savedTabIndex=
b.get(this.displayNode,"tabIndex")||"0";if(!this.wrapperWidget){var a=g.create("span",null,this.domNode,"before");this.wrapperWidget=new ("string"==typeof this.editorWrapper?c.getObject(this.editorWrapper):this.editorWrapper)({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:m.getComputedStyle(this.displayNode),save:c.hitch(this,"save"),cancel:c.hitch(this,"cancel"),
textDir:this.textDir},a);this.wrapperWidget._started||this.wrapperWidget.startup();this._started||this.startup()}var f=this.wrapperWidget;e.add(this.displayNode,"dijitOffScreen");e.remove(f.domNode,"dijitOffScreen");m.set(f.domNode,{visibility:"visible"});b.set(this.displayNode,"tabIndex","-1");var w=f.editWidget,d=this;p(w.onLoadDeferred,c.hitch(f,function(){w.set("displayedValue"in w||"_setDisplayedValueAttr"in w?"displayedValue":"value",d.value);this.defer(function(){f.saveButton&&f.saveButton.set("disabled",
"intermediateChanges"in w);this.focus();this._resetValue=this.getValue()})}))}},_onBlur:function(){this.inherited(arguments)},destroy:function(){this.wrapperWidget&&!this.wrapperWidget._destroyed&&(this.wrapperWidget.destroy(),delete this.wrapperWidget);this.inherited(arguments)},_showText:function(a){var c=this.wrapperWidget;m.set(c.domNode,{visibility:"hidden"});e.add(c.domNode,"dijitOffScreen");e.remove(this.displayNode,"dijitOffScreen");b.set(this.displayNode,"tabIndex",this._savedTabIndex);a&&
z.focus(this.displayNode)},save:function(a){if(!this.disabled&&this.editing){this._set("editing",!1);var c=this.wrapperWidget.getValue();this.set("value",c);this._showText(a)}},setValue:function(a){h.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0");return this.set("value",a)},_setValueAttr:function(a){a=c.trim(a);var f=this.renderAsHtml?a:a.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;").replace(/\n/g,
"\x3cbr\x3e");this.displayNode.innerHTML=this.editorParams&&"password"===this.editorParams.type?"********":f||this.noValueIndicator;this._set("value",a);this._started&&this.defer(function(){this.onChange(a)})},getValue:function(){h.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0");return this.get("value")},cancel:function(a){!this.disabled&&this.editing&&(this._set("editing",!1),this.defer("onCancel"),this._showText(a))}});a("dojo-bidi")&&(w=q("dijit.InlineEditBox",
w,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.displayNode)}}));w._InlineEditor=f;return w})},"esri/dijit/util/busyIndicator":function(){define("dijit/registry dojo/_base/lang dojo/_base/window dojo/dom dojo/dom-construct dojox/widget/Standby require".split(" "),function(t,k,d,q,b,e,g){var m={_defaultStandbyParams:{image:g.toUrl("../images/loading-throb.gif"),color:"#fff",opacity:.75,duration:200},create:function(g){if(g=this._normalizeParams(g))return g=new e(m._toStandbyParams(g)),
b.place(g.domNode,d.doc.body),m._createHandle(g)},_normalizeParams:function(b){if(b){if(b.target)return b;if("string"===typeof b){var e=t.byId(b);b=e?e.domNode:q.byId(b)}else b=b.domNode?b.domNode:q.byId(b);if(b)return{target:b}}},_toStandbyParams:function(b){b.imageUrl&&(b.image=b.imageUrl);b.backgroundColor&&(b.color=b.backgroundColor);b.backgroundOpacity&&(b.opacity=b.backgroundOpacity);b.fadeDuration&&(b.duration=b.fadeDuration);return k.mixin({},m._defaultStandbyParams,b)},_createHandle:function(b){return{show:function(){b&&
b.show()},hide:function(){b&&b.hide()},destroy:function(){b&&(b.destroy(),b=null)}}}};return m})},"dojox/widget/Standby":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/window dojo/_base/window dojo/_base/fx dojo/fx dijit/_Widget dijit/_TemplatedMixin dijit/registry".split(" "),function(t,k,d,q,b,e,g,m,r,h,n,c,l,a,p,A,z){t.experimental("dojox.widget.Standby");
return k("dojox.widget.Standby",[p,A],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'\x3cdiv\x3e\x3cdiv style\x3d"display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint\x3d"_underlayNode"\x3e\x3c/div\x3e\x3cimg src\x3d"${image}" style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint\x3d"_imageNode"\x3e\x3cdiv style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint\x3d"_textNode"\x3e\x3c/div\x3e\x3c/div\x3e',
_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(a){if(!this._started){if("string"===typeof this.target){var f=z.byId(this.target);this.target=f?f.domNode:e.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text);"image"===this.centerIndicator?(this._centerNode=this._imageNode,g.set(this._imageNode,"src",this.image),g.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode;h.set(this._underlayNode,
{display:"none",backgroundColor:this.color});h.set(this._centerNode,"display","none");this.connect(this._underlayNode,"onclick","_ignore");this.domNode.parentNode&&this.domNode.parentNode!=c.body()&&c.body().appendChild(this.domNode);7==b("ie")&&(this._ieFixNode=m.create("div"),h.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),c.body().appendChild(this._ieFixNode));this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),
this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){if(this._displayed)try{this._anim&&(this._anim.stop(),delete this._anim),this._size()}catch(w){console.error(w)}finally{this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null)}},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1;this._resizeCheck&&clearInterval(this._resizeCheck);
h.set(this._centerNode,"display","none");h.set(this._underlayNode,"display","none");7==b("ie")&&this._ieFixNode&&(c.body().removeChild(this._ieFixNode),delete this._ieFixNode);this._anim&&(this._anim.stop(),delete this._anim);this._centerNode=this._textNode=this._imageNode=this.target=null;this.inherited(arguments)},_size:function(){if(this._displayed){var a=g.get(c.body(),"dir");a&&(a=a.toLowerCase());var f,e=this._scrollerWidths(),p=this.target,d=h.get(this._centerNode,"display");h.set(this._centerNode,
"display","block");var l=r.position(p,!0);if(p===c.body()||p===c.doc)l=n.getBox(),l.x=l.l,l.y=l.t;var A=r.getMarginBox(this._centerNode);h.set(this._centerNode,"display",d);this._ieFixNode&&(f=-this._ieFixNode.offsetTop/1E3,l.x=Math.floor((l.x+.9)/f),l.y=Math.floor((l.y+.9)/f),l.w=Math.floor((l.w+.9)/f),l.h=Math.floor((l.h+.9)/f));var m=h.get(p,"zIndex"),z=d=m;if("auto"===this.zIndex)if("auto"!=m)d=parseInt(d,10),z=parseInt(z,10);else{var k=p;if(k&&k!==c.body()&&k!==c.doc)for(k=p.parentNode,f=-1E5;k&&
k!==c.body();)(m=h.get(k,"zIndex"))&&"auto"!==m&&(m=parseInt(m,10),f<m&&(f=m,d=m+1,z=m+1)),k=k.parentNode}else d=parseInt(this.zIndex,10),z=parseInt(this.zIndex,10);h.set(this._centerNode,"zIndex",z);h.set(this._underlayNode,"zIndex",d);if((d=p.parentNode)&&d!==c.body()&&p!==c.body()&&p!==c.doc){k=l.h;z=l.w;p=r.position(d,!0);this._ieFixNode&&(f=-this._ieFixNode.offsetTop/1E3,p.x=Math.floor((p.x+.9)/f),p.y=Math.floor((p.y+.9)/f),p.w=Math.floor((p.w+.9)/f),p.h=Math.floor((p.h+.9)/f));p.w-=d.scrollHeight>
d.clientHeight&&0<d.clientHeight?e.v:0;p.h-=d.scrollWidth>d.clientWidth&&0<d.clientWidth?e.h:0;"rtl"===a&&(b("opera")?(l.x+=d.scrollHeight>d.clientHeight&&0<d.clientHeight?e.v:0,p.x+=d.scrollHeight>d.clientHeight&&0<d.clientHeight?e.v:0):b("ie")?p.x+=d.scrollHeight>d.clientHeight&&0<d.clientHeight?e.v:0:b("webkit"));p.w<l.w&&(l.w-=p.w);p.h<l.h&&(l.h-=p.h);var q=p.y,t=p.y+p.h,C=l.y,F=l.y+k,a=p.x;f=p.x+p.w;var m=l.x,N=l.x+z;if(F>q&&C<q)l.y=p.y,k-=q-C,l.h=k<p.h?k:l.h-2*(d.scrollWidth>d.clientWidth&&
0<d.clientWidth?e.h:0);else if(C<t&&F>t)l.h=t-C;else if(F<=q||C>=t)l.h=0;if(N>a&&m<a)l.x=p.x,z-=a-m,l.w=z<p.w?z:l.w-2*(d.scrollHeight>d.clientHeight&&0<d.clientHeight?e.w:0);else if(m<f&&N>f)l.w=f-m;else if(N<=a||m>=f)l.w=0}0<l.h&&0<l.w?(h.set(this._underlayNode,{display:"block",width:l.w+"px",height:l.h+"px",top:l.y+"px",left:l.x+"px"}),e=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"],this._cloneStyles(e),b("ie")||(e="MozBorderRadius MozBorderRadiusTopleft MozBorderRadiusTopright MozBorderRadiusBottomleft MozBorderRadiusBottomright WebkitBorderRadius WebkitBorderTopLeftRadius WebkitBorderTopRightRadius WebkitBorderBottomLeftRadius WebkitBorderBottomRightRadius".split(" "),
this._cloneStyles(e,this)),e=l.h/2-A.h/2,d=l.w/2-A.w/2,l.h>=A.h&&l.w>=A.w?h.set(this._centerNode,{top:e+l.y+"px",left:d+l.x+"px",display:"block"}):h.set(this._centerNode,"display","none")):(h.set(this._underlayNode,"display","none"),h.set(this._centerNode,"display","none"));if(null===this._resizeCheck){var T=this;this._resizeCheck=setInterval(function(){T._size()},100)}}},_cloneStyles:function(a){d.forEach(a,function(a){h.set(this._underlayNode,a,h.get(this.target,a))},this)},_fadeIn:function(){var c=
this,f=l.animateProperty({duration:c.duration,node:c._underlayNode,properties:{opacity:{start:0,end:c.opacity}}}),b=l.animateProperty({duration:c.duration,node:c._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){c.onShow();delete c._anim}});this._anim=a.combine([f,b]);this._anim.play()},_fadeOut:function(){var c=this,f=l.animateProperty({duration:c.duration,node:c._underlayNode,properties:{opacity:{start:c.opacity,end:0}},onEnd:function(){h.set(this.node,{display:"none",zIndex:"-1000"})}}),
b=l.animateProperty({duration:c.duration,node:c._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){h.set(this.node,{display:"none",zIndex:"-1000"});c.onHide();c._enableOverflow();delete c._anim}});this._anim=a.combine([f,b]);this._anim.play()},_ignore:function(a){a&&q.stop(a)},_scrollerWidths:function(){var a=m.create("div");h.set(a,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var f=m.create("div");
h.set(f,{width:"200px",height:"10px"});a.appendChild(f);c.body().appendChild(a);f=r.getContentBox(a);h.set(a,"overflow","scroll");var b=r.getContentBox(a);c.body().removeChild(a);return{v:f.w-b.w,h:f.h-b.h}},_setTextAttr:function(a){this.text=this._textNode.innerHTML=a},_setColorAttr:function(a){h.set(this._underlayNode,"backgroundColor",a);this.color=a},_setImageTextAttr:function(a){g.set(this._imageNode,"alt",a);this.imageText=a},_setImageAttr:function(a){g.set(this._imageNode,"src",a);this.image=
a},_setCenterIndicatorAttr:function(a){this.centerIndicator=a;"image"===a?(this._centerNode=this._imageNode,h.set(this._textNode,"display","none")):(this._centerNode=this._textNode,h.set(this._imageNode,"display","none"))},_setTargetAttr:function(a){if("string"===typeof a){var c=z.byId(a);this._set("target",c?c.domNode:e.byId(a))}else this._set("target",a)},_disableOverflow:function(){if(this.target===c.body()||this.target===c.doc){this._overflowDisabled=!0;var a=c.body();this._oldOverflow=a.style&&
a.style.overflow?h.get(a,"overflow"):"";if(b("ie")&&!b("quirks")){if(a.parentNode&&a.parentNode.style&&a.parentNode.style.overflow)this._oldBodyParentOverflow=a.parentNode.style.overflow;else try{this._oldBodyParentOverflow=h.get(a.parentNode,"overflow")}catch(f){this._oldBodyParentOverflow="scroll"}h.set(a.parentNode,"overflow","hidden")}h.set(a,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var a=c.body();b("ie")&&!b("quirks")&&(a.parentNode.style.overflow=
this._oldBodyParentOverflow,delete this._oldBodyParentOverflow);h.set(a,"overflow",this._oldOverflow);if(b("webkit")){var f=m.create("div",{style:{height:"2px"}});a.appendChild(f);setTimeout(function(){a.removeChild(f)},0)}delete this._oldOverflow}}})})},"esri/toolbars/edit":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/_base/Color dojo/has dojo/dom-construct dojo/dom-style ../kernel ../lang ../sniff ./_toolbar ./_Box ./_GraphicMover ./_VertexEditor ./TextEditor ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/TextSymbol ../graphic".split(" "),
function(t,k,d,q,b,e,g,m,r,h,n,c,l,a,p,A,z,w,f,B,K){var G=k(l,{declaredClass:"esri.toolbars.Edit",constructor:function(a,c){this._map=a;this._tool=0;if(this._map.loaded)this._scratchGL=a.graphics;else var b=q.connect(this._map,"onLoad",this,function(){q.disconnect(b);b=null;this._scratchGL=this._map.graphics});a=g("esri-mobile");this._defaultOptions=d.mixin({vertexSymbol:new w(w.STYLE_CIRCLE,a?20:12,new f(f.STYLE_SOLID,new e([0,0,0,.5]),1),new e([128,128,128])),ghostVertexSymbol:new w(w.STYLE_CIRCLE,
a?18:10,new f(f.STYLE_SOLID,new e([0,0,0,.5]),1),new e([255,255,255,.75])),ghostLineSymbol:new f(f.STYLE_DOT,new e([128,128,128]),2),allowDeleteVertices:!0,allowAddVertices:!0,rotateHandleOffset:a?24:16,boxLineSymbol:new f(f.STYLE_DASH,new e([64,64,64]),1),boxHandleSymbol:new w(w.STYLE_SQUARE,a?16:9,new f(f.STYLE_SOLID,new e([0,0,0,.5]),1),new e([255,255,255,.75])),textAnchorSymbol:new w(w.STYLE_CIRCLE,10,null,new e([255,0,0]))},c||{})},activate:function(a,c,f){this.deactivate();this._graphic=c;this._options=
d.mixin(d.mixin({},this._defaultOptions),f||{});var b=G.MOVE;f=G.EDIT_VERTICES;var e=G.SCALE,g=G.ROTATE,p=G.EDIT_TEXT,l=!1,w=!1,A=!1,m=this._map,z=m.spatialReference,B=c.geometry.spatialReference;this._geo=!(!z||!B||z.equals(B)||!z.isWebMercator()||4326!==B.wkid);this._isTextPoint=this._prepareTextSymbolEditing(c,a);(a&b)===b&&(l=this._enableMove(c));b=(a&e)===e;g=(a&g)===g;if(b||g)A=this._enableBoxEditing(c,b,g);(a&f)===f&&(w=this._enableVertexEditing(c));(a&p)===p&&this._enableTextEditing(c);if(!(l||
w||A))throw Error("[esri.toolbars.Edit::activate] Unable to activate the tool. Check if the tool is valid for the given geometry type.");if(this._tool=a)this._mapPanEndHandle=q.connect(m,"onPanEnd",this,this._mapPanEndHandler),this._mapExtChgHandle=q.connect(m,"onExtentChange",this,this._mapExtentChangeHandler),this.onActivate(this._tool,c);m.snappingManager&&(l||w)&&m.snappingManager._startSelectionLayerQuery()},deactivate:function(){this._isTextPoint=null;var a=this._tool,c=this._graphic;if(a){var f=
!!this._modified;this._clear();q.disconnect(this._mapPanEndHandle);q.disconnect(this._mapExtChgHandle);this._graphic=this._geo=this._mapPanEndHandle=this._mapExtChgHandle=null;this.onDeactivate(a,c,{isModified:f});this._map.snappingManager&&this._map.snappingManager._stopSelectionLayerQuery()}},refresh:function(){this._refreshMoveables(!0)},getCurrentState:function(){return{tool:this._tool,graphic:this._graphic,isModified:!!this._modified}},onActivate:function(a,c){},onDeactivate:function(a,c,f){},
onGraphicMoveStart:function(a){},onGraphicFirstMove:function(a){this._modified=!0},onGraphicMove:function(a,c){},onGraphicMoveStop:function(a,c){},onGraphicClick:function(a,c){},onVertexMoveStart:function(a,c){},onVertexFirstMove:function(a,c){this._modified=!0},onVertexMove:function(a,c,f){},onVertexMoveStop:function(a,c,f){},onVertexAdd:function(a,c){this._modified=!0},onVertexClick:function(a,c){},onVertexMouseOver:function(a,c){},onVertexMouseOut:function(a,c){},onVertexDelete:function(a,c){this._modified=
!0},onTextEditStart:function(a,c){},onTextEditEnd:function(a){},onScaleStart:function(a){},onScaleFirstMove:function(a){this._modified=!0},onScale:function(a,c){},onScaleStop:function(a,c){},onRotateStart:function(a){},onRotateFirstMove:function(a){this._modified=!0},onRotate:function(a,c){},onRotateStop:function(a,c){},_eventMap:{activate:["tool","graphic"],deactivate:["tool","graphic","info"],"graphic-move-start":["graphic"],"graphic-first-move":["graphic"],"graphic-move":["graphic","transform"],
"graphic-move-stop":["graphic","transform"],"graphic-click":["graphic","info"],"vertex-move-start":["graphic","vertexinfo"],"vertex-first-move":["graphic","vertexinfo"],"vertex-move":["graphic","vertexinfo","transform"],"vertex-move-stop":["graphic","vertexinfo","transform"],"vertex-add":["graphic","vertexinfo"],"vertex-click":["graphic","vertexinfo"],"vertex-mouse-over":["graphic","vertexinfo"],"vertex-mouse-out":["graphic","vertexinfo"],"vertex-delete":["graphic","vertexinfo"],"scale-start":["graphic"],
"scale-first-move":["graphic"],scale:["graphic","info"],"scale-stop":["graphic","info"],"rotate-start":["graphic"],"rotate-first-move":["graphic"],rotate:["graphic","info"],"rotate-stop":["graphic","info"]},_prepareTextSymbolEditing:function(a,c){if("point"===a.geometry.type||"multipoint"===a.geometry.type){var f=a.getLayer(),b=f.renderer,f=a.symbol||f._getSymbol(a);!f&&(b.hasVisualVariables("sizeInfo",!1)||b.hasVisualVariables("colorInfo",!1)||b.hasVisualVariables("opacityInfo",!1))&&b.addBreak&&
b.infos&&1===b.infos.length&&(f=b.infos[0].symbol||b.defaultSymbol);if(f&&"textsymbol"===f.type){if((c&G.SCALE)===G.SCALE||(c&G.ROTATE)===G.ROTATE||(c&G.EDIT_TEXT)===G.EDIT_TEXT){a.setSymbol(new B(f.toJson()));var e=this;this._textSymbolEditor?(this._textSymbolEditor.createForm(a),this._textSymbolEditor.show()):this._options&&this._options.textSymbolEditor?(this._textSymbolEditor=this._options.textSymbolEditor,this._textSymbolEditor.on("symbol-change",function(){e._boxEditor&&e._boxEditor.refresh()})):
t(["../dijit/SymbolEditor"],function(c){if(!e._textSymbolEditor){var f;f=e._options.textSymbolEditorHolder?m.create("div",null,e._options.textSymbolEditorHolder):m.create("div",null,e._map.root);e._textSymbolEditor=new c({graphic:a},f);c=e._textSymbolEditor.domNode.parentNode.id;r.set(e._textSymbolEditor.domNode,{position:"map_root"===c?"absolute":"relative",left:"map_root"===c?e._map.width/2-100+"px":"5px",top:"20px","z-index":50});e._textSymbolEditor.startup();e._textSymbolEditor.createForm(a);
e._textSymbolEditor.show();e._textSymbolEditor.on("symbol-change",function(){e._boxEditor&&e._boxEditor.refresh()})}})}if((c&G.MOVE)===G.MOVE||(c&G.ROTATE)===G.ROTATE||(c&G.SCALE)===G.SCALE)this._textAnchor=new K(a.geometry,this._options.textAnchorSymbol),this._scratchGL.add(this._textAnchor);return!0}}return!1},_enableMove:function(a){var c=this._map;switch(a.geometry.type){case "point":case "polyline":case "polygon":return this._graphicMover=new p(a,c,this,this._textAnchor),!0}return!1},_enableVertexEditing:function(a){var c=
this._map;switch(a.geometry.type){case "multipoint":case "polyline":case "polygon":return this._vertexEditor=A.create(a,c,this),!0}return!1},_enableBoxEditing:function(c,f,b){var e=this._map,g=c.geometry.type;return"polyline"===g||"polygon"===g||this._isTextPoint?(this._boxEditor=new a(c,e,this,f,b,this._options.uniformScaling,this._isTextPoint),!0):!1},_enableTextEditing:function(a){return this._isTextPoint?(this._textEditor=new z(a,this._map,this),q.connect(this._textEditor,"onEditStart",d.hitch(this,
function(){this._textAnchor&&(this._textAnchor.getLayer().remove(this._textAnchor),this._textAnchor=null);this._map.disableKeyboardNavigation();this._disableMove();this._disableBoxEditing()})),!0):!1},_disableMove:function(){var a=this._graphicMover;a&&(a.destroy(),this._graphicMover=null)},_disableVertexEditing:function(){var a=this._vertexEditor;a&&(a.destroy(),this._vertexEditor=null)},_disableBoxEditing:function(){var a=this._boxEditor;a&&(a.destroy(),this._boxEditor=null)},_disableTextEditing:function(){this._textEditor&&
(this._textEditor.destroy(),this._textEditor=null);this._map.enableKeyboardNavigation()},_disableSymbolEditing:function(){this._textSymbolEditor&&this._textSymbolEditor.hide()},_clear:function(){this._disableMove();this._disableVertexEditing();this._disableBoxEditing();this._disableTextEditing();this._disableSymbolEditing();this._textAnchor&&(this._textAnchor.getLayer().remove(this._textAnchor),this._textAnchor=null);this._tool=0;this._modified=!1},_mapPanEndHandler:function(){this._refreshMoveables()},
_mapExtentChangeHandler:function(a,c,f){f&&this._refreshMoveables()},_refreshMoveables:function(a){var c=b.filter([this._graphicMover,this._vertexEditor,this._boxEditor],n.isDefined);b.forEach(c,function(c){c.refresh(a)})},_beginOperation:function(a){b.forEach(this._getAffectedTools(a),function(a){a.suspend()})},_endOperation:function(a){b.forEach(this._getAffectedTools(a),function(a){a.resume()})},_getAffectedTools:function(a){var c=[];switch(a){case "MOVE":c=[this._vertexEditor,this._boxEditor];
break;case "VERTICES":c=[this._boxEditor];break;case "BOX":c=[this._vertexEditor]}return c=b.filter(c,n.isDefined)}});d.mixin(G,{MOVE:1,EDIT_VERTICES:2,SCALE:4,ROTATE:8,EDIT_TEXT:16});g("extend-esri")&&d.setObject("toolbars.Edit",G,h);return G})},"esri/toolbars/_Box":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/has dojo/dom-style dojox/gfx/Moveable dojox/gfx/matrix ../kernel ../lang ../geometry/Point ../geometry/Polyline ../symbols/SimpleMarkerSymbol ../geometry/webMercatorUtils ../geometry/jsonUtils ../graphic".split(" "),
function(t,k,d,q,b,e,g,m,r,h,n,c,l,a,p,A,z){t=t(null,{declaredClass:"esri.toolbars._Box",constructor:function(a,c,b,e,g,p,l){this._graphic=a;this._map=c;this._toolbar=b;this._scale=e;this._rotate=g;this._defaultEventArgs={};this._scaleEvent="Scale";this._rotateEvent="Rotate";this._uniformScaling=p;a=b._options;this._markerSymbol=a.boxHandleSymbol;this._lineSymbol=a.boxLineSymbol;this._moveStartHandler=k.hitch(this,this._moveStartHandler);this._firstMoveHandler=k.hitch(this,this._firstMoveHandler);
this._moveStopHandler=k.hitch(this,this._moveStopHandler);this._moveHandler=k.hitch(this,this._moveHandler);this._isTextPoint=l;this._init()},destroy:function(){this._cleanUp();this._graphic=this._map=this._toolbar=this._markerSymbol=this._lineSymbol=null},refresh:function(){this._draw()},suspend:function(){d.forEach(this._getAllGraphics(),function(a){a.hide()})},resume:function(){d.forEach(this._getAllGraphics(),function(a){a.show()});this._draw()},_init:function(){this._draw()},_cleanUp:function(){this._connects&&
d.forEach(this._connects,q.disconnect);var a=this._toolbar._scratchGL;this._anchors&&d.forEach(this._anchors,function(c){a.remove(c.graphic);(c=c.moveable)&&c.destroy()});this._box&&a.remove(this._box);this._box=this._anchors=this._connects=null},_draw:function(){if(this._graphic.getDojoShape()){var a=this._map,f=this._toolbar._scratchGL,b=this._getBoxCoords(),e=new l(a.spatialReference),g=k.clone(d.filter(b,function(a,c){return 8!==c&&0===c%2}));g[0]&&g.push([g[0][0],g[0][1]]);e.addPath(g);this._rotate&&
e.addPath([b[1],b[8]]);this._box?this._box.setGeometry(e):(this._box=new z(e,this._lineSymbol),f.add(this._box));this._anchors?d.forEach(this._anchors,function(f,e){this._scale||(e=8);var g=new c(b[e],a.spatialReference);f.graphic.setGeometry(g);var g=f.moveable,p=f.graphic.getDojoShape();p&&(g?p!==g.shape&&(g.destroy(),f.moveable=this._getMoveable(f.graphic,e)):f.moveable=this._getMoveable(f.graphic,e))},this):(this._anchors=[],this._connects=[],d.forEach(b,function(b,e){!this._scale&&8>e||(b=new c(b,
a.spatialReference),b=new z(b,this._markerSymbol),this._isTextPoint&&1===e%2&&b.hide(),f.add(b),this._anchors.push({graphic:b,moveable:this._getMoveable(b,e)}))},this))}else this._cleanUp()},_getBoxCoords:function(a){var c=this._map,b,e=[],g,p,l;if(this._isTextPoint){b=this._graphic.getNode().getBoundingClientRect();var w=c.__container.getBoundingClientRect();b=[{x:b.left-w.left,y:b.top-w.top},{x:b.right-w.left,y:b.top-w.top},{x:b.right-w.left,y:b.bottom-w.top},{x:b.left-w.left,y:b.bottom-w.top}]}else b=
this._getTransformedBoundingBox(this._graphic);d.forEach(b,function(f,b,d){g=f;(p=d[b+1])||(p=d[0]);l={x:(g.x+p.x)/2,y:(g.y+p.y)/2};a||(g=c.toMap(g),l=c.toMap(l));e.push([g.x,g.y]);e.push([l.x,l.y])});this._rotate&&(b=k.clone(e[1]),b=a?{x:b[0],y:b[1]}:c.toScreen({x:b[0],y:b[1],spatialReference:c.spatialReference}),b.y-=this._toolbar._options.rotateHandleOffset,a||(b=c.toMap(b)),e.push([b.x,b.y]));return e},_getTransformedBoundingBox:function(a){var f=this._map,b=a.geometry.getExtent(),e=a.geometry.spatialReference;
a=new c(b.xmin,b.ymax,e);b=new c(b.xmax,b.ymin,e);a=f.toScreen(a);b=f.toScreen(b);return[{x:a.x,y:a.y},{x:b.x,y:a.y},{x:b.x,y:b.y},{x:a.x,y:b.y}]},_getAllGraphics:function(){var a=[this._box];this._anchors&&d.forEach(this._anchors,function(c){a.push(c.graphic)});return a=d.filter(a,n.isDefined)},_getMoveable:function(a,c){var f=a.getDojoShape();if(f)return a=new m(f),a._index=c,this._connects.push(q.connect(a,"onMoveStart",this._moveStartHandler)),this._connects.push(q.connect(a,"onFirstMove",this._firstMoveHandler)),
this._connects.push(q.connect(a,"onMoveStop",this._moveStopHandler)),a.onMove=this._moveHandler,(f=f.getEventSource())&&g.set(f,"cursor",this._toolbar._cursors["box"+c]),a},_moveStartHandler:function(a){this._toolbar["on"+(8===a.host._index?this._rotateEvent:this._scaleEvent)+"Start"](this._graphic)},_firstMoveHandler:function(a){this._toolbar._deactivateScrollWheel();var c=a.host._index,b=this._wrapOffset=a.host.shape._wrapOffsets[0]||0,e=this._graphic.getLayer().getNavigationTransform(),g;a=d.map(this._getBoxCoords(!0),
function(a){return{x:a[0]+b,y:a[1]}});g=this._isTextPoint?this._map.toScreen(this._graphic.geometry):{x:a[1].x,y:a[3].y};this._centerCoord=r.multiplyPoint(r.invert(e),g);if(8===c)g=r.multiplyPoint(r.invert(e),a[1]),this._isTextPoint&&(this._centerCoord=this._deNormalizePoint(this._centerCoord,g)),this._startLine=[this._centerCoord,g],this._moveLine=k.clone(this._startLine);else if(g=r.multiplyPoint(r.invert(e),a[c]),e=r.multiplyPoint(r.invert(e),a[(c+4)%8]),this._isTextPoint&&(this._centerCoord=this._deNormalizePoint(this._centerCoord,
g)),this._firstMoverToAnchor=Math.sqrt((g.x-this._centerCoord.x)*(g.x-this._centerCoord.x)+(g.y-this._centerCoord.y)*(g.y-this._centerCoord.y)),this._startBox=e,this._startBox.width=a[4].x-a[0].x,this._startBox.height=a[4].y-a[0].y,this._moveBox=k.clone(this._startBox),this._xfactor=g.x>e.x?1:-1,this._yfactor=g.y>e.y?1:-1,1===c||5===c)this._xfactor=0;else if(3===c||7===c)this._yfactor=0;this._toolbar._beginOperation("BOX");this._toolbar["on"+(8===c?this._rotateEvent:this._scaleEvent)+"FirstMove"](this._graphic)},
_moveHandler:function(a,c){a=a.host._index;var b=this._defaultEventArgs,f,e,g;b.angle=0;b.scaleX=1;b.scaleY=1;if(8===a)f=this._startLine,e=this._moveLine,g=e[1],g.x+=c.dx,g.y+=c.dy,c=this._getAngle(f,e),this._isTextPoint&&(c+=this._graphic.symbol.angle),e=r.rotategAt(c,f[0]),this._graphic.getDojoShape().setTransform(e),b.transform=e,b.angle=c,b.around=f[0];else{f=this._startBox;e=this._moveBox;e.width+=c.dx*this._xfactor;e.height+=c.dy*this._yfactor;this._uniformScaling||this._isTextPoint?(f=e.x+
this._xfactor*e.width,e=e.y+this._yfactor*e.height,f=Math.sqrt((f-this._centerCoord.x)*(f-this._centerCoord.x)+(e-this._centerCoord.y)*(e-this._centerCoord.y)),this._scaleRatio=c=g=f/this._firstMoverToAnchor,f=this._centerCoord):(c=e.width/f.width,g=e.height/f.height,f={x:f.x,y:f.y});if(isNaN(c)||Infinity===c||-Infinity===c)c=1;if(isNaN(g)||Infinity===g||-Infinity===g)g=1;e=r.scaleAt(c,g,f);if(this._isTextPoint){var p=r.rotategAt(this._graphic.symbol.angle,f);this._graphic.getDojoShape().setTransform([p,
e])}else this._graphic.getDojoShape().setTransform(e);b.transform=e;b.scaleX=c;b.scaleY=g;b.around=f}this._toolbar["on"+(8===a?this._rotateEvent:this._scaleEvent)](this._graphic,b)},_moveStopHandler:function(a){this._toolbar._activateScrollWheel();var c=this._graphic,b=this._toolbar,e=b._geo?p.geographicToWebMercator(c.geometry):c.geometry,g=e.spatialReference,l=c.getDojoShape(),d=l.getTransform(),m=c.getLayer().getNavigationTransform();this._isTextPoint?(c=this._graphic.symbol,8===a.host._index?
c.angle+=this._getAngle(this._startLine,this._moveLine):c.font.setSize(Math.round(c.font.size*this._scaleRatio*100)/100),this._graphic.setSymbol(c)):(e=e.toJson(),this._updateSegments(e.paths||e.rings,d,m,g),l.setTransform(null),e=A.fromJson(e),c.setGeometry(b._geo?p.webMercatorToGeographic(e,!0):e));this._draw();this._startLine=this._moveLine=this._startBox=this._moveBox=this._xfactor=this._yfactor=null;b._endOperation("BOX");this._defaultEventArgs.transform=d;b["on"+(8===a.host._index?this._rotateEvent:
this._scaleEvent)+"Stop"](this._graphic,this._defaultEventArgs)},_updateSegments:function(a,c,b,e){var f=this._map,g=this._wrapOffset||0;d.forEach(a,function(a){d.forEach(a,function(a){this._updatePoint(a,e,g,r,f,b,c)},this)},this)},_updatePoint:function(a,c,b,e,g,p,l){c=g.toScreen({x:a[0],y:a[1],spatialReference:c},!0);c.x+=b;c=e.multiplyPoint([p,l,e.invert(p)],c);c.x-=b;b=g.toMap(c);a[0]=b.x;a[1]=b.y},_getAngle:function(a,c){return 180*Math.atan2(c[0].y-c[1].y,c[0].x-c[1].x)/Math.PI-180*Math.atan2(a[0].y-
a[1].y,a[0].x-a[1].x)/Math.PI},_deNormalizePoint:function(a,c){var b=this._map._getFrameWidth();if(-1===b)return a;for(a={x:a.x,y:a.y};Math.abs(a.x-c.x)>=b;)a.x=a.x<c.x?a.x+b:a.x-b;var f=Math.abs(a.x-c.x);Math.abs(a.x-c.x+b)<f?a.x+=b:Math.abs(a.x-c.x-b)<f&&(a.x-=b);return a}});e("extend-esri")&&k.setObject("toolbars._Box",t,h);return t})},"dojox/gfx/Moveable":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/_base/event dojo/topic dojo/touch dojo/dom-class dojo/_base/window ./Mover dojo/mouse".split(" "),
function(t,k,d,q,b,e,g,m,r,h){return k("dojox.gfx.Moveable",null,{constructor:function(b,c){this.shape=b;this.delay=c&&0<c.delay?c.delay:0;this.mover=c&&c.mover?c.mover:r;this.leftButtonOnly=c&&c.leftButtonOnly;this.events=[this.shape.on(e.press,t.hitch(this,"onMouseDown"))]},destroy:function(){d.forEach(this.events,function(b){b.remove()});this.events=this.shape=null},onMouseDown:function(b){this.delay?(this.events.push(this.shape.on(e.move,t.hitch(this,"onMouseMove")),this.shape.on(e.release,t.hitch(this,
"onMouseUp"))),this._lastX=b.clientX,this._lastY=b.clientY):this.leftButtonOnly&&!h.isLeft(b)||new this.mover(this.shape,b,this);q.stop(b)},onMouseMove:function(b){var c=b.clientY;if(Math.abs(b.clientX-this._lastX)>this.delay||Math.abs(c-this._lastY)>this.delay)this.onMouseUp(b),new this.mover(this.shape,b,this);q.stop(b)},onMouseUp:function(b){this.events.pop().remove()},onMoveStart:function(e){b.publish("/gfx/move/start",e);g.add(m.body(),"dojoMove")},onMoveStop:function(e){b.publish("/gfx/move/stop",
e);g.remove(m.body(),"dojoMove")},onFirstMove:function(b){},onMove:function(b,c,e){this.onMoving(b,c,e);this.shape.applyLeftTransform(c);this.onMoved(b,c)},onMoving:function(b,c){},onMoved:function(b,c){}})})},"dojox/gfx/Mover":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/on dojo/touch dojo/_base/event".split(" "),function(t,k,d,q,b,e){return d("dojox.gfx.Mover",null,{constructor:function(g,d,k){this.shape=g;this.lastX=d.clientX;this.lastY=d.clientY;g=this.host=k;d=
document;k=q(d,b.move,t.hitch(this,"onFirstMove"));this.events=[q(d,b.move,t.hitch(this,"onMouseMove")),q(d,b.release,t.hitch(this,"destroy")),q(d,"dragstart",t.hitch(e,"stop")),q(d,"selectstart",t.hitch(e,"stop")),k];if(g&&g.onMoveStart)g.onMoveStart(this)},onMouseMove:function(b){var g=b.clientX,d=b.clientY;this.host.onMove(this,{dx:g-this.lastX,dy:d-this.lastY},b);this.lastX=g;this.lastY=d;e.stop(b)},onFirstMove:function(){this.host.onFirstMove(this);this.events.pop().remove()},destroy:function(){k.forEach(this.events,
function(b){b.remove()});var b=this.host;if(b&&b.onMoveStop)b.onMoveStop(this);this.events=this.shape=null}})})},"esri/toolbars/_GraphicMover":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/json dojo/dom-style dojox/gfx/Moveable dojox/gfx/Mover dojox/gfx/matrix ../kernel ../PointerEvents ../sniff ../geometry/webMercatorUtils ../geometry/ScreenPoint ../geometry/Point".split(" "),function(t,k,d,q,b,e,g,m,r,h,n,c,l,a){var p=t(null,{declaredClass:"esri.toolbars._GraphicMover",
constructor:function(a,c,b,f){this.graphic=a;this.map=c;this.toolbar=b;this.tempPt=f;this._enableGraphicMover();this._moved=!1},refresh:function(a){var c=this.graphic.getDojoShape();!c||!a&&c._hostGraphic||(this._disableGraphicMover(),this._enableGraphicMover())},destroy:function(){this._disableGraphicMover()},hasMoved:function(){return this._moved},_enableGraphicMover:function(){var a=this.graphic,c=a.getDojoShape();c&&(c._hostGraphic=a,this._moveable=new e(c,{mover:p.Mover}),this._moveStartHandle=
d.connect(this._moveable,"onMoveStart",this,this._moveStartHandler),this._firstMoveHandle=d.connect(this._moveable,"onFirstMove",this,this._firstMoveHandler),this._movingHandle=d.connect(this._moveable,"onMoving",this,this._movingHandler),this._moveStopHandle=d.connect(this._moveable,"onMoveStop",this,this._moveStopHandler),(a=c.getEventSource())&&b.set(a,"cursor",this.toolbar._cursors.move))},_disableGraphicMover:function(){var a=this._moveable;if(a){d.disconnect(this._moveStartHandle);d.disconnect(this._firstMoveHandle);
d.disconnect(this._movingHandle);d.disconnect(this._moveStopHandle);var c=a.shape;c&&(c._hostGraphic=null,(c=c.getEventSource())&&b.set(c,"cursor","inherit"));a.destroy()}this._moveable=null},_moveStartHandler:function(){var a=this.graphic,c=this.map;this._startTx=a.getDojoShape().getTransform();"point"===this.graphic.geometry.type&&c.snappingManager&&c.snappingManager._setUpSnapping();this.toolbar.onGraphicMoveStart(a)},_firstMoveHandler:function(){this.toolbar._beginOperation("MOVE");this.toolbar.onGraphicFirstMove(this.graphic)},
_movingHandler:function(a,c,b){a=a.shape.getTransform();c=this.map;var f;n("esri-pointer")?f=c.navigationManager.pointerEvents._processTouchEvent(b,b):b&&"pointermove"===b.type&&(f=h.prototype._processTouchEvent.call({map:c},b,b));f&&c.snappingManager&&c.snappingManager._onSnappingMouseMoveHandler(f);this.tempPt&&this.tempPt.getDojoShape().setTransform(a);this.toolbar.onGraphicMove(this.graphic,a)},_moveStopHandler:function(b){var e=this.graphic,g=this.toolbar,f=this.map,p=g._geo?c.geographicToWebMercator(e.geometry):
e.geometry,d=p.type,A=e.getDojoShape(),h=A.getTransform();if(q.toJson(h)!==q.toJson(this._startTx)){this._moved=!0;switch(d){case "point":var d=[h,m.invert(this._startTx)],n;f.snappingManager&&(n=f.snappingManager._snappingPoint);p=n||f.toMap(m.multiplyPoint(d,f.toScreen(p,!0)));f.snappingManager&&f.snappingManager._killOffSnapping();break;case "polyline":p=this._updatePolyGeometry(p,p.paths,h);break;case "polygon":p=this._updatePolyGeometry(p,p.rings,h)}A.setTransform(null);e.setGeometry(g._geo?
c.webMercatorToGeographic(p,!0):p);this.tempPt&&this.tempPt.setGeometry(new a(e.geometry.toJson()))}else this._moved=!1;g._endOperation("MOVE");g.onGraphicMoveStop(e,h);this._moved||(b=b.__e,f=this.map.position,b=new l(b.pageX-f.x,b.pageY-f.y),g.onGraphicClick(e,{screenPoint:b,mapPoint:this.map.toMap(b)}))},_updatePolyGeometry:function(a,c,b){var f=this.map,e=a.getPoint(0,0),f=f.toMap(f.toScreen(e).offset(b.dx,b.dy));b=f.x-e.x;for(var e=f.y-e.y,g,p,d,f=0;f<c.length;f++)for(p=c[f],g=0;g<p.length;g++)d=
a.getPoint(f,g),a.setPoint(f,g,d.offset(b,e));return a}});p.Mover=t(g,{declaredClass:"esri.toolbars._Mover",constructor:function(a,c,b){this.__e=c}});n("extend-esri")&&(k.setObject("toolbars._GraphicMover",p,r),k.setObject("toolbars._Mover",p.Mover,r));return p})},"esri/toolbars/_VertexEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/has dijit/Menu dijit/MenuItem ../kernel ./_VertexMover ../geometry/Point ../geometry/jsonUtils dojo/i18n!../nls/jsapi".split(" "),
function(t,k,d,q,b,e,g,m,r,h,n,c){var l=t(null,{declaredClass:"esri.toolbars._GraphicVertexEditor",constructor:function(a,c,b){this.graphic=a;this.map=c;this.toolbar=b;a=b._options;this._symbol1=a.vertexSymbol;this._symbol2=a.ghostVertexSymbol;c=a.ghostLineSymbol;this._lineStroke={style:c.style,width:c.width,color:c.color};this._canDel=a.allowDeleteVertices;this._canAdd=a.allowAddVertices;this._addControllers()},destroy:function(){this._removeControllers()},refresh:function(a){a?(this._removeControllers(),
this._addControllers()):(this._refresh(this._vertexMovers),this._refresh(this._mpVertexMovers))},suspend:function(){this._suspended||this._removeControllers();this._suspended=!0},resume:function(){this._suspended&&this._addControllers();this._suspended=!1},_addControllers:function(){this._firstMoveHandle=d.connect(r,"onFirstMove",this,this._firstMoveHandler);this._moveStopHandle=d.connect(r,"onMoveStop",this,this._moveStopHandler);this._vertexMovers=this._add(this._getSegments(this.graphic.geometry),
this._symbol1);this._canAdd&&(this._mpVertexMovers=this._add(this._getMidpointSegments(this.graphic.geometry),this._symbol2,!0));var a=this._getGraphicsLayer();this._mouseOverHandle=d.connect(a,"onMouseOver",this,this._mouseOverHandler);this._mouseOutHandle=d.connect(a,"onMouseOut",this,this._mouseOutHandler);this._canDel&&(this._ctxMenu=new e({style:"font-size: 12px; margin-left: 5px; margin-top: 5px;"}),a=this._ctxDelete=new g({label:c.toolbars.edit.deleteLabel,iconClass:"vertexDeleteIcon",style:"outline: none;"}),
this._deleteHandle=d.connect(a,"onClick",this,this._deleteHandler),this._ctxMenu.addChild(a),this._ctxMenu.startup())},_removeControllers:function(){d.disconnect(this._firstMoveHandle);d.disconnect(this._moveStopHandle);d.disconnect(this._mouseOverHandle);d.disconnect(this._mouseOutHandle);d.disconnect(this._deleteHandle);this._ctxMenu&&(this._ctxDelete=null,this._unbindCtxNode(),this._ctxMenu.destroyRecursive());this._remove(this._vertexMovers);this._remove(this._mpVertexMovers);this._vertexMovers=
this._mpVertexMovers=null},_add:function(a,c,b){var e,g,f=this.graphic,p=[];for(e=0;e<a.length;e++){var d=a[e],l=[];for(g=0;g<d.length;g++)l.push(new r(d[g],c,f,e,g,d.length,this,b));p.push(l)}return p},_remove:function(a){a&&q.forEach(a,function(a){q.forEach(a,function(a){a.destroy()})})},_refresh:function(a){a&&q.forEach(a,function(a){q.forEach(a,function(a){a.refresh()})})},_isNew:function(a){return-1===q.indexOf(this._vertexMovers[a.segIndex],a)?!0:!1},_getGraphicsLayer:function(){return this.toolbar._scratchGL},
_deleteHandler:function(a){a=this._selectedMover;this._updateRelatedGraphic(a,a.relatedGraphic,a.graphic.geometry,a.segIndex,a.ptIndex,a.segLength,!1,!0);this._canAdd&&this._deleteMidpoints(a);this._deleteVertex(a);this.toolbar._endOperation("VERTICES")},_mouseOverHandler:function(a){a=a.graphic;var c=this._findMover(a);c&&(this.toolbar.onVertexMouseOver(this.graphic,c._getInfo()),c._placeholder||(this._selectedMover=c,this._canDel&&this._bindCtxNode(a.getDojoShape().getNode())))},_mouseOutHandler:function(a){if(a=
this._findMover(a.graphic))this.toolbar.onVertexMouseOut(this.graphic,a._getInfo())},_bindCtxNode:function(a){this._unbindCtxNode();this._ctxDelete.set("disabled",this._selectedMover.segLength<=this.minLength?!0:!1);this._ctxMenu.bindDomNode(a);this._bindNode=a},_unbindCtxNode:function(){var a=this._bindNode;a&&this._ctxMenu.unBindDomNode(a)},_findMover:function(a){var c,b=[];c=this._mpVertexMovers;q.forEach(this._vertexMovers,function(a){b=b.concat(a)});c&&q.forEach(c,function(a){b=b.concat(a)});
for(c=0;c<b.length;c++){var e=b[c];if(e.graphic===a)return e}},_firstMoveHandler:function(a){!this._isNew(a)&&this._canAdd&&this._hideRelatedMidpoints(a);this.toolbar._beginOperation("VERTICES")},_moveStopHandler:function(a,c){var b=this._isNew(a);c&&(c.dx||c.dy)?(this._updateRelatedGraphic(a,a.relatedGraphic,a.graphic.geometry,a.segIndex,a.ptIndex,a.segLength,b),this._canAdd&&(b?this._addMidpoints(a):(this._repositionRelatedMidpoints(a),this._showRelatedMidpoints(a))),this.toolbar._endOperation("VERTICES")):
!b&&this._canAdd&&this._showRelatedMidpoints(a)},_showRelatedMidpoints:function(a){var c=this._getAdjacentMidpoints(a.ptIndex,a.segLength),b=this._mpVertexMovers[a.segIndex];for(a=0;a<c.length;a++){var e=b[c[a]];e.graphic.show();e.refresh()}},_hideRelatedMidpoints:function(a){var c=this._getAdjacentMidpoints(a.ptIndex,a.segLength),b=this._mpVertexMovers[a.segIndex];for(a=0;a<c.length;a++)b[c[a]].graphic.hide()},_repositionRelatedMidpoints:function(a){var c,b=this._getAdjacentMidpoints(a.ptIndex,a.segLength),
e=this._mpVertexMovers[a.segIndex];for(c=0;c<b.length;c++){var g=this._getAdjacentVertices(b[c],a.segLength),f=a.relatedGraphic.geometry.getPoint(a.segIndex,g[0]),g=a.relatedGraphic.geometry.getPoint(a.segIndex,g[1]),f=new h({x:(f.x+g.x)/2,y:(f.y+g.y)/2,spatialReference:f.spatialReference.toJson()});e[b[c]].graphic.setGeometry(f)}},_addMidpoints:function(a){var c=a.segIndex,b=a.ptIndex,e=a.segLength,g=b+1,f,d=e+1;this._mpVertexMovers[c].splice(b,1);var l=this._vertexMovers[c];for(f=0;f<g;f++)l[f].segLength+=
1;for(f=g;f<l.length;f++)l[f].ptIndex+=1,l[f].segLength+=1;a.ptIndex=g;a.segLength=l.length+1;l.splice(g,0,a);a.graphic.setSymbol(this._symbol1);l=this._mpVertexMovers[c];for(f=0;f<b;f++)l[f].segLength+=1;for(f=b;f<e-1;f++)l[f].ptIndex+=1,l[f].segLength+=1;g=this._getAdjacentVertices(b,d);c=this._getAdjacentVertices(b+1,d);e=a.relatedGraphic.geometry.getPoint(a.segIndex,g[0]);f=a.relatedGraphic.geometry.getPoint(a.segIndex,g[1]);g=new h({x:(e.x+f.x)/2,y:(e.y+f.y)/2,spatialReference:e.spatialReference.toJson()});
e=a.relatedGraphic.geometry.getPoint(a.segIndex,c[0]);f=a.relatedGraphic.geometry.getPoint(a.segIndex,c[1]);c=new h({x:(e.x+f.x)/2,y:(e.y+f.y)/2,spatialReference:e.spatialReference.toJson()});e=new r(g,this._symbol2,this.graphic,a.segIndex,b,d,this,!0);a=new r(c,this._symbol2,this.graphic,a.segIndex,b+1,d,this,!0);l.splice(b,0,e,a)},_deleteVertex:function(a){var c,b=a.ptIndex,e=this._vertexMovers[a.segIndex];for(c=0;c<b;c++)--e[c].segLength;for(c=b+1;c<e.length;c++){var g=e[c];--g.ptIndex;--g.segLength}e.splice(b,
1);c=a._getInfo();a.destroy();this.toolbar.onVertexDelete(this.graphic,c)}});k.mixin(l,{create:function(a,c,b){switch(a.geometry.type){case "multipoint":return new l.MultipointVertexEditor(a,c,b);case "polyline":return new l.PolylineVertexEditor(a,c,b);case "polygon":return new l.PolygonVertexEditor(a,c,b)}}});l.MultipointVertexEditor=t(l,{declaredClass:"esri.toolbars._MultipointVertexEditor",minLength:1,constructor:function(){this._moveStartHandle=d.connect(r,"onMoveStart",this,this._moveStartHandler);
d.disconnect(this._firstMoveHandle)},destroy:function(){this.inherited(arguments);d.disconnect(this._moveStartHandle)},_getSegments:function(a){var c=a.points,b=[],e=a.spatialReference;for(a=0;a<c.length;a++){var g=c[a];b.push(new h({x:g[0],y:g[1],spatialReference:e.toJson()}))}return[b]},_getMidpointSegments:function(a){return[]},_getControlPoints:function(a,c,b,e,g){return[]},_getGraphicsLayer:function(){return this.graphic._graphicsLayer},_mouseOverHandler:function(a){var c=a.graphic;if(a=this._findMover(a))this.toolbar.onVertexMouseOver(c,
a._getInfo()),this._selectedMover=a,this._canDel&&this._bindCtxNode(a.graphic.getDojoShape().getNode())},_mouseOutHandler:function(a){var c=a.graphic;if(a=this._findMover(a))this.toolbar.onVertexMouseOut(c,a._getInfo())},_findMover:function(a){var c=[].concat(this._vertexMovers[0]),b=a.target;for(a=0;a<c.length;a++){var e=c[a];if(e.graphic.getDojoShape().getNode()===b)return e}},_moveStartHandler:function(a){var c=a.ptIndex,b=a.segLength-1,e=a.relatedGraphic.geometry.points;a=e.splice(c,1);e.push(a[0]);
e=this._vertexMovers[0];for(a=b;a>c;a--)--e[a].ptIndex;a=e.splice(c,1);e.push(a[0]);a[0].ptIndex=b},_moveStopHandler:function(a){this._updateRelatedGraphic(a,a.relatedGraphic,a.graphic.geometry,a.segIndex,a.ptIndex,a.segLength);this.toolbar._endOperation("VERTICES")},_updateRelatedGraphic:function(a,c,b,e,g,f,l,d){a=c.geometry;d?a.removePoint(g):a.setPoint(g,b);c.setGeometry(a)},_deleteMidpoints:function(a){}});l.PolylineVertexEditor=t(l,{declaredClass:"esri.toolbars._PolylineVertexEditor",minLength:2,
_getSegments:function(a){var c,b,e=a.paths,g=[];for(c=0;c<e.length;c++){var f=e[c],l=[];for(b=0;b<f.length;b++)l.push(a.getPoint(c,b));g.push(l)}return g},_getMidpointSegments:function(a){var c,b,e=a.paths,g=[],f=a.spatialReference;for(c=0;c<e.length;c++){var l=e[c],d=[];for(b=0;b<l.length-1;b++){var m=a.getPoint(c,b),n=a.getPoint(c,b+1),m=new h({x:(m.x+n.x)/2,y:(m.y+n.y)/2,spatialReference:f.toJson()});d.push(m)}g.push(d)}return g},_getControlPoints:function(a,c,b,e,g){var f=this.map,l,d;this._isNew(a)?
(a=e,e+=1,0<=a&&(l=f.toScreen(c.getPoint(b,a))),e<=g&&(d=f.toScreen(c.getPoint(b,e)))):(a=e-1,e+=1,0<=a&&(l=f.toScreen(c.getPoint(b,a))),e<g&&(d=f.toScreen(c.getPoint(b,e))));return[l,d]},_getAdjacentMidpoints:function(a,c){var b=[],e=a-1;0<=e&&b.push(e);a<c-1&&b.push(a);return b},_getAdjacentVertices:function(a,c){return[a,a+1]},_deleteMidpoints:function(a){var c=this._mpVertexMovers[a.segIndex],b=c.length-1,e=this._getAdjacentMidpoints(a.ptIndex,a.segLength).sort(),g,f=e[0];for(g=0;g<f;g++)--c[g].segLength;
for(g=f+1;g<c.length;g++){var l=c[g];--l.ptIndex;--l.segLength}if(1===e.length)c.splice(f,1)[0].destroy();else for(l=this._getAdjacentVertices(f,b),g=a.relatedGraphic.geometry.getPoint(a.segIndex,l[0]),l=a.relatedGraphic.geometry.getPoint(a.segIndex,l[1]),g=new h({x:(g.x+l.x)/2,y:(g.y+l.y)/2,spatialReference:g.spatialReference.toJson()}),a=new r(g,this._symbol2,this.graphic,a.segIndex,f,b,this,!0),c=c.splice(f,e.length,a),g=0;g<c.length;g++)c[g].destroy()},_updateRelatedGraphic:function(a,c,b,e,g,
f,l,d){a=c.geometry;l?a.insertPoint(e,g+1,n.fromJson(b.toJson())):d?a.removePoint(e,g):a.setPoint(e,g,n.fromJson(b.toJson()));c.setGeometry(a)}});l.PolygonVertexEditor=t(l,{declaredClass:"esri.toolbars._PolygonVertexEditor",minLength:3,_getSegments:function(a){var c,b,e=a.rings,g=[];for(c=0;c<e.length;c++){var f=e[c],l=[];for(b=0;b<f.length-1;b++)l.push(a.getPoint(c,b));g.push(l)}return g},_getMidpointSegments:function(a){var c,b,e=a.rings,g=[],f=a.spatialReference;for(c=0;c<e.length;c++){var l=e[c],
d=[];for(b=0;b<l.length-1;b++){var m=a.getPoint(c,b),n=a.getPoint(c,b+1),m=new h({x:(m.x+n.x)/2,y:(m.y+n.y)/2,spatialReference:f.toJson()});d.push(m)}g.push(d)}return g},_getControlPoints:function(a,c,b,e,g){var f=this.map;this._isNew(a)?a=e:(a=e-1,a=0>a?(g+a)%g:a);e=(e+1)%g;g=f.toScreen(c.getPoint(b,a));c=f.toScreen(c.getPoint(b,e));return[g,c]},_getAdjacentMidpoints:function(a,c){var b=a-1;return[0>b?(c+b)%c:b,a]},_getAdjacentVertices:function(a,c){return[a,(a+1)%c]},_deleteMidpoints:function(a){var c=
a.ptIndex,b=this._mpVertexMovers[a.segIndex],e=b.length-1,g=this._getAdjacentMidpoints(c,a.segLength).sort(),f,l;l=g[0];var d=g[g.length-1];if(0===c)for(f=this._getAdjacentVertices(e-1,e),c=a.relatedGraphic.geometry.getPoint(a.segIndex,f[0]),f=a.relatedGraphic.geometry.getPoint(a.segIndex,f[1]),c=new h({x:(c.x+f.x)/2,y:(c.y+f.y)/2,spatialReference:c.spatialReference.toJson()}),a=new r(c,this._symbol2,this.graphic,a.segIndex,e-1,e,this,!0),b.splice(d,1,a)[0].destroy(),b.splice(l,1)[0].destroy(),g=
0;g<b.length-1;g++)l=b[g],--l.ptIndex,--l.segLength;else{f=this._getAdjacentVertices(l,e);c=a.relatedGraphic.geometry.getPoint(a.segIndex,f[0]);f=a.relatedGraphic.geometry.getPoint(a.segIndex,f[1]);c=new h({x:(c.x+f.x)/2,y:(c.y+f.y)/2,spatialReference:c.spatialReference.toJson()});a=new r(c,this._symbol2,this.graphic,a.segIndex,l,e,this,!0);d=b.splice(l,g.length,a);for(g=0;g<d.length;g++)d[g].destroy();for(g=0;g<l;g++)--b[g].segLength;for(g=l+1;g<b.length;g++)l=b[g],--l.ptIndex,--l.segLength}},_updateRelatedGraphic:function(a,
c,b,e,g,f,l,d){a=c.geometry;l?a.insertPoint(e,g+1,n.fromJson(b.toJson())):d?(a.removePoint(e,g),0===g&&a.setPoint(e,f-1,n.fromJson(a.getPoint(e,0).toJson()))):(a.setPoint(e,g,n.fromJson(b.toJson())),0===g&&a.setPoint(e,f,n.fromJson(b.toJson())));c.setGeometry(a)}});b("extend-esri")&&(k.setObject("toolbars._GraphicVertexEditor",l,m),k.setObject("toolbars._MultipointVertexEditor",l.MultipointVertexEditor,m),k.setObject("toolbars._PolylineVertexEditor",l.PolylineVertexEditor,m),k.setObject("toolbars._PolygonVertexEditor",
l.PolygonVertexEditor,m));return l})},"esri/toolbars/_VertexMover":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/sniff dojo/dom-style dojox/gfx/Moveable dojox/gfx/matrix ../kernel ../PointerEvents ../sniff ../geometry/Point ../graphic ../geometry/webMercatorUtils".split(" "),function(t,k,d,q,b,e,g,m,r,h,n,c,l){t=t(null,{declaredClass:"esri.toolbars.VertexMover",constructor:function(a,c,b,e,g,f,l,d){this.point=a;this.symbol=c;this.relatedGraphic=b;this.segIndex=e;this.ptIndex=
g;this.segLength=f;this.editor=l;this.map=l.map;this._scratchGL=l.toolbar._scratchGL;this._placeholder=d||!1;this._type=b.geometry.type;this._init();this._enable()},refresh:function(a){if(a||this._needRefresh())this._disable(),this._enable()},destroy:function(){this._disable();this.graphic&&this._scratchGL.remove(this.graphic);this.point=this.symbol=this.graphic=this.relatedGraphic=this.segIndex=this.ptIndex=this.segLength=this.editor=this.map=this._scratchGL=null},_init:function(){var a=new n(this.point.toJson()),
a=new c(a,this.symbol);switch(this._type){case "multipoint":a._shape=this.relatedGraphic.getDojoShape().children[this.ptIndex];break;case "polyline":case "polygon":this._scratchGL.add(a)}this.graphic=a},_enable:function(){var a=this.graphic.getDojoShape();a&&(a._hasMover=!0,this._moveable=this._getMoveable(a),(a=a.getEventSource())&&b.set(a,"cursor",this.editor.toolbar._cursors[this._placeholder?"move-gv":"move-v"]))},_disable:function(){var a=this._moveable;if(a){d.disconnect(this._startHandle);
d.disconnect(this._firstHandle);d.disconnect(this._movingHandle);d.disconnect(this._stopHandle);var c=a.shape;c&&(c=c.getEventSource())&&b.set(c,"cursor","inherit");a.destroy();this._moveable=null}},_needRefresh:function(){var a=this.graphic.getDojoShape(),c=!1;if(a)switch(this._type){case "multipoint":var b=this.relatedGraphic.getDojoShape();b&&(b=b.children[this.ptIndex],a!==b&&(this.graphic._shape=b,c=!0));break;case "polyline":case "polygon":c=!a._hasMover}return c},_getMoveable:function(a){a=
new e(a,q("mac")&&q("ff")&&!h("esri-touch")&&{leftButtonOnly:!0});this._startHandle=d.connect(a,"onMoveStart",this,this._moveStartHandler);this._firstHandle=d.connect(a,"onFirstMove",this,this._firstMoveHandler);this._movingHandle=d.connect(a,"onMoving",this,this._movingHandler);this._stopHandle=d.connect(a,"onMoveStop",this,this._moveStopHandler);return a},_getPtIndex:function(){return this.ptIndex+(this._placeholder?1:0)},_getInfo:function(){return{graphic:this.graphic,isGhost:this._placeholder,
segmentIndex:this.segIndex,pointIndex:this._getPtIndex()}},_moveStartHandler:function(a){var c=this.map;c.snappingManager&&c.snappingManager._setUpSnapping();this.editor.toolbar._deactivateScrollWheel();this._startTx=this.graphic.getDojoShape().getTransform();a.shape.moveToFront();this.constructor.onMoveStart(this);this.editor.toolbar.onVertexMoveStart(this.relatedGraphic,this._getInfo())},_firstMoveHandler:function(a){var c=a.shape,b=this._getControlEdges(),e=this._scratchGL._div,g,f=[],l=a.host.shape._wrapOffsets[0]||
0;for(g=0;g<b.length;g++){var d=b[g];d.x1+=l;d.x2+=l;f.push([e.createLine({x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2}).setStroke(this.editor._lineStroke),d.x1,d.y1,d.x2,d.y2])}c._lines=f;a.shape.moveToFront();this.constructor.onFirstMove(this);this.editor.toolbar.onVertexFirstMove(this.relatedGraphic,this._getInfo())},_movingHandler:function(a,c,b){c=this.map;var e;h("esri-pointer")?e=c.navigationManager.pointerEvents._processTouchEvent(b,b):b&&"pointermove"===b.type&&(e=r.prototype._processTouchEvent.call({map:c},
b,b));e&&c.snappingManager&&c.snappingManager._onSnappingMouseMoveHandler(e);b=a.shape;a=b.getTransform();b=b._lines;for(e=0;e<b.length;e++)c=b[e],c[0].setShape({x1:c[1]+a.dx,y1:c[2]+a.dy,x2:c[3],y2:c[4]});this.editor.toolbar.onVertexMove(this.relatedGraphic,this._getInfo(),a)},_moveStopHandler:function(a){a=a.shape;var c=this.editor.toolbar,b=a.getTransform(),e=this.map,d=this.graphic,f=c._geo?l.geographicToWebMercator(d.geometry):d.geometry;c._activateScrollWheel();var m,n=a._lines;if(n){for(m=
0;m<n.length;m++)n[m][0].removeShape();a._lines=null}m=!1;var n=!0,h=this._getInfo();b&&(b.dx||b.dy)?this._placeholder&&(this._placeholder=!1,m=!0):n=!1;var k;e.snappingManager&&(k=e.snappingManager._snappingPoint);var r=[b,g.invert(this._startTx)];k=k||e.toMap(g.multiplyPoint(r,e.toScreen(f,!0)));e.snappingManager&&e.snappingManager._killOffSnapping();a.setTransform(null);d.setGeometry(c._geo?l.webMercatorToGeographic(k,!0):k);this.constructor.onMoveStop(this,b);c.onVertexMoveStop(this.relatedGraphic,
h,b);if(!n)c.onVertexClick(this.relatedGraphic,h);if(m)c.onVertexAdd(this.relatedGraphic,this._getInfo())},_getControlEdges:function(){var a=this.map,c=this.relatedGraphic.geometry,b=this.segIndex,e=this.ptIndex,g=this.segLength,f=this._scratchGL.getNavigationTransform(),l=f.dx,f=f.dy,d=a.toScreen(this.graphic.geometry),a=d.x-l,d=d.y-f,m=[],c=this.editor._getControlPoints(this,c,b,e,g);c[0]&&m.push({x1:a,y1:d,x2:c[0].x-l,y2:c[0].y-f});c[1]&&m.push({x1:a,y1:d,x2:c[1].x-l,y2:c[1].y-f});return m}});
h("extend-esri")&&k.setObject("toolbars.VertexMover",t,m);k.mixin(t,{onMoveStart:function(){},onFirstMove:function(){},onMoveStop:function(){}});return t})},"esri/toolbars/TextEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/event dojo/has dojo/dom-construct dojo/dom-class dojo/dom-style dojo/keys ../kernel".split(" "),function(t,k,d,q,b,e,g,m,r,h){t=t(null,{declaredClass:"esri.toolbars.TextEditor",constructor:function(b,c,e){this._graphic=b;this._map=c;
this._toolbar=e;this._enable(this._graphic)},destroy:function(){this._disable()},onEditStart:function(){},onEditEnd:function(){},_enable:function(b){this._editBox?(d.disconnect(this._addEditBoxHandler),this._addEditBoxHandler=null):(this._map.navigationManager.setImmediateClick(!0),this._addEditBoxHandler=d.connect(b.getLayer(),"onDblClick",this,function(c){this._map.navigationManager.setImmediateClick(!1);c.graphic==b&&(q.stop(c),d.disconnect(this._addEditBoxHandler),this._addEditBoxHandler=null,
this._addTextBox(b))}))},_disable:function(){this._applyEdit();this._addEditBoxHandler&&(d.disconnect(this._addEditBoxHandler),this._addEditBoxHandler=null);this._removeTextBox();this.onEditEnd(this._graphic);this._toolbar.onTextEditEnd(this._graphic)},_addTextBox:function(b,c){if(!this._editBox){var l;b.symbol.text||(b.symbol.text="Tempt text",b.setSymbol(b.symbol),l="");var a=this._createInputTextStyle(b,this._map);""!==l&&(l=c||b.symbol.text);this._editBox=e.create("input",{type:"text",value:l});
m.set(this._editBox,a);g.add(this._editBox,"esriTextEditorInput");this._map.container.appendChild(this._editBox);this._editBox.focus();this._editBoxKeyHandler=d.connect(this._editBox,"onkeyup",k.hitch(this,function(a){a.keyCode!=r.ENTER&&a.keyCode!==r.TAB||this._disable()}));this._editBoxBlurHandler=d.connect(this._editBox,"onblur",k.hitch(this,function(a){this._disable()}));b.symbol.text="";b.setSymbol(b.symbol);b.hide();var h=this._editBox;this._disableBoxHandler||(this._disableBoxHandler=this._map.on("zoom-start",
k.hitch(this,function(){this._disable()})));this._moveBoxHandler=this._map.on("pan",function(a){m.set(h,{left:this._editBoxLeft+a.delta.x+"px",top:this._editBoxTop+a.delta.y+"px"})});this._moveBoxStartHandler=this._map.on("pan-start",function(){this._editBoxLeft=parseFloat(m.get(h,"left"));this._editBoxTop=parseFloat(m.get(h,"top"))});this.onEditStart(b,this._editBox);this._toolbar.onTextEditStart(b,this._editBox)}},_removeTextBox:function(){this._editBoxBlurHandler&&(d.disconnect(this._editBoxBlurHandler),
this._editBoxBlurHandler=null);this._editBox&&(this._editBox.parentNode.removeChild(this._editBox),this._editBox=null);this._disableBoxHandler&&(this._disableBoxHandler.remove(),this._disableBoxHandler=null);this._moveBoxHandler&&(this._moveBoxHandler.remove(),this._moveBoxHandler=null);this._moveBoxStartHandler&&(this._moveBoxStartHandler.remove(),this._moveBoxStartHandler=null);this._editBoxKeyHandler&&(d.disconnect(this._editBoxKeyHandler),this._editBoxKeyHandler=null)},_createInputTextStyle:function(b,
c){c=b.getDojoShape().getTransformedBoundingBox();var e=b.getLayer(),e=e.hasLocalNavigationTransform()?{dx:0,dy:0}:e.getNavigationTransform(),a=b.symbol.font;return{"font-family":a.family,"font-size":a.size+"px","font-style":a.style,"font-variant":a.variant,"font-weight":a.weight,left:c[0].x+e.dx+"px",top:c[0].y+e.dy+"px",width:Math.abs(c[0].x-c[1].x)/Math.cos(b.symbol.angle/180*Math.PI)+"px"}},_applyEdit:function(){if(this._editBox)if(this._editBox.value){this._graphic.show();var b=this._graphic.symbol;
b.text=this._editBox.value;this._graphic.setSymbol(b)}else this._graphic.getLayer().remove(this._graphic)}});b("extend-esri")&&k.setObject("toolbars.TextEditor",t,h);return t})},"widgets/GriddedReferenceGraphic/js/GridSettings":function(){define("dojo/_base/declare dojo/_base/array dojo/on dojo/dom-style ./ColorPickerEditor ./FontSetting jimu/BaseWidget jimu/dijit/TabContainer3 dijit/_WidgetsInTemplateMixin dojo/text!../templates/GridSettings.html dojo/_base/lang dojo/Evented dojo/dom-class dojo/query dojo/keys jimu/dijit/formSelect".split(" "),
function(t,k,d,q,b,e,g,m,r,h,n,c,l,a,p){return t([g,r,c],{baseClass:"jimu-widget-GRGDrafter-Settings",templateString:h,selectedGridSettings:{},_defaultColor:"#1a299c",_defaultTextSize:12,_defaultFont:{font:{fontFamily:"Arial",bold:!1,italic:!1,underline:!1},fontSize:12,textColor:"#2f4f4f"},gridSettingsOptions:{cellShape:["default","hexagon"],cellUnits:"meters kilometers miles nautical-miles yards feet".split(" "),labelStartPosition:["lowerLeft","lowerRight","upperLeft","upperRight"],labelType:["alphaNumeric",
"alphaAlpha","numeric"],labelTypeWithRefSys:["gridReferenceSystem","alphaNumeric","alphaAlpha","numeric"],labelDirection:["horizontal","vertical"],gridOrigin:["center","lowerLeft","lowerRight","upperLeft","upperRight"],referenceSystem:["MGRS","USNG"]},constructor:function(a){n.mixin(this,a)},startup:function(){this.tab=new m({tabs:[{title:this.nls.gridSettingsLabel,content:this.gridTab},{title:this.nls.labelSettingsLabel,content:this.labelTab}],selected:this.nls.gridTabLabel});this.tab.placeAt(this.tabsContainer);
this.tab.startup();this.gridOutlineColorPicker=new b({nls:this.nls,typeOfColorPicker:"Outline"},this.cellOutlineColorPicker);q.set(this.gridOutlineColorPicker.slider.domNode,"width","");this.gridOutlineColorPicker.setValues({color:this.config.grg.cellOutline.color,transparency:this.config.grg.cellOutline.transparency});this.gridOutlineColorPicker.startup();this.gridFillColorPicker=new b({nls:this.nls,typeOfColorPicker:"Fill"},this.cellFillColorPicker);q.set(this.gridFillColorPicker.slider.domNode,
"width","");this.gridFillColorPicker.setValues({color:this.config.grg.cellFill.color,transparency:this.config.grg.cellFill.transparency});this.gridFillColorPicker.startup();var c=a(".jimu-color-pickerPopup",this.domNode);k.forEach(c,n.hitch(this,function(a){this.own(d(a,"keydown",n.hitch(this,function(a){a.keyCode!==p.ENTER&&a.keyCode!==p.SPACE||a.currentTarget.click()})))}));this.fontSetting=new e({config:this.config.grg.font||this._defaultFont,nls:this.nls},this.fontSettingNode);this.fontSetting.startup();
this._loadOptionsForDropDown(this.cellShape,this.gridSettingsOptions.cellShape);this._loadOptionsForDropDown(this.labelStartPosition,this.gridSettingsOptions.labelStartPosition);this._loadOptionsForDropDown(this.cellUnits,this.gridSettingsOptions.cellUnits);this._loadOptionsForDropDown(this.labelType,this.gridSettingsOptions.labelType);this._loadOptionsForDropDown(this.labelTypeWithRefSys,this.gridSettingsOptions.labelTypeWithRefSys);this._loadOptionsForDropDown(this.labelDirection,this.gridSettingsOptions.labelDirection);
this._loadOptionsForDropDown(this.gridOrigin,this.gridSettingsOptions.gridOrigin);this._loadOptionsForDropDown(this.referenceSystem,this.gridSettingsOptions.referenceSystem);this.config.grg&&(this.cellShape.setValue(this.config.grg.cellShape),this.cellUnits.setValue(this.config.grg.cellUnits),this.gridOrigin.setValue(this.config.grg.gridOrigin),this.labelType.setValue(this.config.grg.labelType),this.labelDirection.setValue(this.config.grg.labelDirection),this.labelStartPosition.setValue(this.config.grg.labelOrigin),
this.referenceSystem.setValue(this.config.grg.referenceSystem),"hexagon"===this.cellShape.get("value")?(this.labelDirection.set("disabled",!0),this.labelDirection.setValue("horizontal")):this.labelDirection.set("disabled",!1));this.onGridsettingsChanged()},postCreate:function(){this.inherited(arguments);l.add(this.domNode,"GRGDrafterSettingsContainer GRGDrafterFullWidth");this._handleClickEvents()},_handleClickEvents:function(){this.own(d(this.cellShape,"change",n.hitch(this,function(){"hexagon"===
this.cellShape.get("value")?(this.labelDirection.set("disabled",!0),this.labelDirection.setValue("horizontal")):this.labelDirection.set("disabled",!1)})))},_loadOptionsForDropDown:function(a,c){var b=[],e;k.forEach(c,n.hitch(this,function(a){e=this.nls.gridSettings[a].hasOwnProperty("label")?{value:a,label:this.nls.gridSettings[a].label}:{value:a,label:this.nls.gridSettings[a]};b.push(e)}));a.addOption(b)},_isSettingsChanged:function(){var a=!1;this.selectedGridSettings.cellShape!==this.cellShape.get("value")?
a=!0:this.selectedGridSettings.labelStartPosition!==this.labelStartPosition.get("value")?a=!0:this.selectedGridSettings.cellUnits!==this.cellUnits.get("value")?a=!0:this.selectedGridSettings.labelType!==this.labelType.get("value")?a=!0:this.selectedGridSettings.labelTypeWithRefSys!==this.labelTypeWithRefSys.get("value")?a=!0:this.selectedGridSettings.labelDirection!==this.labelDirection.get("value")?a=!0:this.selectedGridSettings.gridOrigin!==this.gridOrigin.get("value")?a=!0:this.selectedGridSettings.referenceSystem!==
this.referenceSystem.get("value")?a=!0:this.selectedGridSettings.gridOutlineColor!==this.gridOutlineColorPicker.getValues().color?a=!0:this.selectedGridSettings.gridOutlineTransparency!==this.gridOutlineColorPicker.getValues().transparency?a=!0:this.selectedGridSettings.gridFillColor!==this.gridFillColorPicker.getValues().color?a=!0:this.selectedGridSettings.gridFillTransparency!==this.gridFillColorPicker.getValues().transparency?a=!0:this.selectedGridSettings.fontSettings!==this.fontSetting.getConfig()&&
(a=!0);return a},onClose:function(){if(this._isSettingsChanged())this.onGridsettingsChanged()},onGridsettingsChanged:function(){this.selectedGridSettings={cellShape:this.cellShape.get("value"),labelStartPosition:this.labelStartPosition.get("value"),cellUnits:this.cellUnits.get("value"),labelType:this.labelType.get("value"),labelTypeWithRefSys:this.labelTypeWithRefSys.get("value"),labelDirection:this.labelDirection.get("value"),gridOrigin:this.gridOrigin.get("value"),referenceSystem:this.referenceSystem.get("value"),
gridOutlineColor:this.gridOutlineColorPicker.getValues().color,gridOutlineTransparency:this.gridOutlineColorPicker.getValues().transparency,gridFillColor:this.gridFillColorPicker.getValues().color,gridFillTransparency:this.gridFillColorPicker.getValues().transparency,fontSettings:n.clone(this.fontSetting.getConfig())};this.emit("gridSettingsChanged",this.selectedGridSettings)}})})},"widgets/GriddedReferenceGraphic/js/ColorPickerEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/dom-attr dojo/on dojo/query dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/ColorPickerEditor.html dijit/form/HorizontalSlider jimu/dijit/ColorPickerPopup dijit/form/NumberSpinner".split(" "),
function(t,k,d,q,b,e,g,m,r,h,n,c,l){return t([m,r,h],{_defaultColor:"#485566",templateString:n,nls:null,postCreate:function(){this.colorPicker=new l({color:this._defaultColor,width:this._defaultWidth,tabindex:"0",role:"button"},this.colorPicker);this.colorPicker.startup();this.slider=new c({name:"slider",value:100,minimum:0,maximum:100,discreteValues:101,intermediateChanges:!0,showButtons:!1,style:"width:140px;display: inline-block;"},this.sliderBar);this.slider.startup();this.inherited(arguments)},
startup:function(){this._setAriaLabelForEditorNodes();this.own(b(this.slider,"change",k.hitch(this,function(a){!1===this._isSameVal()&&this.spinner.setValue(a)})));this.own(b(this.spinner,"change",k.hitch(this,function(a){!1===this._isSameVal()&&100>=a&&this.slider.setValue(a)})));this._stylePolyfill();this.inherited(arguments)},_setAriaLabelForEditorNodes:function(){var a="",c="";this.nls.gridSettings&&(a="Fill"===this.typeOfColorPicker?this.nls.gridSettings.cellFill:this.nls.gridSettings.cellOutline,
c=this.nls.gridSettings.colorPicker);q.set(this.colorPicker.domNode,"aria-label",a+" "+c);q.set(this.slider,"aria-label",a+" "+this.nls.transparency);q.set(this.spinner,"aria-label",a+" "+this.nls.transparency)},_isSameVal:function(){return this.slider.getValue()===this.spinner.getValue()},getValues:function(){var a=null,c=null;(c=this.colorPicker.getColor())&&c.toHex&&(a=c.toHex());c=this.spinner.getValue()/100;return{color:a,transparency:c}},setValues:function(a){if("object"===typeof a||"string"===
typeof a)this.colorPicker.setColor(new d(a.color)),a.transparency="undefined"===typeof a.transparency?0:100*a.transparency,this.slider.setValue(a.transparency),this.spinner.setValue(a.transparency)},_stylePolyfill:function(){var a=e(".dijitSliderLeftBumper",this.domNode)[0];a&&a.parentNode&&g.setStyle(a.parentNode,"background-color","#24b5cc")}})})},"jimu/dijit/ColorPickerPopup":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/_base/Color dijit/TooltipDialog dijit/popup jimu/dijit/ColorPalette jimu/utils".split(" "),
function(t,k,d,q,b,e,g,m,r,h,n){return t([k,d],{baseClass:"jimu-color-pickerPopup",declaredClass:"jimu.dijit.ColorPickerPopup",templateString:'\x3cdiv class\x3d"jimu-color-picker"\x3e\x3c/div\x3e',_isTooltipDialogOpened:!1,color:null,showLabel:!1,around:null,_ENABLE:!0,recordUID:"",postCreate:function(){this.inherited(arguments);this._createTooltipDialog(this.domNode);this._hideTooltipDialog()},destroy:function(){r.close(this.tooltipDialog);this.picker.destroy();this.tooltipDialog.destroy();this.inherited(arguments)},
enable:function(){this._ENABLE=!0;b.removeClass(this.domNode,"disable")},disable:function(){this._ENABLE=!1;b.addClass(this.domNode,"disable")},isPartOfPopup:function(c){var e=this.tooltipDialog.domNode;return c===e||b.isDescendant(c,e)},hideTooltipDialog:function(){this._hideTooltipDialog()},showTooltipDialog:function(){this._showTooltipDialog()},initUI:function(){this.picker.initUI()},_showTooltipDialog:function(){r.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.around?this.around:
this.domNode,orient:this.orient});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){r.hide(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var c=b.create("div");this.tooltipDialog=new m({content:c});b.addClass(this.tooltipDialog.domNode,"jimu-color-picker-popup-dialog");var l=new h({appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!0,showCoustomRecord:!0,closeDialogWhenChange:!0},recordUID:this.recordUID,
onChange:q.hitch(this,function(a){a&&(a=new g(a),this.setColor(a),this.onChange(a))})});l.placeAt(c);l.startup();this.own(e(l,"close",q.hitch(this,function(){this._hideTooltipDialog()})));this.own(e(l,"change-style",q.hitch(this,function(){this._hideTooltipDialog();this._showTooltipDialog()})));this.own(e(this.domNode,"click",q.hitch(this,function(a){a.stopPropagation();a.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():!1!==this._ENABLE&&this._showTooltipDialog()})));this.own(e(document,
"click",q.hitch(this,function(a){this.isPartOfPopup(a.srcElement||a.target)||this._hideTooltipDialog()})));this.picker=l},setColor:function(c){if(c instanceof g){null===this.color&&!0===this.showLabel&&this._changeLabel(c);var e=c.toHex();this.color=c;b.setStyle(this.domNode,"backgroundColor",e);this.picker&&(this.picker.refreshRecords(),this.picker.setColor(e,!1,!0));this.showLabel&&this._changeLabel(this.color)}},getColor:function(){return this.color},_changeLabel:function(c){b.empty(this.domNode);
b.create("span",{innerHTML:c.toHex(),className:"color-label",style:{color:n.invertColor(c.toHex())}},this.domNode)},onChange:function(c){c&&this.showLabel&&this._changeLabel(c)},changeColor:function(){this.picker&&this.picker.changeColor();this.showLabel&&this._changeLabel(this.color)},setTitle:function(c){this.domNode.title=c},getTooltipDialog:function(){return this.tooltipDialog||null}})})},"widgets/GriddedReferenceGraphic/js/FontSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/_base/html dojo/_base/array dojo/dom-attr dojo/Evented dojo/query dojo/keys dojo/aspect dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/FontSetting.html jimu/dijit/ColorPickerPopup dijit/form/HorizontalSlider ./TransparencyEditor dojo/store/Memory jimu/dijit/formSelect jimu/dijit/CheckBox jimu/dijit/ImageChooser dijit/form/ComboBox".split(" "),
function(t,k,d,q,b,e,g,m,r,h,n,c,l,a,p,A,z,w){return t([n,c,l,g],{templateString:a,nls:null,_FONTS:null,_MIN_TEXT_SIZE:12,_MAX_TEXT_SIZE:48,_INTERVAL_TEXT_SIZE:2,_DEFAULT_CONFIG:null,postCreate:function(){this.inherited(arguments);this._FONTS="Arial;Comic Sans MS;Courier New;Garamond;Tahoma;Times New Roman;Verdana".split(";");this._DEFAULT_CONFIG={font:{fontFamily:this._FONTS[0],bold:!1,italic:!1,underline:!1},fontSize:"24",textColor:"#282828",haloSize:1,haloColor:"#FFFFFF",haloOn:!0,labelTransparency:1};
this.config=k.mixin(k.clone(this._DEFAULT_CONFIG),this.config);b.forEach(this._FONTS,k.hitch(this,function(a){this.fontSelect.addOption({value:a,label:a})}));for(var a=new w({}),c=this._MIN_TEXT_SIZE,g=this._MAX_TEXT_SIZE;c<=g;c+=this._INTERVAL_TEXT_SIZE)a.put({id:c,name:c});this.textSizeSelect.store=a;e.set(this.textSizeSelect.domNode,"aria-label",this.nls.textSize);e.set(this.textSizeSelect.domNode,"role","combobox");e.set(this.textSizeSelect.domNode,"aria-expanded","false");h.after(this.textSizeSelect,
"loadAndOpenDropDown",k.hitch(this,function(){e.set(this.textSizeSelect.domNode,"aria-expanded","true")}));h.after(this.textSizeSelect,"closeDropDown",k.hitch(this,function(){e.set(this.textSizeSelect.domNode,"aria-expanded","false")}));this.textSizeSelect.validator=k.hitch(this,function(){var a=this.textSizeSelect.getValue();return null!==a&&""!==a?!isNaN(a):!1});this.textSizeSlider=new A({name:"slider",value:0,minimum:this._MIN_TEXT_SIZE,maximum:this._MAX_TEXT_SIZE,discreteValues:this.textSizeSelect.store.data.length+
1,intermediateChanges:!0,showButtons:!1,style:"display: inline-block;","aria-label":this.nls.textSize},this.sliderBar);this.textSizeSlider.startup();a="";this.nls.gridSettings&&(a=this.nls.gridSettings.colorPicker);this.textColorPicker=new p({role:"button",tabindex:"0","aria-label":this.nls.textColor+" "+a,appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showCoustomRecord:!0},recordUID:this.recordUID});this.textColorPicker.placeAt(this.textColorBtn);this.textColorPicker.startup();
this.labelTransparency=new z({ariaLabel:this.nls.transparency},this.transparencySlider);this.labelTransparency.startup();for(var l=[],n,c=1,g=10;c<=g;c+=1)n={value:c.toString(),label:c.toString()},l.push(n);this.haloSizeSelect.addOption(l);this.haloSizeSelect.validator=k.hitch(this,function(){var a=this.haloSizeSelect.get("value");return null!==a&&""!==a?!isNaN(a):!1});this.haloColorPicker=new p({role:"button",tabindex:"0","aria-label":this.nls.halo+" "+a,appearance:{showTransparent:!1,showColorPalette:!0,
showCoustom:!0,showCoustomRecord:!0}});this.haloColorPicker.placeAt(this.haloColorBtn);this.haloColorPicker.startup();this.own(d(this.fontSelect,"change",k.hitch(this,function(a){if(this.config.font.fontFamily!==a)this.onSettingChange({font:{fontFamily:a,bold:this.config.font.bold,italic:this.config.font.italic,underline:this.config.font.underline}})})));this._initAppearance();this.own(d(this.bold,"click",k.hitch(this,function(){this._clickHandlerOfBoldItalicUnderline(this.bold,"bold")})));this.own(d(this.italic,
"click",k.hitch(this,function(){this._clickHandlerOfBoldItalicUnderline(this.italic,"italic")})));this.own(d(this.underline,"click",k.hitch(this,function(){this._clickHandlerOfBoldItalicUnderline(this.underline,"underline")})));this.own(d(this.bold,"keydown",k.hitch(this,function(a){a.keyCode!==r.ENTER&&a.keyCode!==r.SPACE||this._clickHandlerOfBoldItalicUnderline(this.bold,"bold")})));this.own(d(this.italic,"keydown",k.hitch(this,function(a){a.keyCode!==r.ENTER&&a.keyCode!==r.SPACE||this._clickHandlerOfBoldItalicUnderline(this.italic,
"italic")})));this.own(d(this.underline,"keydown",k.hitch(this,function(a){a.keyCode!==r.ENTER&&a.keyCode!==r.SPACE||this._clickHandlerOfBoldItalicUnderline(this.underline,"underline")})));this.own(d(this.textSizeSelect,"change",k.hitch(this,function(a){this.config.fontSize!==a&&!1!==this.textSizeSelect.isValid()&&(this.setTextSize(a),this.onSettingChange({fontSize:a}))})));this.own(d(this.textSizeSlider,"change",k.hitch(this,function(a){this.config.fontSize!==a&&(this.setTextSize(Math.round(a)),
this.onSettingChange({fontSize:a}))})));this.own(d(this.textColorPicker,"change",k.hitch(this,function(a){if(this.config.textColor!==a)this.onSettingChange({textColor:a.toHex()})})));this.own(this.labelTransparency.watch("transparency",k.hitch(this,function(){this.onSettingChange({labelTransparency:this.labelTransparency.getValues().transparency})})));this.own(d(this.haloSizeSelect,"change",k.hitch(this,function(a){if(this.config.haloSize!==a&&!1!==this.haloSizeSelect.isValid())this.onSettingChange({haloSize:a})})));
this.own(d(this.haloColorPicker,"change",k.hitch(this,function(a){if(this.config.haloColor!==a)this.onSettingChange({haloColor:a.toHex()})})));this.own(d(this.showHalo,"change",k.hitch(this,function(){this.onSettingChange({haloOn:this.showHalo.checked})})));c=m(".jimu-color-pickerPopup",this.domNode);b.forEach(c,k.hitch(this,function(a){this.own(d(a,"keydown",k.hitch(this,function(a){a.keyCode!==r.ENTER&&a.keyCode!==r.SPACE||a.currentTarget.click()})))}))},startup:function(){this.inherited(arguments);
this.setConfig(this.config);this.refresh()},onSettingChange:function(a){this.config=k.mixin(this.config,a);this.onChange(this.config)},onChange:function(a){this.emit("change",a)},refresh:function(){this.onSettingChange({})},isValid:function(){return!1===this.textSizeSelect.isValid()?!1:!0},getConfig:function(){return this.isValid()?this.config:!1},setConfig:function(a){if("undefined"!==a){"undefined"!==typeof a.font&&(this.config.font=a.font,this.config.font.fontFamily&&this.fontSelect.set("value",
this.config.font.fontFamily),this.fontBtnClickd(this.config.font));"undefined"!==typeof a.fontSize&&(this.config.fontSize=a.fontSize,this.setTextSize(this.config.fontSize));if("undefined"===typeof a.textColor||""===a.textColor)a.textColor=this._DEFAULT_CONFIG.textColor;this.config.textColor=a.textColor;if("undefined"===typeof a.labelTransparency||""===a.labelTransparency)a.labelTransparency=this._DEFAULT_CONFIG.labelTransparency;this.config.labelTransparency=a.labelTransparency;this.labelTransparency.setValues({transparency:this.config.labelTransparency});
if("undefined"===typeof a.haloSize||""===a.haloSize)a.haloSize=this._DEFAULT_CONFIG.haloSize;this.config.haloSize=a.haloSize;this.haloSizeSelect.set("value",a.haloSize);if("undefined"===typeof a.haloColor||""===a.haloColor)a.haloColor=this._DEFAULT_CONFIG.haloColor;this.config.haloColor=a.haloColor;q.setStyle(this.textColorPicker.domNode,"backgroundColor",this.config.textColor);this.textColorPicker.picker.refreshRecords();this.textColorPicker.picker.setColor(this.config.textColor,!1,!0);q.setStyle(this.haloColorPicker.domNode,
"backgroundColor",this.config.haloColor);this.haloColorPicker.picker.refreshRecords();this.haloColorPicker.picker.setColor(this.config.haloColor,!1,!0);if("undefined"===typeof a.haloOn||""===a.haloOn)a.haloOn=this._DEFAULT_CONFIG.haloOn;this.showHalo.set("checked",this.config.haloOn)}},_clickHandlerOfBoldItalicUnderline:function(a,c){var b,e;b=!q.hasClass(a,"selected");a={fontFamily:this.config.font.fontFamily,bold:this.config.font.bold,italic:this.config.font.italic,underline:this.config.font.underline};
"bold"===c?a.bold=b:"italic"===c?a.italic=b:a.underline=b;e={};e[c]=b;this.fontBtnClickd(e);this.onSettingChange({font:a})},setTextSize:function(a){a!==this.textSizeSelect.getValue()&&this.textSizeSelect.set("value",a);a!==this.textSizeSlider.getValue()&&(a>this._MAX_TEXT_SIZE?a=this._MAX_TEXT_SIZE:a<this._MIN_TEXT_SIZE&&(a=this._MIN_TEXT_SIZE),this.textSizeSlider.set("value",a))},fontBtnClickd:function(a){!0===a.bold?(q.addClass(this.bold,"selected"),e.set(this.bold,"aria-pressed","true")):!1===
a.bold&&(q.removeClass(this.bold,"selected"),e.set(this.bold,"aria-pressed","false"));!0===a.italic?(q.addClass(this.italic,"selected"),e.set(this.italic,"aria-pressed","true")):!1===a.italic&&(q.removeClass(this.italic,"selected"),e.set(this.italic,"aria-pressed","false"));!0===a.underline?(q.addClass(this.underline,"selected"),e.set(this.underline,"aria-pressed","true")):!1===a.underline&&(q.removeClass(this.underline,"selected"),e.set(this.underline,"aria-pressed","false"))},_initAppearance:function(){this.appearance&&
(!1===this.appearance.bold&&q.addClass(this.bold,"hide"),!1===this.appearance.italic&&q.addClass(this.italic,"hide"),!1===this.appearance.underline&&q.addClass(this.underline,"hide"))}})})},"widgets/GriddedReferenceGraphic/js/TransparencyEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/query dojo/dom-attr dojo/Stateful dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/TransparencyEditor.html dijit/form/HorizontalSlider dijit/form/NumberSpinner".split(" "),
function(t,k,d,q,b,e,g,m,r,h,n,c){return t([e,m,r,h],{templateString:n,transparency:1,postCreate:function(){this.slider=new c({name:"slider",value:0,minimum:0,maximum:100,discreteValues:101,intermediateChanges:!0,showButtons:!1,style:"width:140px;display: inline-block;",tabindex:"0","aria-label":this.ariaLabel},this.sliderBar);this.slider.startup();this.inherited(arguments);b.set(this.spinner,"aria-label",this.ariaLabel)},startup:function(){this.own(d(this.slider,"change",k.hitch(this,function(c){!1===
this._isSameVal()&&(this.spinner.setValue(c),this._set("transparency",c/100))})));this.own(d(this.spinner,"change",k.hitch(this,function(c){!1===this._isSameVal()&&100>=c&&(this.slider.setValue(c),this._set("transparency",c/100))})));this._stylePolyfill();this.inherited(arguments)},_isSameVal:function(){return this.slider.getValue()===this.spinner.getValue()},getValues:function(){var c=null,c=this.spinner.getValue()/100;return{transparency:c}},setValues:function(c){if("object"===typeof c||"string"===
typeof c)c.transparency="undefined"===typeof c.transparency?0:100*c.transparency,this.slider.setValue(c.transparency),this.spinner.setValue(c.transparency)},_stylePolyfill:function(){var c=q(".dijitSliderLeftBumper",this.domNode)[0];c&&c.parentNode&&g.setStyle(c.parentNode,"background-color","#24b5cc")}})})},"widgets/GriddedReferenceGraphic/js/drawGRG":function(){define("esri/geometry/Point esri/geometry/Polygon esri/geometry/geometryEngine esri/graphic esri/geometry/webMercatorUtils esri/SpatialReference esri/geometry/Circle esri/request dojo/json ./geometryUtils".split(" "),
function(t,k,d,q,b,e,g,m,r,h){var n={createGRG:function(c,l,a,m,r,z,w,f,B,K,G,L,D){var p,A,u,y,I,C,F,N,T,P,Q,Y=[],J=0,U=0,R=m/2/Math.cos(30*Math.PI/180),Z,aa=c;switch(w){case "upperLeft":"horizontal"===B?(p=l-1,A=-1,"numeric"!==f?u=0:(u=(l-1)*c,"hexagon"===K&&(u+=Math.floor(l/2)))):(p=-1,A=l-1,"numeric"!==f&&(u=l));break;case "upperRight":"horizontal"===B?(p=l-1,A=c,"numeric"!==f?u=c+1:(u=l*c+1,"hexagon"===K&&(u+=Math.floor(l/2)))):(u="numeric"!==f?l:l*(c+1),p=c,A=l-1);break;case "lowerRight":"horizontal"===
B?(p=0,A=c,u=c+1):(p=c,A=0,u=1);break;case "lowerLeft":"horizontal"===B?(u=p=0,A=-1):(p=-1,u=1,A=0)}var W=c*m/2,M;M="hexagon"===K?1===l%2?((l-1)/2*3*R+R)/2:(l/2*3*R-R/2)/2:l*r/2;for(var O=1;O<=l;O++){for(var S=1;S<=c;S++){if(L){var H=new k;if(1===O&&1===S)switch(102100===a.spatialReference.wkid&&(a=b.webMercatorToGeographic(a)),G){case "center":y=h.getDestinationPoint(a,180+z,M);y=h.getDestinationPoint(y,270+z,W);break;case "upperLeft":y=h.getDestinationPoint(a,180+z,2*M);break;case "upperRight":y=
h.getDestinationPoint(a,180+z,2*M);y=h.getDestinationPoint(y,270+z,2*W);break;case "lowerRight":y=h.getDestinationPoint(a,270+z,2*W);break;case "lowerLeft":y=a}"default"===K?(C=h.getDestinationPoint(y,0+z,r),F=h.getDestinationPoint(C,90+z,m),I=h.getDestinationPoint(F,180+z,r),H.addRing([[y.x,y.y],[C.x,C.y],[F.x,F.y],[I.x,I.y]]),y=I):(I=y,N=h.getDestinationPoint(I,0+z,R),T=h.getDestinationPoint(N,60+z,R),F=h.getDestinationPoint(T,120+z,R),P=h.getDestinationPoint(F,180+z,R),Q=h.getDestinationPoint(P,
240+z,R),H.addRing([[I.x,I.y],[N.x,N.y],[T.x,T.y],[F.x,F.y],[P.x,P.y],[Q.x,Q.y]]),y=h.getDestinationPoint(y,90+z,m));H=d.simplify(H);4326!==D.spatialReference.wkid&&(H=b.geographicToWebMercator(H));H=new q(H);1===S&&(Z="hexagon"===K?aa===c?h.getDestinationPoint(N,300+z,R):T:C)}else{H=new k(new e({wkid:102100}));4326===a.spatialReference.wkid&&(a=b.geographicToWebMercator(a));switch(G){case "center":J=a.x-W;U=a.y-M;break;case "upperLeft":J=a.x;U=a.y-2*M;break;case "upperRight":J=a.x-2*W;U=a.y-2*M;
break;case "lowerRight":J=a.x-2*W;U=a.y;break;case "lowerLeft":J=a.x,U=a.y}"default"===K?H.addRing([[J+(S-1)*m,U+(O-1)*r],[J+(S-1)*m,U+O*r],[J+S*m,U+O*r],[J+S*m,U+(O-1)*r],[J+(S-1)*m,U+(O-1)*r]]):(aa===c?J=J+(S-1)*m+m/2:J+=(S-1)*m,U=U+R+1.5*(O-1)*R,I=new t([J,U],new e({wkid:102100})),F=new g(I,{radius:R,numberOfPoints:6}),I=d.rotate(F,90,I),H.addRing(I.rings[0]));H=d.rotate(H,-1*z,a);102100!==D.spatialReference.wkid&&(H=b.webMercatorToGeographic(H));H=new q(H)}switch(w){case "upperLeft":"horizontal"===
B?(A+=1,u+=1):(p+=1,"numeric"===f&&(u=l*S-(O-1)));break;case "lowerLeft":"horizontal"===B?(A+=1,u+=1):(p+=1,"numeric"===f&&(u=l*(S-1)+O));break;case "upperRight":"horizontal"===B?(--u,--A):(--p,"numeric"===f&&(u-=c));break;case "lowerRight":"horizontal"===B?(--u,--A):(--p,"numeric"===f&&(u=l*(c-S)+O))}Y.push(n.addGraphicLabel(H,f,u,p,A))}y=Z;"hexagon"===K&&(aa===c?c++:c--);switch(w){case "upperLeft":"horizontal"===B?(--p,u="numeric"!==f?0:"hexagon"===K?u-2*aa-1:u-2*c,A=-1):(p=-1,A=l-(O+1),"numeric"!==
f&&(u=l-O));break;case "upperRight":"horizontal"===B?(--p,"numeric"!==f&&(u=c+1),A=c):(u="numeric"!==f?u-1:l*(c+1)-O,p=c,--A);break;case "lowerRight":"horizontal"===B?(p+=1,u="numeric"!==f?c+1:"hexagon"===K?u+2*aa+1:u+2*c,A=c):(p=c,A+=1,u="numeric"!==f?u+1:c*O);break;case "lowerLeft":"horizontal"===B?(p+=1,"numeric"!==f&&(u=0),A=-1):(p=-1,"numeric"!==f&&(u+=1),A=O)}}return Y},convertNumberToLetters:function(c){for(var b="";0<=c;)b=String.fromCharCode(c%26+65)+b,c=Math.floor(c/26)-1;return b},checkGridSize:function(c,
b){return 2E3>c*b},getFeatureServiceParams:function(c,b){return{name:c,serviceDescription:"",hasStaticData:!1,maxRecordCount:1E3,supportedQueryFormats:"JSON",capabilities:"Create,Delete,Query,Update,Editing",tags:"GRG",description:"",copyrightText:"",spatialReference:{wkid:102100},initialExtent:{xmin:b.extent.xmin,ymin:b.extent.ymin,xmax:b.extent.xmax,ymax:b.extent.ymax,spatialReference:{wkid:102100}},allowGeometryUpdates:!0,units:"esriMeters",xssPreventionInfo:{xssPreventionEnabled:!0,xssPreventionRule:"InputOnly",
xssInputRule:"rejectInvalid"}}},getLayerParams:function(c,b,a,e){return{layers:[{adminLayerInfo:{geometryField:{name:"Shape"},xssTrustedFields:""},id:0,name:c,type:"Feature Layer",displayField:"",description:"A GRG (Gridded Reference Graphic) is a grid overlay used for a commonreference point in many situations - from cordon and search operations to securityfor presidential inaugurations.",tags:"GRG",copyrightText:"",defaultVisibility:!0,ownershipBasedAccessControlForFeatures:{allowOthersToQuery:!1,
allowOthersToDelete:!1,allowOthersToUpdate:!1},relationships:[],isDataVersioned:!1,supportsCalculate:!0,supportsAttachmentsByUploadId:!0,supportsRollbackOnFailureParameter:!0,supportsStatistics:!0,supportsAdvancedQueries:!0,supportsValidateSql:!0,supportsCoordinatesQuantization:!0,supportsApplyEditsWithGlobalIds:!0,advancedQueryCapabilities:{supportsPagination:!0,supportsQueryWithDistance:!0,supportsReturningQueryExtent:!0,supportsStatistics:!0,supportsOrderBy:!0,supportsDistinct:!0,supportsQueryWithResultType:!0,
supportsSqlExpression:!0,supportsReturningGeometryCentroid:!0},useStandardizedQueries:!1,geometryType:"esriGeometryPolygon",minScale:0,maxScale:0,extent:{xmin:b.extent.xmin,ymin:b.extent.ymin,xmax:b.extent.xmax,ymax:b.extent.ymax,spatialReference:{wkid:102100}},drawingInfo:{renderer:{type:"simple",symbol:e},transparency:0,labelingInfo:[{labelExpression:"[grid]",labelExpressionInfo:{value:"{grid}"},format:null,fieldInfos:null,useCodedValues:!1,maxScale:0,minScale:0,where:null,sizeInfo:null,labelPlacement:"esriServerPolygonPlacementAlwaysHorizontal",
symbol:a}]},allowGeometryUpdates:!0,hasAttachments:!1,htmlPopupType:"esriServerHTMLPopupTypeNone",hasM:!1,hasZ:!1,objectIdField:"OBJECTID",globalIdField:"",typeIdField:"",fields:[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!1,editable:!1,domain:null,defaultValue:null},{name:"grid",type:"esriFieldTypeString",alias:"grid",actualType:"nvarchar",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeNVarchar",length:256}],indexes:[],
types:[],templates:[{name:"New Feature",description:"",drawingTool:"esriFeatureEditToolPolygon",prototype:{attributes:{grid:""}}}],supportedQueryFormats:"JSON",hasStaticData:!1,maxRecordCount:1E4,standardMaxRecordCount:4E3,tileMaxRecordCount:4E3,maxRecordCountFactor:1,exceedsLimitFactor:1,capabilities:"Query,Editing,Create,Update,Delete"}]}},isNameAvailable:function(c,b,a){return m({url:c,content:{name:a,type:"Feature Service",token:b,f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},
createFeatureService:function(c,b,a){return m({url:c,content:{f:"json",token:b,typeKeywords:"ArcGIS Server,Data,Feature Access,Feature Service,Service,Hosted Service",createParameters:r.stringify(a),outputType:"featureService"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},addDefinitionToService:function(c,b,a){return m({url:c,content:{token:b,addToDefinition:r.stringify(a),f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},labelReferenceGrid:function(c,b,a,e){for(var g=
-1,l=1,m,f=!0,h=null,k=[],p;0<c.length;)if(f){g++;"alphaNumeric"===b?l=1:"alphaAlpha"===b&&(m=0);var r=d.union(c);p=r.getExtent();var D;switch(a){case "lowerLeft":D=d.nearestCoordinate(r,new t(p.xmin,p.ymin,p.spatialReference));break;case "lowerRight":D=d.nearestCoordinate(r,new t(p.xmax,p.ymin,p.spatialReference));break;case "upperLeft":D=d.nearestCoordinate(r,new t(p.xmin,p.ymax,p.spatialReference));break;case "upperRight":D=d.nearestCoordinate(r,new t(p.xmax,p.ymax,p.spatialReference))}for(p=0;p<
c.length;p++)if(d.touches(c[p],D.coordinate)){h=c[p];k.push(n.addGraphicLabel(new q(c[p]),b,l,g,m));l++;m++;f=c.indexOf(c[p]);c.splice(f,1);f=!1;break}}else{f=!0;p=h.getExtent();var x;switch(a){case "lowerLeft":x=d.nearestCoordinate(h,new t(p.xmax,p.ymin,p.spatialReference));break;case "lowerRight":x=d.nearestCoordinate(h,new t(p.xmin,p.ymin,p.spatialReference));break;case "upperLeft":x=d.nearestCoordinate(h,new t(p.xmax,p.ymax,p.spatialReference));break;case "upperRight":x=d.nearestCoordinate(h,
new t(p.xmin,p.ymax,p.spatialReference))}for(r=0;r<c.length;r++){p=c[r].getExtent();var E;switch(a){case "lowerLeft":E=d.nearestCoordinate(c[r],new t(p.xmin,p.ymin,p.spatialReference));break;case "lowerRight":E=d.nearestCoordinate(c[r],new t(p.xmax,p.ymin,p.spatialReference));break;case "upperLeft":E=d.nearestCoordinate(c[r],new t(p.xmin,p.ymax,p.spatialReference));break;case "upperRight":E=d.nearestCoordinate(c[r],new t(p.xmax,p.ymax,p.spatialReference))}p=d.buffer(E.coordinate,"UTM"===e?1E4:e/5,
9001);if(d.contains(p,x.coordinate)){h=c[r];k.push(n.addGraphicLabel(new q(c[r]),b,l,g,m));l++;m++;f=c.indexOf(c[r]);c.splice(f,1);f=!1;break}}}return k},addGraphicLabel:function(c,b,a,e,g){e=n.convertNumberToLetters(e);g=n.convertNumberToLetters(g);var d={};switch(b){case "alphaNumeric":d.grid=e.toString()+a.toString();break;case "alphaAlpha":d.grid=e.toString()+"-"+g.toString();break;case "numeric":d.grid=a.toString()}c.setAttributes(d);return c},checkPolarRegion:function(c){var b=new k({rings:[[[-180,
84],[-180,90],[180,90],[180,84],[-180,84]],[[-180,-90],[-180,-80],[180,-80],[180,-90],[-180,-90]]],spatialReference:{wkid:4326}});return d.intersects(c,b)}};return n})},"esri/geometry/Circle":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Point ./Polygon ./geodesicUtils ./webMercatorUtils ../WKIDUnitConversion ../units".split(" "),function(t,k,d,q,b,e,g,m,r,h){t=t(e,{declaredClass:"esri.geometry.Circle",_unitToMeters:{esriCentimeters:.01,esriDecimeters:.1,esriFeet:.3048,
esriInches:.0254,esriKilometers:1E3,esriMeters:1,esriMiles:1609.344,esriMillimeters:.001,esriNauticalMiles:1852,esriYards:.9144,esriDecimalDegrees:111320},constructor:function(e,c){e.center?c=e:(c=c||{},c.center=e);this.center=k.isArray(c.center)?new b(c.center[0],c.center[1]):c.center;this.radius=c.radius||1E3;this.radiusUnit=c.radiusUnit||h.METERS;this.geodesic=!0===c.geodesic?!0:!1;this.numberOfPoints=c.numberOfPoints||60;this._init()},toJson:function(){return this.inherited(arguments)},_init:function(){this.rings=
[];this._ring=0;var b=this.radius*this._unitToMeters[this.radiusUnit],c=this._srType(this.center.spatialReference);if(this.geodesic){var e;switch(c){case "webMercator":e=m.webMercatorToGeographic(this.center);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":e=this.center}b=this._createGeodesicCircle(e,b,this.numberOfPoints,e.spatialReference);"webMercator"===c&&(b=m.geographicToWebMercator(b))}else{var a;
"webMercator"===c||"projected"===c?a=b/this._convert2Meters(1,this.center.spatialReference):"geographic"===c&&(a=b/this._unitToMeters.esriDecimalDegrees);b=this._createPlanarCircle(this.center,a,this.numberOfPoints)}this.spatialReference=b.spatialReference;this.addRing(b.rings[0]);this.verifySR()},_createGeodesicCircle:function(b,c,d,a){for(var l=0,m=Math.PI/180,h=[],k;l<2*Math.PI;)k=g._directGeodeticSolver(b.y*m,b.x*m,l,c,a),h.push([k.x,k.y]),l+=Math.PI/(d/2);h.push(h[0]);return new e(h)},_createPlanarCircle:function(b,
c,g){for(var a=0,d=[],l,m;a<2*Math.PI;)l=b.x+Math.cos(a)*c,m=b.y+Math.sin(a)*c,d.push([l,m]),a+=Math.PI/(g/2);d.push(d[0]);b=new e(b.spatialReference);b.addRing(d);return b},_srType:function(b){return b.isWebMercator()?"webMercator":null!=r[b.wkid]||b.wkt&&0===b.wkt.indexOf("PROJCS")?"projected":"geographic"},_convert2Meters:function(b,c){if(null!=r[c.wkid])c=r.values[r[c.wkid]];else{c=c.wkt;var e=c.lastIndexOf(",")+1,a=c.lastIndexOf("]]");c=parseFloat(c.substring(e,a))}return b*c}});d("extend-esri")&&
k.setObject("geometry.Circle",t,q);return t})},"widgets/GriddedReferenceGraphic/js/geometryUtils":function(){define("esri/geometry/Point esri/geometry/Polyline esri/geometry/Polygon esri/geometry/webMercatorUtils dojo/Deferred dojo/_base/array dojo/_base/lang esri/geometry/geometryEngine esri/SpatialReference esri/geometry/scaleUtils".split(" "),function(t,k,d,q,b,e,g,m,r,h){var n={getProjectedGeometry:function(c,e,a){var g,d;g=new b;q.canProject(c,e)?(d=q.project(c,e),g.resolve(d)):a.project([c],
e,function(a){d=a[0];g.resolve(d)});return g.promise},getDestinationPoint:function(c,b,a){var e=c.x*Math.PI/180,g=b*Math.PI/180;b=Math.sin(g);var g=Math.cos(g),d=.9966471893352243*Math.tan(c.y*Math.PI/180);c=1/Math.sqrt(1+d*d);var l=d*c,f=Math.atan2(d,g),d=c*b,m=1-d*d,h=2.7233160610984375E11*m/4.040829998465916E13,k=1+h/16384*(4096+h*(-768+h*(320-175*h))),n=h/1024*(256+h*(-128+h*(74-47*h))),q,x,E,u=a/(6356752.314245*k),y,I=0;do h=Math.cos(2*f+u),q=Math.sin(u),x=Math.cos(u),E=n*q*(h+n/4*(x*(-1+2*h*
h)-n/6*h*(-3+4*q*q)*(-3+4*h*h))),y=u,u=a/(6356752.314245*k)+E;while(1E-12<Math.abs(u-y)&&200>++I);if(200<=I)return null;a=l*q-c*x*g;a=Math.atan2(l*x+c*q*g,.9966471893352243*Math.sqrt(d*d+a*a));m=2.0955066654848088E-4*m*(4+.003352810664775694*(4-3*m));e=(e+(Math.atan2(q*b,c*x-l*q*g)-.003352810664775694*(1-m)*d*(u+m*q*(h+m*x*(-1+2*h*h))))+3*Math.PI)%(2*Math.PI)-Math.PI;a=180*a/Math.PI;e=180*e/Math.PI;return new t(e,a,new r(4326))},getInverseCalculations:function(c,b){var a=b.x*Math.PI/180-c.x*Math.PI/
180,e=.9966471893352243*Math.tan(c.y*Math.PI/180);c=1/Math.sqrt(1+e*e);var e=e*c,g=.9966471893352243*Math.tan(b.y*Math.PI/180);b=1/Math.sqrt(1+g*g);var g=g*b,d,l,f,m,h,k,n,r,q,t=a,u,y=0;do{d=Math.sin(t);l=Math.cos(t);f=b*d*b*d+(c*g-e*b*l)*(c*g-e*b*l);f=Math.sqrt(f);if(0==f)return 0;m=e*g+c*b*l;h=Math.atan2(f,m);k=c*b*d/f;n=1-k*k;r=m-2*e*g/n;isNaN(r)&&(r=0);q=2.0955066654848088E-4*n*(4+.003352810664775694*(4-3*n));u=t;t=a+.003352810664775694*(1-q)*k*(h+q*f*(r+q*m*(-1+2*r*r)))}while(1E-12<Math.abs(t-
u)&&200>++y);if(200<=y)return null;t=2.7233160610984375E11*n/4.040829998465916E13;y=t/1024*(256+t*(-128+t*(74-47*t)));a=Math.atan2(b*d,c*g-e*b*l);c=Math.atan2(c*d,-e*b+c*g*l);a=(a+2*Math.PI)%(2*Math.PI);c=(c+2*Math.PI)%(2*Math.PI);e=Number((6356752.314245*(1+t/16384*(4096+t*(-768+t*(320-175*t))))*(h-y*f*(r+y/4*(m*(-1+2*r*r)-y/6*r*(-3+4*f*f)*(-3+4*r*r))))).toFixed(3));a=180*a/Math.PI;c=180*c/Math.PI;return{distance:e,initialBearing:a,finalBearing:c}},getLineBetweenPoints:function(c){var b,a=[];e.forEach(c,
g.hitch(this,function(c){a.push([c.x,c.y])}));0<a.length&&(b=new k({paths:[a],spatialReference:{wkid:4326}}));return b},getAngleBetweenPoints:function(c,b){c=n.getInverseCalculations(c,b);return null===c?0:c.initialBearing},getDistanceBetweenPoints:function(c,b){c=n.getInverseCalculations(c,b);return null===c?0:c.distance},getLengthOfGeometry:function(c){return(c=m.simplify(c))?m.geodesicLength(c,9001):0},getAreaOfGeometry:function(c){var b;c=m.simplify(c);b={};c?(b.acres=m.geodesicArea(c,109402),
b.squareMeters=m.geodesicArea(c,109404),b.squareFeet=m.geodesicArea(c,109405),b.squareUsFeet=m.geodesicArea(c,109406)):(b.acres=0,b.squareMeters=0,b.squareFeet=0,b.squareUsFeet=0);return b},getPolyLineFromPaths:function(c){var b,a;b=new k(new r({wkid:4326}));for(a=0;a<c.length;a++)b.addPath(c[a]);return b},getPolygonFromPolyLines:function(c,b,a,e){var m,l,h;m=[];e=e?new d(new r(e)):new d(new r({wkid:4326}));for(l=0;l<c.length;l++)for(h=0;h<c[l].length;h++)m.push(c[l][h]);b?m.push(g.clone(m[0])):a&&
(m[m.length-1][0]=m[0][0],m[m.length-1][1]=m[0][1]);e.isClockwise(m)||m.reverse();e.addRing(m);return e},getPointsForArc:function(c,b,a,e){var g,d=[],m,f;g=b-c;b=parseInt(g,10);0>=b&&(b=1);m=Math.abs(g)/Math.abs(b);if(0<m)for(g=0;g<Math.abs(b)+1;g++)f=c+m*g,(f=n.getDestinationPoint(a,f,Math.abs(e)))&&d.push(f);return d},getArcParam:function(c){var b;b={};0>c.distance?0>c.radius?(b.bearing=c.initBearing+90,b.centerPoint=n.getDestinationPoint(c.chordMidPoint,b.bearing,c.centerAndChordDistance),b.startAngle=
n.getAngleBetweenPoints(b.centerPoint,c.chordEndPoint),b.endAngle=n.getAngleBetweenPoints(b.centerPoint,c.chordStartPoint)):(b.bearing=c.initBearing-90,b.centerPoint=n.getDestinationPoint(c.chordMidPoint,b.bearing,c.centerAndChordDistance),b.startAngle=n.getAngleBetweenPoints(b.centerPoint,c.chordStartPoint),b.endAngle=n.getAngleBetweenPoints(b.centerPoint,c.chordEndPoint)):0<c.radius?(b.bearing=c.initBearing+90,b.centerPoint=n.getDestinationPoint(c.chordMidPoint,b.bearing,c.centerAndChordDistance),
b.startAngle=n.getAngleBetweenPoints(b.centerPoint,c.chordStartPoint),b.endAngle=n.getAngleBetweenPoints(b.centerPoint,c.chordEndPoint)):(b.bearing=c.initBearing-90,b.centerPoint=n.getDestinationPoint(c.chordMidPoint,b.bearing,c.centerAndChordDistance),b.startAngle=n.getAngleBetweenPoints(b.centerPoint,c.chordEndPoint),b.endAngle=n.getAngleBetweenPoints(b.centerPoint,c.chordStartPoint));return b},removeNegativeExponents:function(c){return 1<c.toString().toLowerCase().split("e-").length?0:c},getChordLengthFromArcLength:function(c,
b){var a;c=Math.abs(c);a=Math.PI*Math.abs(b);b=Math.abs(b)*Math.sin(Math.abs(c)/Math.abs(b)/2);return c<=a?2*b:-2*b},getArcLengthFromChordLength:function(c,b){var a;a=Math.abs(c);b=Math.abs(b);a=2*Math.asin(a/(2*b))*b;0>c&&(a=2*Math.PI*b-a);return a},chordBearingToTangentBearing:function(c,b,a){var e;e=180/Math.PI*Math.acos(Math.abs(a)/2/Math.abs(b));b/=Math.abs(b);c=c+90*b-a/Math.abs(a)*b*e;return n.removeNegativeExponents(0>c?c+360:360<=c?c%360:c)},tangentBearingToChordBearing:function(c,b,a){var e;
e=180/Math.PI*Math.acos(Math.abs(a)/2/Math.abs(b));b/=Math.abs(b);c=c+90*b-a/Math.abs(a)*b*e;return n.removeNegativeExponents(0>c?c+360:360<=c?c%360:c)},getUnitValueForSR:function(c){switch(h.getUnitValueForSR(c)){case 1:return"meters";case 111194.87428468118:return"meters";case .3048:return"feet";case .3048006096:case .3048006096012192:return"uSSurveyFeet"}},getRotationAngleBetweenPoints:function(c,b){var a,e;c=q.project(c,new r(102100));b=q.project(b,new r(102100));a=b.x-c.x;c=b.y-c.y;b=180*Math.atan2(Math.abs(a),
Math.abs(c))/Math.PI;e=180*Math.atan2(Math.abs(c),Math.abs(a))/Math.PI;a=n.removeNegativeExponents(a);c=n.removeNegativeExponents(c);b=n.removeNegativeExponents(b);e=n.removeNegativeExponents(e);if(0===c){if(0===a)return 0;if(0<a)return 90;if(0>a)return 270}else if(0<c){if(0===a)return 0;if(0<a)return b;if(0>a)return 270+e}else if(0>c){if(0===a)return 180;if(0<a)return 90+e;if(0>a)return 180+b}},getScaleDistanceBetweenPoints:function(c,b){c=q.project(c,new r(102100));b=q.project(b,new r(102100));
c=m.distance(c,b,9001);return n.removeNegativeExponents(c)}};return n})},"widgets/GriddedReferenceGraphic/js/geometry-utils":function(){define(["./constants","esri/geometry/webMercatorUtils","esri/geometry/Polyline","esri/geometry/Polygon"],function(t,k,d,q){return{toGeographic:function(b){return b.spatialReference.isWebMercator()?k.webMercatorToGeographic(b):b},toWebMercator:function(b){return b.spatialReference.isWebMercator()?b:k.geographicToWebMercator(b)},_latitudeToWebMercatorY:function(b){return t.GEOGRAPHIC_360/
2*(t.HALF_PI-2*Math.atan(Math.exp(-1*b/t.WGS84_EQUATORIAL_RADIUS)))/Math.PI},_longitudeToWebMercatorX:function(b){var e=t.GEOGRAPHIC_360,g=t.GEOGRAPHIC_360/2,d=t.WGS84_EQUATORIAL_RADIUS;return b/d*g/Math.PI-Math.floor((b/d*g/Math.PI+g)/e)*e},pointToGeographic:function(b){for(var e=b.x,g=b.y,d=(b=b.spatialReference.isWebMercator())?t.WEST_WEBMERCATOR_LIMIT:t.WEST_GEOGRAPHIC_LIMIT,k=b?t.EAST_WEBMERCATOR_LIMIT:t.EAST_GEOGRAPHIC_LIMIT,h=b?t.WEBMERCATOR_360:t.GEOGRAPHIC_360,n=0;e<=d;)e+=h,--n;for(;e>k;)e-=
h,n+=1;b&&(e=this._longitudeToWebMercatorX(e),g=this._latitudeToWebMercatorY(g));return{x:e,y:g,offsetX:n}},extentToPolygon:function(b){return new q({rings:[[[b.xmin,b.ymin],[b.xmax,b.ymin],[b.xmax,b.ymax],[b.xmin,b.ymax],[b.xmin,b.ymin]]],spatialReference:b.spatialReference})},polygonToPolyline:function(b){return new d({paths:b.rings,spatialReference:{wkid:b.spatialReference.wkid}})}}})},"widgets/GriddedReferenceGraphic/js/constants":function(){define([],function(){return{ZONE_WIDTH_DEGREES:6,ZONE_HEIGHT_DEGREES:8,
MIN_MGRS_LATITUDE:-80,MAX_MGRS_LATITUDE:84,POSITIVE_180:179.99999999,NEGATIVE_180:-179.99999999,WEST_GEOGRAPHIC_LIMIT:-180,EAST_GEOGRAPHIC_LIMIT:180,GEOGRAPHIC_360:360,WEST_WEBMERCATOR_LIMIT:-2.0037508342789244E7,EAST_WEBMERCATOR_LIMIT:2.0037508342789244E7,WEBMERCATOR_360:4.007501668557849E7,DEGREES_PER_RADIAN:57.29577951308232,RADIANS_PER_DEGREE:.017453292519943295,WGS84_EQUATORIAL_RADIUS:6378137,WGS84_HALF_EQUATORIAL_RADIUS:3189068.5,HALF_PI:1.5707963267948966}})},"widgets/GriddedReferenceGraphic/js/mgrs-utils":function(){define("dojo/json ./constants ./geometry-utils ./geometryUtils ./mgrs ./NonPolarGridZone ./VisibleGridZone ./GridPolygon esri/geometry/geometryEngine esri/geometry/Point esri/geometry/Polygon".split(" "),
function(t,k,d,q,b,e,g,m,r,h,n){Math.log10||(Math.log10=function(c){return Math.log(c)/Math.LN10});return{_ZonesDictionary:function(){var c,b,a,g="CDEFGHJKLMNPQRSTUVWX".split(""),d={},m=function(a,b){var c,f,d=a+g[b];if("32X"===d||"34X"===d||"36X"===d)return null;"31V"===d?c={xmin:0,ymin:56,xmax:3,ymax:64,id:d}:"32V"===d?c={xmin:3,ymin:56,xmax:12,ymax:64,id:d}:"31X"===d?c={xmin:0,ymin:72,xmax:9,ymax:84,id:d}:"33X"===d?c={xmin:9,ymin:72,xmax:21,ymax:84,id:d}:"35X"===d?c={xmin:21,ymin:72,xmax:33,ymax:84,
id:d}:"37X"===d?c={xmin:33,ymin:72,xmax:42,ymax:84,id:d}:(c=(a-1)*k.ZONE_WIDTH_DEGREES-180,a=a*k.ZONE_WIDTH_DEGREES-180,f=b*k.ZONE_HEIGHT_DEGREES+k.MIN_MGRS_LATITUDE,b=(b+1)*k.ZONE_HEIGHT_DEGREES+k.MIN_MGRS_LATITUDE,c=180===c?k.POSITIVE_180:c,c=-180===c?k.NEGATIVE_180:c,a=180===a?k.POSITIVE_180:a,a=-180===a?k.NEGATIVE_180:a,80===b&&(b=k.MAX_MGRS_LATITUDE),c={xmin:c,ymin:f,xmax:a,ymax:b,id:d});return new e(c)};for(c=1;60>=c;c++)for(b=0;b<g.length;b++)(a=m(c,b))&&(d[a.id]=a);for(c=1;60>=c;c++){var h=
[];for(b=0;b<g.length;b++)if(a=m(c,b))a=new n({rings:t.parse(t.stringify(a._rings))}),h.push(a);h=r.union(h);for(b=0;b<g.length;b++)(a=m(c,b))&&(d[a.id.fullZoneGeometry]=h)}return d}(),zonesFromExtent:function(b,e){var a,c,m,l,q,f,B,K,G,L=b.spatialReference.isWebMercator()?k.WEBMERCATOR_360:k.GEOGRAPHIC_360,D="CDEFGHJKLMNPQRSTUVWX".split(""),x=[];if(b.xmax-b.xmin>L)return x;var L=d.extentToPolygon(b),L=d.toWebMercator(L),E=d.pointToGeographic(new h([b.xmin,b.ymin],b.spatialReference)),u=d.pointToGeographic(new h([b.xmax,
b.ymax],b.spatialReference));b=E.y;m=u.y;K=E.offsetX;G=u.offsetX;for(var y=K;y<=G;y++)for(a=y>K?k.NEGATIVE_180:E.x,c=y<G?k.POSITIVE_180:u.x,l=Math.min(Math.max(Math.floor((b+80)/k.ZONE_HEIGHT_DEGREES),0),19),q=Math.min(Math.floor((m+80)/k.ZONE_HEIGHT_DEGREES),19),a=Math.floor((a+180)/k.ZONE_WIDTH_DEGREES),c=Math.min(Math.floor((c+180)/k.ZONE_WIDTH_DEGREES)+2,60);a<=c;a++)for(var I=l;I<=q;I++)if(f=D[I],f=a+f,this._ZonesDictionary[f]){B=t.parse(t.stringify(this._ZonesDictionary[f]._rings));for(var C=
0;C<B[0].length;C++)B[0][C][0]+=y*k.GEOGRAPHIC_360;B=new n({rings:B});(B=r.intersect(d.toWebMercator(B),L))&&x.push(new g({map:e,polygon:B,fullZoneGeometry:this._ZonesDictionary[f].fullZoneGeometry,offset:y,nonPolarGridZone:this._ZonesDictionary[f],utmZone:this._ZonesDictionary[f].utmZone,latitudeBand:this._ZonesDictionary[f].latitudeZone}))}return x},processZonePolygons:function(c,e,a){var g=[];a=d.toWebMercator(a);for(var m=0;m<c.length;m++){var h=c[m];if(h)var l=h.nonPolarGridZone.latitudeZone,
f=d.toGeographic(h.polygon.getExtent()),k=b.LLtoUTM(f.ymin,f.xmin,h.nonPolarGridZone.utmZone),n=b.LLtoUTM(f.ymin,f.xmax,h.nonPolarGridZone.utmZone),r=b.LLtoUTM(f.ymax,f.xmax,h.nonPolarGridZone.utmZone),f=b.LLtoUTM(f.ymax,f.xmin,h.nonPolarGridZone.utmZone),h={minE:Math.min(k[0],n[0],r[0],f[0]),maxE:Math.max(k[0],n[0],r[0],f[0]),minN:Math.min(k[1],n[1],r[1],f[1]),maxN:Math.max(k[1],n[1],r[1],f[1]),utmZone:h.nonPolarGridZone.utmZone,latitudeZone:l,polygon:h.polygon,offset:h.offset,fullZoneGeometry:d.extentToPolygon(h.nonPolarGridZone.extent)},
g=g.concat(this.handle100kGrids(h,e,a))}return g},handle100kGrids:function(c,e,a){var g=c.polygon,h=c.offset,l=c.utmZone,t=c.latitudeZone,f=c.fullZoneGeometry,B=c.minE,K=c.maxE,G=c.maxN,L=[],D,x,E,u,y;for(c=1E5*Math.floor(c.minN/1E5);c<G;c+=1E5)for(D=1E5*Math.floor(B/1E5);D<K;D+=1E5){y=b.findGridLetters(l,0>c+5E4?1E7+(c+5E4):c+5E4,D+5E4);E=[];for(x=D;x<=D+1E5;x+=1E4)u=b.UTMtoLL(c,x,l),E.push([u.lon,u.lat]);for(x=c;x<c+1E5;x+=1E4)u=b.UTMtoLL(x,D+1E5,l),E.push([u.lon,u.lat]);for(x=D+1E5;x>=D;x-=1E4)u=
b.UTMtoLL(c+1E5,x,l),E.push([u.lon,u.lat]);for(x=c+1E5;x>=c;x-=1E4)u=b.UTMtoLL(x,D,l),E.push([u.lon,u.lat]);for(x=0;x<E.length;x++)E[x][0]+=h*k.GEOGRAPHIC_360;x=new n([E]);E=q.getAngleBetweenPoints(x.getPoint(0,x.rings[0].length-1),x.getPoint(0,x.rings[0].length-2));u=r.rotate(d.extentToPolygon(a),-1*E);E=r.intersect(d.toWebMercator(x),d.toWebMercator(g));u=r.intersects(u,d.toWebMercator(x));if(E||u){var I;u&&(I=r.intersect(d.toWebMercator(x),d.toWebMercator(f)));y={clippedPolygon:E,unclippedPolygon:x,
clippedPolyToUTMZone:I,map:e,xmin:D,ymin:c,xmax:D+1E5,ymax:c+1E5,x:"",y:"",minMaxType:"utm",utmZone:l,latitudeZone:t,utmZonePoly:g,fullZoneGeometry:f,GZD:y,text:y};I&&(y=new m(y),L.push(y))}}return L},handleGridSquares:function(c,e,a,g){var l=[],k=c.utmZonePoly,p=c.latitudeZone,f=c.utmZone,t=c.fullZoneGeometry,K=c.GZD,G=c.xmin,L=c.xmax,D=c.ymin;c=c.ymax;var x,E,u,y,I,C,F,N=!0,T=!0;g=d.toWebMercator(g);for(x=Math.floor(D/a)*a;x<c;x+=a)for(E=Math.floor(G/a)*a;E<L;E+=a){y=[];C=b.UTMtoLL(x,E,f);y.push([C.lon,
C.lat]);u=b.UTMtoLL(x+a,E,f);y.push([u.lon,u.lat]);F=b.UTMtoLL(x+a,E+a,f);y.push([F.lon,F.lat]);F=b.UTMtoLL(x,E+a,f);y.push([F.lon,F.lat]);y.push([C.lon,C.lat]);y=new n([y]);F=r.intersect(d.toWebMercator(d.extentToPolygon(g)),d.toWebMercator(t));N&&T&&(I=q.getAngleBetweenPoints(new h(C.lon,C.lat),new h(u.lon,u.lat)),I=r.rotate(F,-1*I));C=r.intersect(d.toWebMercator(y),k);u=r.intersects(I,d.toWebMercator(y));var P;if(C||u){u&&(P=r.intersect(d.toWebMercator(y),d.toWebMercator(t)));u=K+this._padZero(E%
1E5/a,5-Math.log10(a)).toString()+this._padZero((0>D?1E7+x:x)%1E5/a,5-Math.log10(a)).toString();y={clippedPolygon:C,unclippedPolygon:y,fullZoneGeometry:t,clippedPolyToUTMZone:P,map:e,xmin:E,ymin:x,xmax:E+a,ymax:x+a,x:this._padZero(E%1E5/a,5-Math.log10(a)).toString(),y:this._padZero((0>D?1E7+x:x)%1E5/a,5-Math.log10(a)).toString(),minMaxType:"utm",utmZone:f,latitudeZone:p,GZD:K,utmZonePoly:k,text:u};if(!P)continue;N=new m(y);l.push(N)}T=N=!1}return l},_padZero:function(b,e){for(b=b.toString();b.length<
e;)b="0"+b;return b}}})},"widgets/GriddedReferenceGraphic/js/mgrs":function(){define(["esri/geometry/Point"],function(t){var k,d,q;k=6378137;d=.00669437999;q=d/(1-d);var b=(1-Math.sqrt(1-d))/(1+Math.sqrt(1-d));return{setSpheroid:function(e){e=e.toUpperCase();switch(e){case "AIRY 1830":k=6377563.396;d=.00667053999998536;break;case "AIRY MODIFIED":k=6377340.189;d=.00667053999998536;break;case "AVERAGE TERRESTRIAL SYSTEM 1977":k=6378135;d=.00669438499958795;break;case "AUSTRALIAN NATIONAL":k=6378160;
d=.00669454185458764;break;case "BESSEL 1841":k=6377397.155;d=.00667437223180214;break;case "BESSEL MODIFIED":k=6377492.018;d=.00667437223180214;break;case "BESSEL NAMIBIA":k=6377483.865;d=.00667437223180214;break;case "CLARKE 1858":k=6378293.639;d=.00678514600473303;break;case "NAD27":case "CLARKE 1866":k=6378206.4;d=.00676865799760964;break;case "CLARKE 1866 MICHIGAN":k=6378450.047;d=.00676865830738507;break;case "CLARKE 1880":k=6378249.138;d=.00680348101883452;break;case "CLARKE 1880 (ARC)":k=
6378249.145;d=.00680348101883452;break;case "CLARKE 1880 (BENOIT)":k=6378300.79;d=.00680348271028565;break;case "CLARKE 1880 (IGN)":k=6378249.2;d=.00680348767623919;break;case "CLARKE 1880 (RGS)":k=6378249.145;d=.00680351128284906;break;case "CLARKE 1880 (SGA)":k=6378249.2;d=.00680348860198551;break;case "EVEREST 1830 (DEFINITION)":k=6377299.36;d=.00663784663019969;break;case "EVEREST 1830 (MODIFIED)":k=6377304.063;d=.00663784663019969;break;case "EVEREST (ADJUSTMENT 1937)":k=6377276.345;d=.00663784663019969;
break;case "EVEREST (DEFINITION 1962)":k=6377301.243;d=.00663784606842344;break;case "EVEREST (DEFINITION 1967)":k=6377298.556;d=.00663784663019969;break;case "EVEREST (DEFINITION 1975)":k=6377299.151;d=.00663784606842344;break;case "NAD83":case "GEM GRAVITY POTENTIAL MODEL":case "GRS 1980":k=6378137;d=.00669438002290079;break;case "GRS 1967 \x3d INTERNATIONAL 1967":k=6378160;d=.00669460532856765;break;case "HELMERT 1906":k=6378200;d=.00669342162296594;break;case "INDONESIAN NATIONAL":k=6378160;d=
.0066946090804091;break;case "INTERNATIONAL 1924":k=6378388;d=.00672267002233332;break;case "INTERNATIONAL 1967":k=6378160;d=.00669454185458764;break;case "KRASOVSKY 1940":k=6378245;d=.00669342162296594;break;case "TRANSIT PRECISE EPHEMERIS":k=6378145;d=.00669454185458764;break;case "OSU 1986 GEOIDAL MODEL":k=6378136.2;d=.00669438006997852;break;case "OSU 1991 GEOIDAL MODEL":k=6378136.3;d=.00669438006997852;break;case "PLESSIS 1817":k=6376523;d=.00646954373789485;break;case "STRUVE 1860":k=6378298.3;
d=.00677435980080942;break;case "WAR OFFICE":k=6378300.583;d=.00674534331628926;break;case "NWL-10D \x3d\x3d WGS 1972":k=6378135;d=.00669431777826672;break;case "WGS 1972":k=6378135;d=.00669431777826672;break;case "WGS84":case "WGS 1984":k=6378137;d=.00669437999014132;break;case "WGS 1966":k=6378145;d=.00669454185458764;break;case "FISCHER 1960":k=6378166;d=.00669342162296594;break;case "FISCHER 1968":k=6378150;d=.00669342162296594;break;case "FISCHER MODIFIED":k=6378155;d=.00669342162296594;break;
case "HOUGH 1960":k=6378270;d=.00672267002233332;break;case "EVEREST MODIFIED 1969":k=6377295.664;d=.00663784663019969;break;case "WALBECK":k=6376896;d=.00659454809414964;break;case "GRS 1967 TRUNCATED":k=6378160,d=.00669454185458764}q=d/(1-d);b=(1-Math.sqrt(1-d))/(1+Math.sqrt(1-d))},getSpheroidList:function(){return"AIRY 1830;AIRY MODIFIED;AUSTRALIAN NATIONAL;AVERAGE TERRESTRIAL SYSTEM 1977;BESSEL 1841;BESSEL MODIFIED;BESSEL NAMIBIA;CLARKE 1858;CLARKE 1866 MICHIGAN;CLARKE 1866;CLARKE 1880 (ARC);CLARKE 1880 (BENOIT);CLARKE 1880 (IGN);CLARKE 1880 (RGS);CLARKE 1880 (SGA);CLARKE 1880;EVEREST (ADJUSTMENT 1937);EVEREST (DEFINITION 1962);EVEREST (DEFINITION 1967);EVEREST (DEFINITION 1975);EVEREST 1830 (DEFINITION);EVEREST 1830 (MODIFIED);EVEREST MODIFIED 1969;FISCHER 1960;FISCHER 1968;FISCHER MODIFIED;GEM GRAVITY POTENTIAL MODEL;GRS 1967 \x3d INTERNATIONAL 1967;GRS 1967 TRUNCATED;GRS 1980;HELMERT 1906;HOUGH 1960;INDONESIAN NATIONAL;INTERNATIONAL 1924;INTERNATIONAL 1967;KRASOVSKY 1940;NWL-10D \x3d\x3d WGS 1972;OSU 1986 GEOIDAL MODEL;OSU 1991 GEOIDAL MODEL;PLESSIS 1817;STRUVE 1860;TRANSIT PRECISE EPHEMERIS;WALBECK;WAR OFFICE;WGS 1966;WGS 1972;WGS 1984".split(";")},
getZoneNumber:function(b,g){b=parseFloat(b);g=parseFloat(g);if(360<g||-180>g){for(;-180>g;)g+=360;for(;180<g;)g-=360}g=g+180-360*Math.floor((g+180)/360)-180;var e=Math.floor((g+180)/6)+1;56<=b&&64>b&&3<=g&&12>g&&(e=32);72<=b&&84>b&&(0<=g&&9>g?e=31:9<=g&&21>g?e=33:21<=g&&33>g?e=35:33<=g&&42>g&&(e=37));return e},LLtoUTM:function(b,g,m){b=parseFloat(b);g=parseFloat(g);if(84<b||-80>b)return"undefined, ensure 84N \x3e Lat \x3e 80S";if(360<g||-180>g){for(;-180>g;)g+=360;for(;180<g;)g-=360}var e,h,n,c;e=
g+180-360*Math.floor((g+180)/360)-180;h=b*Math.PI/180;e=e*Math.PI/180;g=m?m:this.getZoneNumber(b,g);m=(6*(g-1)-180+3)*Math.PI/180;this.UTMLetterDesignator(b);b=k/Math.sqrt(1-d*Math.sin(h)*Math.sin(h));n=Math.tan(h)*Math.tan(h);c=q*Math.cos(h)*Math.cos(h);e=Math.cos(h)*(e-m);return[.9996*b*(e+(1-n+c)*e*e*e/6+(5-18*n+n*n+72*c-58*q)*e*e*e*e*e/120)+5E5,.9996*(k*((1-d/4-3*d*d/64-5*d*d*d/256)*h-(3*d/8+3*d*d/32+45*d*d*d/1024)*Math.sin(2*h)+(15*d*d/256+45*d*d*d/1024)*Math.sin(4*h)-35*d*d*d/3072*Math.sin(6*
h))+b*Math.tan(h)*(e*e/2+(5-n+9*c+4*c*c)*e*e*e*e/24+(61-58*n+n*n+600*c-330*q)*e*e*e*e*e*e/720)),g]},LLtoUSNG:function(b,g,d,k){d=d||5;var e;e=k?k:this.getZoneNumber(b,g);b=parseFloat(b);g=parseFloat(g);var m=this.LLtoUTM(b,g,e);k=m[0];var c=m[1];0>b&&(c+=1E7);m=this.findGridLetters(e,c,k);e=Math.round(c)%1E5;k=Math.round(k)%1E5;e=Math.floor(e/Math.pow(10,5-d));k=Math.floor(k/Math.pow(10,5-d));b=this.getZoneNumber(b,g)+this.UTMLetterDesignator(b)+" "+m+" ";for(g=String(k).length;g<d;g++)b+="0";b+=
k+" ";for(g=String(e).length;g<d;g++)b+="0";return b+e},UTMLetterDesignator:function(b){b=parseFloat(b);return 84>=b&&72<=b?"X":72>b&&64<=b?"W":64>b&&56<=b?"V":56>b&&48<=b?"U":48>b&&40<=b?"T":40>b&&32<=b?"S":32>b&&24<=b?"R":24>b&&16<=b?"Q":16>b&&8<=b?"P":8>b&&0<=b?"N":0>b&&-8<=b?"M":-8>b&&-16<=b?"L":-16>b&&-24<=b?"K":-24>b&&-32<=b?"J":-32>b&&-40<=b?"H":-40>b&&-48<=b?"G":-48>b&&-56<=b?"F":-56>b&&-64<=b?"E":-64>b&&-72<=b?"D":-72>b&&-80<=b?"C":"Z"},findSet:function(b){b=parseInt(b,10);switch(b%6){case 0:return 6;
case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;default:return-1}},findGridLetters:function(b,g,d){b=parseInt(b,10);g=parseFloat(g);d=parseFloat(d);var e=1;for(g=Math.round(g);1E5<=g;)g-=1E5,e++;e%=20;g=0;for(d=Math.round(d);1E5<=d;)d-=1E5,g++;g%=8;return this.lettersHelper(this.findSet(b),e,g)},lettersHelper:function(b,g,d){0===g?g=19:g--;0===d?d=7:d--;switch(b){case 1:return b="ABCDEFGHJKLMNPQRSTUV","ABCDEFGH".charAt(d)+b.charAt(g);case 2:return b="FGHJKLMNPQRSTUVABCDE",
"JKLMNPQR".charAt(d)+b.charAt(g);case 3:return b="ABCDEFGHJKLMNPQRSTUV","STUVWXYZ".charAt(d)+b.charAt(g);case 4:return b="FGHJKLMNPQRSTUVABCDE","ABCDEFGH".charAt(d)+b.charAt(g);case 5:return b="ABCDEFGHJKLMNPQRSTUV","JKLMNPQR".charAt(d)+b.charAt(g);case 6:return b="FGHJKLMNPQRSTUVABCDE","STUVWXYZ".charAt(d)+b.charAt(g)}},UTMtoLL:function(e,g,m){g=parseFloat(g)-5E5;e=parseFloat(e);m=parseInt(m,10);e=e/.9996/(k*(1-d/4-3*d*d/64-5*d*d*d/256));e=e+(3*b/2-27*b*b*b/32)*Math.sin(2*e)+(21*b*b/16-55*b*b*b*
b/32)*Math.sin(4*e)+151*b*b*b/96*Math.sin(6*e);var r=k/Math.sqrt(1-d*Math.sin(e)*Math.sin(e)),h=Math.tan(e)*Math.tan(e),n=q*Math.cos(e)*Math.cos(e),c=g/(.9996*r);g=e-r*Math.tan(e)/(k*(1-d)/Math.pow(1-d*Math.sin(e)*Math.sin(e),1.5))*(c*c/2-(5+3*h+10*n-4*n*n-9*q)*c*c*c*c/24+(61+90*h+298*n+45*h*h-252*q-3*n*n)*c*c*c*c*c*c/720);g=180*g/Math.PI;e=(c-(1+2*h+n)*c*c*c/6+(5-2*n+28*h-3*n*n+8*q+24*h*h)*c*c*c*c*c/120)/Math.cos(e);e=6*(m-1)-180+3+180*e/Math.PI;m={};m.lat=g;m.lon=e;return m},USNGtoUTM:function(b,
g,d,k,h,n){d=1+"ABCDEFGHJKLMNPQRSTUVWXYZ".indexOf(d)%8;var c="CDEFGHJKLMNPQRSTUVWX".indexOf(g);k=b%2?"ABCDEFGHJKLMNPQRSTUV".indexOf(k):"FGHJKLMNPQRSTUVABCDE".indexOf(k);k=Number([0,2,2,2,4,4,6,6,8,8,0,0,0,2,2,4,4,6,6,6][c])+k/10;k<[1.1,2,2.9,3.8,4.7,5.6,6.5,7.3,8.2,9.1,0,.8,1.7,2.6,3.5,4.4,5.3,6.2,7,7.9][c]&&(k+=2);c={};c.N=1E6*k+Number(n)*Math.pow(10,5-n.length);c.E=1E5*d+Number(h)*Math.pow(10,5-h.length);c.zone=b;c.letter=g;return c},USNGtoLL:function(b){b=this.parseUSNG_str(b);var e=this.USNGtoUTM(b.zone,
b.ltr,b.sq1,b.sq2,b.east,b.north);"N">b.ltr&&(e.N-=1E7);e=this.UTMtoLL(e.N,e.E,b.zone);return[e.lat,e.lon]},parseUSNG_str:function(b){var e=[];b=b.toUpperCase();e=/%20/g;e=b.replace(e,"");e=/ /g;e=b.replace(e,"");if(7>e.length)return 0;b={};var d=0;b.zone=10*e.charAt(d++)+1*e.charAt(d++);b.ltr=e.charAt(d++);b.sq1=e.charAt(d++);b.sq2=e.charAt(d++);b.precision=(e.length-d)/2;b.east="";b.north="";for(var k=0;k<b.precision;k++)b.east+=e.charAt(d++);" "===e[d]&&d++;for(k=0;k<b.precision;k++)b.north+=e.charAt(d++);
return b},isUSNG:function(b){var e;b=b.toUpperCase();e=/%20/g;b=b.replace(e,"");e=/ /g;b=b.replace(e,"");if(15<b.length)return 0;e=/^[0-9]{2}[CDEFGHJKLMNPQRSTUVWX]$/;if(b.match(e))return 0;e=/^[0-9]{2}[CDEFGHJKLMNPQRSTUVWX][ABCDEFGHJKLMNPQRSTUVWXYZ][ABCDEFGHJKLMNPQRSTUV]([0-9][0-9]){0,5}/;return!b.match(e)||7>b.length?0:b},LLtoMGRS:function(b,g,d){return this.LLtoUSNG(b,g,d||5).replace(/ /g,"")},USNGtoPoint:function(b){b=this.USNGtoLL(b);return new t(b[1],b[0])},pointToUSNG:function(b,g){var e=b.getLatitude();
b=b.getLongitude();return this.LLtoUSNG(e,b,g)},LLtoUSNG_nad27:function(b,g,d){return this.LLtoUSNG(b,g,d||5)+" (NAD27)"}}})},"widgets/GriddedReferenceGraphic/js/NonPolarGridZone":function(){define(["dojo/_base/declare","dojo/json","./constants","esri/geometry/Polygon","esri/geometry/Extent"],function(t,k,d,q,b){return t(null,{extent:null,id:null,utmZone:null,latitudeZone:null,_rings:[],constructor:function(e){var g=e.id.match(/(\d+)|([A-Za-z]+)/g);this.id=e.id;this.utmZone=1*g[0];this.latitudeZone=
g[1];this.extent=new b({xmin:e.xmin,ymin:e.ymin,xmax:e.xmax,ymax:e.ymax,spatialReference:e.spatialReference||{wkid:4326}});e=[this.extent.xmin,this.extent.ymin];this._rings=[[e,[this.extent.xmax,this.extent.ymin],[this.extent.xmax,this.extent.ymax],[this.extent.xmin,this.extent.ymax],e]]},toPolygon:function(b){var e=k.parse(k.stringify(this._rings));if(b)for(var m=0;m<e[0].length;m++)e[0][m][0]+=b*d.GEOGRAPHIC_360;return new q({rings:e,spatialReference:this.spatialReference})}})})},"widgets/GriddedReferenceGraphic/js/VisibleGridZone":function(){define(["dojo/_base/declare",
"./GridPolygon"],function(t,k){return t(null,{polygon:null,offset:null,nonPolarGridZone:null,fullZoneGeometry:null,map:null,constructor:function(d){this.offset=Math.round(d.offset);this.polygon=d.polygon;this.nonPolarGridZone=d.nonPolarGridZone;this.fullZoneGeometry=d.fullZoneGeometry;this.map=d.map;this.utmZone=d.utmZone;this.latitudeBand=d.latitudeBand;d={clippedPolygon:this.polygon,unclippedPolygon:this.nonPolarGridZone.toPolygon(d.offset),map:this.map,xmin:this.nonPolarGridZone.extent.xmin,ymin:this.nonPolarGridZone.extent.ymin,
xmax:this.nonPolarGridZone.extent.xmax,ymax:this.nonPolarGridZone.extent.ymax,minMaxType:"degrees",utmZone:this.utmZone,text:this.nonPolarGridZone.id,latitudeBand:this.latitudeBand};this.gridPolygon=new k(d)}})})},"widgets/GriddedReferenceGraphic/js/GridPolygon":function(){define(["dojo/_base/declare"],function(t){return t(null,{clippedPolygon:null,unclippedPolygon:null,clippedPolyToUTMZone:null,utmZonePoly:null,fullZoneGeometry:null,map:null,xmin:0,ymin:0,x:"",y:"",xmax:0,ymax:0,minMaxType:"",utmZone:0,
latitudeZone:"",GZD:"",text:"",constructor:function(k){this.unclippedPolygon=k.unclippedPolygon;this.clippedPolygon=k.clippedPolygon;this.utmZonePoly=k.utmZonePoly;this.fullZoneGeometry=k.fullZoneGeometry;this.clippedPolyToUTMZone=k.clippedPolyToUTMZone;this.map=k.map;this.xmin=k.xmin;this.ymin=k.ymin;this.xmax=k.xmax;this.ymax=k.ymax;this.x=k.x;this.y=k.y;this.minMaxType=k.minMaxType;this.utmZone=Math.round(k.utmZone);this.latitudeZone=k.latitudeZone;this.GZD=k.GZD;this.text=k.text}})})},"widgets/GriddedReferenceGraphic/js/util":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/_base/Deferred","esri/tasks/GeometryService"],function(t,k,d,q){return t(null,{constructor:function(b){this.appConfig=b.appConfig;this.nls=b.nls;(b=this.appConfig.geometryService)||(b="//utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer");this.geomService=new q(b)},getCleanInput:function(b){b=b.replace(/\n/g,"");b=b.replace(/\s+/g," ").trim();return b.toUpperCase()},getCoordValues:function(b,e,g){var m=new d;b={sr:4326,coordinates:[[b.x,b.y]],conversionType:e.name?
e.name:e,numOfDigits:g||6,rounding:!0,addSpaces:!1};switch(e){case "DD":b.numOfDigits=6;break;case "USNG":b.numOfDigits=5;break;case "MGRS":b.conversionMode="mgrsDefault";b.numOfDigits=5;break;case "UTM (H)":b.conversionType="utm";b.conversionMode="utmNorthSouth";b.addSpaces=!0;break;case "UTM":b.conversionType="utm";b.conversionMode="utmDefault";b.addSpaces=!0;break;case "GARS":b.conversionMode="garsDefault"}this.geomService.toGeoCoordinateString(b).then(function(b){m.resolve(b)},function(){m.resolve(null)});
return m.promise},getXYNotation:function(b,e){var g=new d,m;m=e.name?e.name:e;e={sr:4326,conversionType:m,strings:[]};switch(m){case "DD":case "DDM":case "DMS":e.numOfDigits=2;b=b.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");e.strings.push(b);break;case "USNG":e.strings.push(b);e.addSpaces="false";break;case "MGRS":e.conversionMode="mgrsNewStyle";e.strings.push(b);e.addSpaces="false";break;case "UTM (H)":e.conversionType="utm";e.conversionMode="utmNorthSouth";e.strings.push(b);break;
case "UTM":e.conversionType="utm";e.conversionMode="utmDefault";e.strings.push(b);break;case "GARS":e.conversionMode="garsCenter";e.strings.push(b);break;case "GEOREF":e.strings.push(b)}this.geomService.fromGeoCoordinateString(e).then(function(b){g.resolve(b)},function(){g.resolve(null)});return g.promise},getNotations:function(){return[{name:"DD",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)$/].map(function(b){return b.source}).join("")),
notationType:this.nls.DDLatLongNotation,conversionType:"DD"},{name:"DDrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)/,/([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)$/].map(function(b){return b.source}).join("")),notationType:this.nls.DDLongLatNotation,conversionType:"DD"},{name:"DDM",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)/,
/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/[\s]*$/].map(function(b){return b.source}).join("")),notationType:this.nls.DDMLatLongNotation,conversionType:"DDM"},{name:"DDMrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)[\s]*$/].map(function(b){return b.source}).join("")),
notationType:this.nls.DDMLongLatNotation,conversionType:"DDM"},{name:"DMS",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)[\s]*$/].map(function(b){return b.source}).join("")),notationType:this.nls.DMSLatLongNotation,
conversionType:"DMS"},{name:"DMSrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)[\s]*$/].map(function(b){return b.source}).join("")),notationType:this.nls.DMSLongLatNotation,conversionType:"DMS"},{name:"GARS",
pattern:/^\d{3}[a-zA-Z]{2}[1-4]?[1-9]?$/,notationType:this.nls.GARSNotation,conversionType:"GARS"},{name:"GEOREF",pattern:/^[a-zA-Z]{4}\d{1,8}$/,notationType:this.nls.GEOREFNotation,conversionType:"GEOREF"},{name:"MGRS",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)/,/(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,
/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/].map(function(b){return b.source}).join("")),notationType:this.nls.MGRSNotation,conversionType:"MGRS"},{name:"UTM",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/].map(function(b){return b.source}).join("")),notationType:this.nls.UTMBandNotation,conversionType:"UTM"},
{name:"UTM (H)",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[NnSs][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]+\d{1,7}\.?\d*[mM]?$/].map(function(b){return b.source}).join("")),notationType:this.nls.UTMHemNotation,conversionType:"UTM (H)"}]},getCoordinateType:function(b){var e=this.getCleanInput(b);b=new d;var g=this.getNotations(),e=k.filter(g,function(b){return b.pattern.test(this.v)},{v:e});0<e.length?b.resolve(e):b.resolve(null);return b.promise},getFormattedDDStr:function(b,e,g){var d={};d.sourceValue=b;d.sourceFormatString=
e;b=b[0].split(/[ ,]+/);d.latdeg=b[0].replace(/[nNsS]/,"");d.londeg=b[1].replace(/[eEwW]/,"");g&&(d.latdeg="N"===b[0].slice(-1)?"+"+d.latdeg:"-"+d.latdeg,d.londeg="W"===b[1].slice(-1)?"-"+d.londeg:"+"+d.londeg);e=e.replace(/X/,d.londeg);e=e.replace(/[eEwW]/,b[1].slice(-1));e=e.replace(/[nNsS]/,b[0].slice(-1));e=e.replace(/Y/,d.latdeg);d.formatResult=e;return d},getFormattedDDMStr:function(b,e,g){var d={};d.sourceValue=b;d.sourceFormatString=e;d.parts=b[0].split(/[ ,]+/);d.latdeg=d.parts[0];d.latmin=
d.parts[1].replace(/[nNsS]/,"");d.londeg=d.parts[2];d.lonmin=d.parts[3].replace(/[eEwW]/,"");g&&(d.latdeg="N"===d.parts[1].slice(-1)?"+"+d.latdeg:"-"+d.latdeg,d.londeg="W"===d.parts[3].slice(-1)?"-"+d.londeg:"+"+d.londeg);b=e.replace(/[EeWw]/,d.parts[3].slice(-1));b=b.replace(/Y/,d.lonmin);b=b.replace(/X/,d.londeg);b=b.replace(/[NnSs]/,d.parts[1].slice(-1));b=b.replace(/B/,d.latmin);b=b.replace(/A/,d.latdeg);d.formatResult=b;return d},getFormattedDMSStr:function(b,e,g){var d={};d.sourceValue=b;d.sourceFormatString=
e;d.parts=b[0].split(/[ ,]+/);d.latdeg=d.parts[0];d.latmin=d.parts[1];d.latsec=d.parts[2].replace(/[NnSs]/,"");d.londeg=d.parts[3];d.lonmin=d.parts[4];d.lonsec=d.parts[5].replace(/[EWew]/,"");g&&(d.latdeg="N"===d.parts[2].slice(-1)?"+"+d.latdeg:"-"+d.latdeg,d.londeg="W"===d.parts[5].slice(-1)?"-"+d.londeg:"+"+d.londeg);b=e.replace(/A/,d.latdeg);b=b.replace(/B/,d.latmin);b=b.replace(/C/,d.latsec);b=b.replace(/X/,d.londeg);b=b.replace(/Y/,d.lonmin);b=b.replace(/Z/,d.lonsec);b=b.replace(/[NnSs]/,d.parts[2].slice(-1));
b=b.replace(/[EeWw]/,d.parts[5].slice(-1));d.formatResult=b;return d},getFormattedUSNGStr:function(b,e){var d={};d.sourceValue=b;d.sourceFormatString=e;b[0].match(/^[ABYZ]/)?d.gzd=b[0].match(/[ABYZ]/)[0].trim():d.gzd=b[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();d.grdsq=b[0].replace(d.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();d.easting=b[0].replace(d.gzd+d.grdsq,"").match(/^\d{1,5}/)[0].trim();d.northing=b[0].replace(d.gzd+d.grdsq,"").match(/\d{1,5}$/)[0].trim();b=e.replace(/Y/,d.northing);b=b.replace(/X/,
d.easting);b=b.replace(/S/,d.grdsq);b=b.replace(/Z/,d.gzd);d.formatResult=b;return d},getFormattedMGRSStr:function(b,e){var d={};d.sourceValue=b;d.sourceFormatString=e;b[0].match(/^[ABYZ]/)?d.gzd=b[0].match(/[ABYZ]/)[0].trim():d.gzd=b[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();d.grdsq=b[0].replace(d.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();d.easting=b[0].replace(d.gzd+d.grdsq,"").match(/^\d{1,5}/)[0].trim();d.northing=b[0].replace(d.gzd+d.grdsq,"").match(/\d{1,5}$/)[0].trim();b=e.replace(/Y/,d.northing);
b=b.replace(/X/,d.easting);b=b.replace(/S/,d.grdsq);b=b.replace(/Z/,d.gzd);d.formatResult=b;return d},getFormattedGARSStr:function(b,e){var d={};d.sourceValue=b;d.sourceFormatString=e;d.lon=b[0].match(/\d{3}/);d.lat=b[0].match(/[a-zA-Z]{2}/);b=b[0].match(/\d*$/);d.quadrant=b[0][0];d.key=b[0][1];e=e.replace(/K/,d.key);e=e.replace(/Q/,d.quadrant);e=e.replace(/Y/,d.lat);e=e.replace(/X/,d.lon);d.formatResult=e;return d},getFormattedGEOREFStr:function(b,e){var d={};d.sourceValue=b;d.sourceFormatString=
e;d.lon=b[0].match(/[a-zA-Z]{1}/)[0].trim();d.lat=b[0].replace(d.lon,"").match(/[a-zA-Z]{1}/)[0].trim();d.quadrant15lon=b[0].replace(d.lon+d.lat,"").match(/[a-zA-Z]{1}/)[0].trim();d.quadrant15lat=b[0].replace(d.lon+d.lat+d.quadrant15lon,"").match(/[a-zA-Z]{1}/)[0].trim();b=b[0].replace(d.lon+d.lat+d.quadrant15lon+d.quadrant15lat,"");d.quadrant1lon=b.substr(0,b.length/2);d.quadrant1lat=b.substr(b.length/2,b.length);e=e.replace(/Y/,d.quadrant1lat);e=e.replace(/X/,d.quadrant1lon);e=e.replace(/D/,d.quadrant15lat);
e=e.replace(/C/,d.quadrant15lon);e=e.replace(/B/,d.lat);e=e.replace(/A/,d.lon);d.formatResult=e;return d},getFormattedUTMStr:function(b,e){var d={};d.sourceValue=b;d.sourceFormatString=e;d.parts=b[0].split(/[ ,]+/);d.zone=d.parts[0].replace(/[A-Z]/,"");d.bandLetter=d.parts[0].slice(-1);d.easting=d.parts[1];d.westing=d.parts[2];b=e.replace(/Y/,d.westing);b=b.replace(/X/,d.easting);b=b.replace(/B/,d.bandLetter);b=b.replace(/Z/,d.zone);d.formatResult=b;return d},getFormattedUTMHStr:function(b,d){var e=
{};e.sourceValue=b;e.sourceFormatString=d;e.parts=b[0].split(/[ ,]+/);e.zone=e.parts[0].replace(/[A-Z]/,"");e.hemisphere=e.parts[0].slice(-1);e.easting=e.parts[1];e.westing=e.parts[2];b=d.replace(/Y/,e.westing);b=b.replace(/X/,e.easting);b=b.replace(/H/,e.hemisphere);b=b.replace(/Z/,e.zone);e.formatResult=b;return e},convertMetersToUnits:function(b,d){var e=0;switch(d.toLowerCase()){case "meters":e=b;break;case "feet":e=3.28084*b;break;case "kilometers":e=.001*b;break;case "miles":e=6.21371E-4*b;
break;case "nautical-miles":e=5.39957E-4*b;break;case "yards":e=1.09361*b}return e},convertToMeters:function(b,e){var d=b;switch(e){case "meters":d=b;break;case "feet":d=.3048*b;break;case "kilometers":d=1E3*b;break;case "miles":d=1609.34*b;break;case "nautical-miles":d=1852.001376036*b;break;case "yards":d=.9144*b}return d}})})},"widgets/GriddedReferenceGraphic/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},
"url:jimu/dijit/templates/CoordinateControl.html":"\x3cdiv class\x3d'coordinateContainer'\x3e\r\n  \x3cdiv class\x3d'coordLabel' data-dojo-attach-point\x3d'coordNameContainer' data-a11y-label-id\x3d'coordLabel'\x3e\r\n    \x3cspan data-dojo-type\x3d'dijit/InlineEditBox' width\x3d'75px' data-dojo-props\x3d\"editor:'dijit/form/TextBox', autoSave:true\"\r\n      data-dojo-attach-point\x3d'coordName'\x3e${type}\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d'add-with-icon coordInput'\x3e\r\n    \x3ctextarea data-a11y-label-by\x3d'coordLabel' tabindex\x3d\"0\" aria-multiline\x3d\"true\" role\x3d\"textbox\" id\x3d'${uid}' type\x3d'text' rows\x3d'1' class\x3d'ta' data-dojo-attach-point\x3d'coordtext' spellcheck\x3d'false'\r\n    placeholder\x3d'${nls.coordinateInputLabel}'\x3e\x3c/textarea\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d'coordactions'\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" id\x3d'${uid}_cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'cpbtn' class\x3d'cpbtn'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" title\x3d\"${nls.formatOutput}\" class\x3d'settingBtn' data-dojo-attach-point\x3d'formatButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.zoomLabel}' title\x3d'${nls.zoomLabel}' class\x3d'zoomBtn' data-dojo-attach-point\x3d'zoomButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.addPointLabel}' title\x3d'${nls.addPointLabel}' class\x3d'drawPointBtn' data-dojo-attach-point\x3d'drawPointButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.removeCoordinate}' title\x3d'${nls.removeCoordinate}' class\x3d'jimu-icon jimu-icon-close' data-dojo-attach-point\x3d'removeControlBtn'\r\n        data-dojo-attach-event\x3d'onclick: remove'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d\"${nls.expandOutput}\" aria-expanded \x3d \"false\" title\x3d\"${nls.expandOutput}\" class\x3d'expandBtn' data-dojo-attach-point\x3d'expandButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d'coordcontrols' class\x3d'coordarea' style\x3d\"display: none\"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub1' class\x3d'coordformat'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub1label' data-a11y-label-id\x3d'sub1Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub1Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub1val' class\x3d'jimu-input crds'\x3e\x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub1val~cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal1CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub2' class\x3d'coordformat'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub2label' data-a11y-label-id\x3d'sub2Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub2Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub2val' class\x3d'jimu-input crds'\x3e\x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub2val~cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal2CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub3' class\x3d'coordformat sub3'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub3label' data-a11y-label-id\x3d'sub3Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub3Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub3val' class\x3d'jimu-input crds'\x3e\r\n      \x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub3val~cpbtn' aria-label\x3d'$${nls.copyToClipboard}' title\x3d'$${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal3CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub4' class\x3d'coordformat sub4'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub4label' data-a11y-label-id\x3d'sub4Label' /\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub4Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub4val' class\x3d'jimu-input crds'\x3e\r\n      \x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub4val~cpbtn' aria-label\x3d'${nls.copyToClipboard} title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal4CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\"line-separator\"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e",
"url:dijit/templates/InlineEditBox.html":'\x3cspan data-dojo-attach-point\x3d"editNode" role\x3d"presentation" class\x3d"dijitReset dijitInline dijitOffScreen"\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"editorPlaceholder"\x3e\x3c/span\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"buttonContainer"\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button" data-dojo-props\x3d"label: \'${buttonSave}\', \'class\': \'saveButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"saveButton" data-dojo-attach-event\x3d"onClick:save"\x3e\x3c/button\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button"  data-dojo-props\x3d"label: \'${buttonCancel}\', \'class\': \'cancelButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:cancel"\x3e\x3c/button\r\n\t\x3e\x3c/span\r\n\x3e\x3c/span\x3e\r\n',
"url:widgets/GriddedReferenceGraphic/templates/ColorPickerEditor.html":'\x3cdiv class\x3d"colorPickerEditor"\x3e\r\n  \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"colorPicker"\x3e\x3c/div\x3e\r\n  \x3cspan class\x3d"trans"\x3e${nls.transparency}\x3c/span\x3e\r\n  \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\x3c/div\x3e\r\n  \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberSpinner" value\x3d"0"\r\n         data-dojo-attach-point\x3d"spinner" data-dojo-props\x3d"smallDelta:10,intermediateChanges:true,constraints: {min:0,max:100}"\x3e\r\n  \x3cspan class\x3d"percent-display"\x3e%\x3c/span\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:widgets/GriddedReferenceGraphic/templates/FontSetting.html":'\x3cdiv class\x3d"style-selector"\x3e\r\n  \x3cdiv class\x3d"setting-items font clearFix" data-dojo-attach-point\x3d"fontSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.font}"\x3e${nls.font}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cselect data-dojo-attach-point\x3d"fontSelect" data-dojo-props\x3d\'style:{width:"100%"}\' data-dojo-type\x3d"jimu/dijit/formSelect" aria-label\x3d"${nls.font}"\x3e\x3c/select\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"setting-items text-size clearFix" data-dojo-attach-point\x3d"textSizeSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.textSize}"\x3e${nls.textSize}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"text-size-group jimu-float-leading"\x3e\r\n        \x3c!--role and aria-label added run time--\x3e\r\n        \x3cselect data-dojo-type\x3d"dijit/form/ComboBox" data-dojo-attach-point\x3d"textSizeSelect"\x3e\x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"text-size-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"setting-items text-color clearFix" data-dojo-attach-point\x3d"textColorSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.textColor}"\x3e${nls.textColor}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"font-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"text-color-btn" data-dojo-attach-point\x3d"textColorBtn"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"font-group font-group-btns jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"font-btn jimu-float-leading bold" data-dojo-attach-point\x3d"bold" tabindex\x3d"0" role\x3d"button" aria-label\x3d"bold" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"font-btn jimu-float-leading italic" data-dojo-attach-point\x3d"italic" tabindex\x3d"0" role\x3d"button" aria-label\x3d"italic" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"font-btn jimu-float-leading underline" data-dojo-attach-point\x3d"underline" tabindex\x3d"0" role\x3d"button" aria-label\x3d"underline" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"setting-items text-color clearFix" data-dojo-attach-point\x3d"transparencySetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.transparency}"\x3e${nls.transparency}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"font-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"text-color-btn" data-dojo-attach-point\x3d"transparencySlider"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e      \r\n    \x3c/div\x3e\r\n  \x3c/div\x3e  \r\n  \x3cdiv class\x3d"setting-items halo-size clearFix" data-dojo-attach-point\x3d"haloSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.halo}"\x3e${nls.halo}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cselect data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"haloSizeSelect" aria-label\x3d"${nls.halo}"\x3e\x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"halo-color-btn" data-dojo-attach-point\x3d"haloColorBtn" aria-label\x3d"${nls.halo}"\x3e\x3c/div\x3e        \r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"label" title\x3d"${nls.show}"\x3e${nls.show}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cinput class\x3d"halo-toggle" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"showHalo" checked\x3d"true" aria-label\x3d"${nls.show}"/\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/GriddedReferenceGraphic/templates/TransparencyEditor.html":'\x3cdiv class\x3d"colorPickerEditor"\x3e\r\n  \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\x3c/div\x3e\r\n  \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberSpinner" value\x3d"0"\r\n         data-dojo-attach-point\x3d"spinner" data-dojo-props\x3d"smallDelta:10,intermediateChanges:true,constraints: {min:0,max:100}"\x3e\r\n  \x3cspan \x3e%\x3c/span\x3e\r\n\x3c/div\x3e\r\n\r\n',"url:widgets/GriddedReferenceGraphic/templates/GridSettings.html":'\x3cdiv\x3e       \r\n    \x3cdiv class\x3d"tabs" data-dojo-attach-point\x3d"tabsContainer"\x3e\r\n      \x3c!-- Grid Settings Tab --\x3e \r\n      \x3cdiv class\x3d"content-tab" data-dojo-attach-point\x3d"gridTab"\x3e\r\n        \r\n        \x3c!-- Grid Shape --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridShapeContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellShape}"\x3e\r\n                ${nls.gridSettings.cellShape}\x3c/div\x3e\r\n            \x3cselect class\x3d"GRGcellShapeSelect" data-dojo-attach-point\x3d"cellShape" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" aria-label\x3d"${nls.gridSettings.cellShape}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Units --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridUnitsContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellUnits}"\x3e\r\n                ${nls.gridSettings.cellUnits}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"cellUnits" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" aria-label\x3d"${nls.gridSettings.cellUnits}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Grid Origin --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridOriginContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.gridOrigin}"\x3e\r\n                ${nls.gridSettings.gridOrigin}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"gridOrigin" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" aria-label\x3d"${nls.gridSettings.gridOrigin}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Reference System --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridRefSystemContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis labelLeft" title\x3d"${nls.gridSettings.gridReferenceSystem}"\x3e\r\n                ${nls.gridSettings.gridReferenceSystem}\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis labelRight" title\x3d"${nls.gridSettings.gridDatum}"\x3e\r\n                ${nls.gridSettings.gridDatum}\x3c/div\x3e\r\n            \x3cselect class\x3d"referenceSystemSelect" data-dojo-attach-point\x3d"referenceSystem" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" aria-label\x3d"${nls.gridSettings.gridDatum}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Cell Outline Color --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellOutline}"\x3e\r\n                ${nls.gridSettings.cellOutline}\x3c/div\x3e\r\n          \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"cellOutlineColorPicker"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Cell fill Color --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellFill}"\x3e\r\n                ${nls.gridSettings.cellFill}\x3c/div\x3e\r\n          \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"cellFillColorPicker"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \r\n      \x3c!-- Label Settings Tab --\x3e\r\n      \x3cdiv class\x3d"content-tab" data-dojo-attach-point\x3d"labelTab"\x3e  \r\n        \x3c!-- Label Start Position Selector --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelStartPositionContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelStartPosition}"\x3e\r\n                ${nls.gridSettings.labelStartPosition}\x3c/div\x3e\r\n            \x3cselect class\x3d"GRGlabelStartPositionSelect" data-dojo-attach-point\x3d"labelStartPosition" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n                aria-label\x3d"${nls.gridSettings.labelStartPosition}" role\x3d"listbox"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Labelling Style without Reference System --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelStyleContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelType}"\x3e\r\n                ${nls.gridSettings.labelType}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelType" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" \r\n                aria-label\x3d"${nls.gridSettings.labelType}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Labelling Style with Reference System --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelStyleWithRefSysContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelType}"\x3e\r\n                ${nls.gridSettings.labelType}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelTypeWithRefSys" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" \r\n                aria-label\x3d"${nls.gridSettings.labelType}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Labelling direction --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelDirectionContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelDirection}"\x3e\r\n                ${nls.gridSettings.labelDirection}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelDirection" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" \r\n                aria-label\x3d"${nls.gridSettings.labelDirection}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Font Settings --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"fontSettingsContainer"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.labelStyle}"\x3e\r\n                ${nls.labelStyle}\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"fontSettingNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e        \r\n      \x3c/div\x3e  \r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/GriddedReferenceGraphic/Widget.html":'\x3cdiv class\x3d"GRGDrafterMainContainer GRGDrafterFullHeight" data-dojo-attach-point\x3d"mainNode"\x3e\r\n  \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterFullWidth" data-dojo-attach-point\x3d"widgetMainNode"\x3e\r\n    \x3c!---------------\r\n      Main Page Node\r\n    -----------------\x3e\r\n    \x3cdiv class\x3d"esirCTMainPage" data-dojo-attach-point\x3d"mainPageNode"\x3e\r\n      \x3c!-- Create From Area --\x3e\r\n      \x3cdiv class\x3d"GRGDrafterMainPageRowBlock"\x3e\r\n        \x3cdiv class\x3d"GRGDrafterMainPageRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer"\r\n            title\x3d"${nls.newGRGFromAreaButtonLabel}" data-dojo-attach-point\x3d"newGRGAreaButton"\r\n            tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.newGRGFromAreaButtonLabel}"\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis SubTitle" title\x3d"${nls.newGRGFromAreaButtonLabel}"\x3e\r\n            ${nls.newGRGFromAreaButtonLabel}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3c!-- Create From Area Options --\x3e\r\n        \x3cdiv class\x3d"controlGroupHidden" data-dojo-attach-point\x3d"fromAreaContainer"\x3e\r\n          \x3c!-- Define by size --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByDimension GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGBySizeButtonLabel}"\x3e\r\n              ${nls.newGRGBySizeButtonLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight"\r\n              title\x3d"${nls.newGRGBySizeButtonLabel}" data-dojo-attach-point\x3d"newAreaGRGBySizeButton"\r\n              tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.newGRGBySizeButtonLabel}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Define from reference system --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByRefSystemButton GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGFromRefSystemButtonLabel}"\x3e\r\n              ${nls.newGRGFromRefSystemButtonLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight"\r\n              title\x3d"${nls.newGRGFromRefSystemButtonLabel}" data-dojo-attach-point\x3d"newAreaGRGFromRefSystemButton"\r\n              tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.newGRGFromRefSystemButtonLabel}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Create From Point --\x3e\r\n      \x3cdiv class\x3d"GRGDrafterMainPageRowBlock"\x3e\r\n        \x3cdiv class\x3d"GRGDrafterMainPageRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer"\r\n            title\x3d"${nls.newGRGFromPointButtonLabel}" data-dojo-attach-point\x3d"newGRGPointButton"\r\n            tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.newGRGFromPointButtonLabel}"\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis SubTitle" title\x3d"${nls.newGRGFromPointButtonLabel}"\x3e\r\n            ${nls.newGRGFromPointButtonLabel}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3c!-- Create From Point Options --\x3e\r\n        \x3cdiv class\x3d"controlGroupHidden" data-dojo-attach-point\x3d"fromPointContainer"\x3e\r\n          \x3c!-- Define by size --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByDimension GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGBySizeButtonLabel}"\x3e\r\n              ${nls.newGRGBySizeButtonLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight"\r\n              title\x3d"${nls.newGRGBySizeButtonLabel}" data-dojo-attach-point\x3d"newPointGRGBySizeButton"\r\n              tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.newGRGBySizeButtonLabel}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Define from reference system --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByRefSystemButton GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGFromRefSystemButtonLabel}"\x3e\r\n              ${nls.newGRGFromRefSystemButtonLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight"\r\n              title\x3d"${nls.newGRGFromRefSystemButtonLabel}" data-dojo-attach-point\x3d"newPointGRGFromRefSystemButton"\r\n              tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.newGRGFromRefSystemButtonLabel}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Define from reference system --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByTimeButton GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGByTimeLabel}"\x3e\r\n              ${nls.newGRGByTimeLabel}\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight"\r\n              title\x3d"${nls.newGRGByTimeLabel}" data-dojo-attach-point\x3d"newPointGRGFromTimeButton"\r\n              tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.newGRGByTimeLabel}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------------\r\n      GRG From Area By Size Node\r\n    -----------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgAreaBySizePageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgAreaBySizePanelBackButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaBySizeTitle}"\x3e\r\n          ${nls.newGRGAreaBySizeTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgAreaBySizeSettingsButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.settingsTitle}"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Area Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Area Tool --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRowPaddingTop20"\r\n            data-dojo-attach-point\x3d"grgAreaBySizeDrawContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterFullWidth"\x3e\r\n              \x3cdiv\x3e\r\n                \x3cdiv class\x3d"GRGDrafterDoubleButtonLabel GRGDrafterEllipsis"\r\n                  title\x3d"${nls.newGRGAreaBySizeDefineAreaLabel}"\x3e${nls.newGRGAreaBySizeDefineAreaLabel}\x3c/div\x3e\r\n                \x3cdiv title\x3d"${nls.addGRGAreaPolygonToolTip}" class\x3d"jimu-icon polygonBtn"\r\n                  data-dojo-attach-point\x3d"grgAreaBySizeDrawPolygonIcon" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.addGRGAreaPolygonToolTip}"\x3e\x3c/div\x3e\r\n                \x3cdiv title\x3d"${nls.addGRGAreaExtentToolTip}" class\x3d"jimu-icon extentBtn"\r\n                  data-dojo-attach-point\x3d"grgAreaBySizeDrawExtentIcon" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.addGRGAreaExtentToolTip}"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Set number of cells checkbox --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidthAndPadding"\x3e\r\n            \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox"\r\n              data-dojo-attach-point\x3d"setNumberRowsColumns" checked\x3d"false" aria-label\x3d"${nls.numberRowsColumnsLabel}"/\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.numberRowsColumnsLabel}\x3c/label\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Nummber of Cells Horizontal and Vertical --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"numberOfCellsContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsHorizontal}"\x3e\r\n                ${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"cellHorizontal" value\x3d"10"\r\n                disabled\x3d\'true\' aria-label\x3d\'${nls.numberOfCellsHorizontal}\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsVertical}"\x3e\r\n                ${nls.numberOfCellsVertical}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"cellVertical" value\x3d"10"\r\n                disabled\x3d\'true\' aria-label\x3d\'${nls.numberOfCellsVertical}\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- GRG Cell Width \x26 Height --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3c!-- GRG Cell Width --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellWidth}"\x3e${nls.cellWidth}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0,places:2},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgAreaBySizeCellWidth"\r\n                value\x3d"1000" disabled\x3d\'true\' aria-label\x3d\'${nls.cellWidth}\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- GRG Cell Height --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellHeight}"\x3e${nls.cellHeight}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0,places:2},\r\n                        invalidMessage:"${nls.invalidNumberMessage}",\r\n                        required: true,\r\n                        rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgAreaBySizeCellHeight"\r\n                value\x3d"1000" disabled\x3d\'true\' aria-label\x3d\'${nls.cellHeight}\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Rotation --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.rotation}"\x3e${nls.rotation}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:-89.9,max:89.9},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.gridAngleInvalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgAreaBySizeRotation" value\x3d"0" disabled\x3d\'true\' aria-label\x3d\'${nls.rotation}\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaBySizeCreateGRGButton\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.createGRGBtn}"\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaBySizeClearGRGButton\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGRGBtn}"\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!----------------------------------\r\n      GRG From Area By Reference System\r\n    ------------------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgAreaByRefSystemPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgAreaByRefSystemPanelBackButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaByRefSystemTitle}"\x3e\r\n          ${nls.newGRGAreaByRefSystemTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgAreaByRefSystemSettingsButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.settingsTitle}"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Area Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Area Tool --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRowPaddingTop20"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterFullWidth" data-dojo-attach-point\x3d"grgAreaByRefSystemDrawContainer"\x3e\r\n              \x3cdiv\x3e\r\n                \x3cdiv class\x3d"GRGDrafterButtonLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaBySizeDefineAreaLabel}"\x3e\r\n                  ${nls.newGRGAreaBySizeDefineAreaLabel}\x3c/div\x3e\r\n                \x3cdiv title\x3d"${nls.addGRGAreaExtentToolTip}" class\x3d"jimu-icon extentBtn"\r\n                  data-dojo-attach-point\x3d"grgAreaByRefSystemDrawIcon" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.addGRGAreaExtentToolTip}"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Grid Size DropDown --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.gridSize}"\x3e${nls.gridSize}\x3c/div\x3e\r\n            \x3cselect style\x3d"width: 100%" class\x3d"GRGGridSizeSelect" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n              data-dojo-attach-point\x3d"grgAreaByRefSystemGridSize" aria-label\x3d"${nls.gridSize}"\x3e\r\n              \x3coption value\x3d"UTM" selected\x3d"selected"\x3e${nls.UTMZoneandBand}\x3c/option\x3e\r\n              \x3coption value\x3d"100000"\x3e${nls.100000m}\x3c/option\x3e\r\n              \x3coption value\x3d"10000"\x3e${nls.10000m}\x3c/option\x3e\r\n              \x3coption value\x3d"1000"\x3e${nls.1000m}\x3c/option\x3e\r\n              \x3coption value\x3d"100"\x3e${nls.100m}\x3c/option\x3e\r\n              \x3coption value\x3d"10"\x3e${nls.10m}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Clip Grid to GRG Area Toggle --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv\x3e\r\n              \x3cdiv class\x3d"GRGDrafterToggleLabel GRGDrafterEllipsis" title\x3d"${nls.clipGrid}"\x3e${nls.clipGrid}\x3c/div\x3e\r\n              \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                data-dojo-attach-point\x3d"grgAreaByRefSystemClipToggle" checked\x3d"false" aria-label\x3d"${nls.clipGrid}"/\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Label Format--\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"grgAreaByRefSystemLabelFormat"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.labelFormat}"\x3e${nls.labelFormat}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput" style\x3d"width: calc(100% - 20px)"\r\n              data-dojo-attach-point\x3d"grgAreaByRefLabelFormat" value\x3d"Z" aria-label\x3d"${nls.labelFormat}"\x3e\x3c/input\x3e\r\n            \x3cdiv title\x3d"${nls.helpIconTooltip}" class\x3d"jimu-icon helpBtn" data-dojo-attach-point\x3d"helpBtnForArea" tabindex\x3d"0" role\x3d"tooltip" aria-label\x3d"${nls.helpIconTooltip}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaByRefSystemCreateGRGButton\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.createGRGBtn}"\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaByRefSystemClearGRGButton\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGRGBtn}"\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-------------------------------------\r\n      GRG From Area From Non Standard Grid\r\n    --------------------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgAreaFromNonStandardPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgAreaByNonStandardPanelBackButton"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaFromNonStandardTitle}"\x3e\r\n          ${nls.newGRGAreaFromNonStandardTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgAreaByNonStandardSettingsButton"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Area Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- GRG Layer Name --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"Area GRG by Reference System"\x3eArea GRG from Non\r\n              Standard Grid To Do\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!----------------------------\r\n      GRG From Point by Size Node\r\n    ------------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgPointBySizePageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgPointBySizePanelBackButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGPointBySizeTitle}"\x3e\r\n          ${nls.newGRGPointBySizeTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgPointBySizeSettingsButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.settingsTitle}"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Point Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Point Coordinate Input --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"newGRGPointBySizeOriginCoordsContainer"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Nummber of Cells Horizontal and Vertical --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsHorizontal}"\x3e\r\n                ${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointBySizeCellHorizontal" value\x3d"5" aria-label\x3d"${nls.numberOfCellsHorizontal}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsVertical}"\x3e\r\n                ${nls.numberOfCellsVertical}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointBySizeCellVertical" value\x3d"5" aria-label\x3d"${nls.numberOfCellsVertical}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- GRG Cell Width \x26 Height --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3c!-- GRG Cell Width --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellWidth}"\x3e${nls.cellWidth}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointBySizeCellWidth"\r\n                value\x3d"1000" aria-label\x3d"${nls.cellWidth}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- GRG Cell Height --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellHeight}"\x3e${nls.cellHeight}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0},\r\n                        invalidMessage:"${nls.invalidNumberMessage}",\r\n                        required: true,\r\n                        rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointBySizeCellHeight"\r\n                value\x3d"1000" aria-label\x3d"${nls.cellHeight}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Grid Angle --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.gridAngle}"\x3e${nls.gridAngle}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n              data-dojo-props\x3d\'constraints:{min:-89.9,max:89.9,places:1},\r\n                        invalidMessage:"${nls.invalidNumberMessage}",\r\n                        required: true,\r\n                        rangeMessage:"${nls.gridAngleInvalidRangeMessage}"\' data-dojo-attach-point\x3d"gridAnglePoint"\r\n              value\x3d"0" aria-label\x3d"${nls.gridAngle}" \x3e\x3c/input\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointBySizeCreateGRGButton\'\r\n              tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.createGRGBtn}"\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointBySizeClearGRGButton\'\r\n              tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGRGBtn}"\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-----------------------------------\r\n      GRG From Point By Reference System\r\n    -------------------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgPointByRefSystemPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgPointByRefSystemPanelBackButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGPointByRefSystemTitle}"\x3e\r\n          ${nls.newGRGPointByRefSystemTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgPointByRefSystemSettingsButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.settingsTitle}"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Point Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Point Coordinate Input --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"newGRGPointByRefSystemOriginCoordsContainer"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Grid Size DropDown --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.gridSize}"\x3e${nls.gridSize}\x3c/div\x3e\r\n            \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n              data-dojo-attach-point\x3d"grgPointByRefSystemGridSize" aria-label\x3d"${nls.gridSize}"\x3e\r\n              \x3coption value\x3d"UTM" selected\x3d"selected"\x3e${nls.UTMZoneandBand}\x3c/option\x3e\r\n              \x3coption value\x3d"100000"\x3e${nls.100000m}\x3c/option\x3e\r\n              \x3coption value\x3d"10000"\x3e${nls.10000m}\x3c/option\x3e\r\n              \x3coption value\x3d"1000"\x3e${nls.1000m}\x3c/option\x3e\r\n              \x3coption value\x3d"100"\x3e${nls.100m}\x3c/option\x3e\r\n              \x3coption value\x3d"10"\x3e${nls.10m}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Nummber of Cells Horizontal and Vertical --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsHorizontal}"\x3e\r\n                ${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByRefCellHorizontal" value\x3d"5" aria-label\x3d"${nls.numberOfCellsHorizontal}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsVertical}"\x3e\r\n                ${nls.numberOfCellsVertical}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByRefCellVertical"\r\n                value\x3d"5" aria-label\x3d"${nls.numberOfCellsVertical}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Label Format--\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"grgPointByRefSystemLabelFormat"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.labelFormat}"\x3e${nls.labelFormat}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput" style\x3d"width: calc(100% - 20px)"\r\n              data-dojo-attach-point\x3d"grgPointByRefLabelFormat" value\x3d"Z" aria-label\x3d"${nls.labelFormat}"\x3e\x3c/input\x3e\r\n            \x3cdiv title\x3d"${nls.helpIconTooltip}" class\x3d"jimu-icon helpBtn" data-dojo-attach-point\x3d"helpBtnForPt" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.helpIconTooltip}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointByRefSystemCreateGRGButton\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.createGRGBtn}"\x3e${nls.createGRGBtn}\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointByRefSystemClearGRGButton\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGRGBtn}"\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!---------------------------------\r\n      GRG From Point By Time and Speed\r\n    -----------------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgPointByTimePageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgPointByTimeBackButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGPointByTimeTitle}"\x3e\r\n          ${nls.newGRGPointByTimeTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgPointByTimeSettingsButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.settingsTitle}"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Point Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Point Coordinate Input --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"newGRGPointByTimeOriginCoordsContainer"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Time --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"timeContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.time}"\x3e${nls.time}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:2},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByTimeTime"\r\n                value\x3d"1" disabled\x3d\'false\' aria-label\x3d"${nls.time}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d""\x3e\x26nbsp;\x3c/div\x3e\r\n              \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n                data-dojo-attach-point\x3d"grgPointByTimeTimeUnits"\x3e\r\n                \x3coption value\x3d"3600" selected\x3d"selected"\x3e${nls.hours}\x3c/option\x3e\r\n                \x3coption value\x3d"60"\x3e${nls.minutes}\x3c/option\x3e\r\n                \x3coption value\x3d"1"\x3e${nls.seconds}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Rate --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"rateContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.rate}"\x3e${nls.rate}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:2},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByTimeRate"\r\n                value\x3d"10" disabled\x3d\'false\' aria-label\x3d"${nls.rate}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d""\x3e\x26nbsp;\x3c/div\x3e\r\n              \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n                data-dojo-attach-point\x3d"grgPointByTimeRateUnits"\x3e\r\n                \x3coption value\x3d"0.3048;1"\x3e${nls.ftPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"0.3048;3600"\x3e${nls.ftPerHour}\x3c/option\x3e\r\n                \x3coption value\x3d"1000;1"\x3e${nls.kmPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"1000;3600" selected\x3d"selected"\x3e${nls.kmPerHour}\x3c/option\x3e\r\n                \x3coption value\x3d"1;1"\x3e${nls.mPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"1;3600"\x3e${nls.mPerHour}\x3c/option\x3e\r\n                \x3coption value\x3d"1609.344;1"\x3e${nls.miPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"1609.344;3600"\x3e${nls.miPerHour}\x3c/option\x3e\r\n                \x3coption value\x3d"1852;1"\x3e${nls.nMPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"1852;3600"\x3e${nls.nMPerHour}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Set number of cells checkbox --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidthAndPadding"\x3e\r\n            \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox"\r\n              data-dojo-attach-point\x3d"setNumberRowsColumnsTime" checked\x3d"true" aria-label\x3d"${nls.numberRowsColumnsLabel}"/\x3e\r\n            \x3clabel class\x3d"GRGCellsLabel" data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.numberRowsColumnsLabel}\x3c/label\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Number of Cells Horizontal and Vertical --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"numberOfCellsContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsHorizontal}"\x3e\r\n                ${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByTimeCellHorizontal" value\x3d"10" disabled\x3d\'false\' aria-label\x3d"${nls.numberOfCellsHorizontal}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsVertical}"\x3e\r\n                ${nls.numberOfCellsVertical}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByTimeCellVertical" value\x3d"10" disabled\x3d\'false\' aria-label\x3d"${nls.numberOfCellsVertical}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- GRG Cell Width \x26 Height --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3c!-- GRG Cell Width --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellWidth}"\x3e${nls.cellWidth}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0,places:2},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByTimeCellWidth"\r\n                value\x3d"1000" disabled\x3d\'true\' aria-label\x3d"${nls.cellWidth}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- GRG Cell Height --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellHeight}"\x3e${nls.cellHeight}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0,places:2},\r\n                        invalidMessage:"${nls.invalidNumberMessage}",\r\n                        required: true,\r\n                        rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByTimeCellHeight"\r\n                value\x3d"1000" disabled\x3d\'true\' aria-label\x3d"${nls.cellHeight}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Rotation --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.rotation}"\x3e${nls.rotation}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:-89.9,max:89.9,places:1},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.gridAngleInvalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByTimeRotation" value\x3d"0" disabled\x3d\'false\' aria-label\x3d"${nls.rotation}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointByTimeCreateGRGButton\'\r\n              tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.createGRGBtn}"\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointByTimeClearGRGButton\'\r\n              tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGRGBtn}"\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!---------\r\n      Settings\r\n    -----------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterHidden GRGDrafterFullHeight" data-dojo-attach-point\x3d"settingsPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingHeader"\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"gridSettingsPanelBackButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.settingsTitle}"\x3e\r\n          ${nls.settingsTitle}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"GRGDrafterSettingsNode" data-dojo-attach-point\x3d"gridSettingsNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--------\r\n      Publish\r\n    ----------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterHidden GRGDrafterFullHeight" data-dojo-attach-point\x3d"publishPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingHeader"\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"publishPanelBackButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.publishTitle}"\x3e\r\n          ${nls.publishTitle}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- GRG Layer Name --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.GRGLayerName}"\x3e${nls.GRGLayerName}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput controlGroupHidden" style\x3d"width: 100%;"\r\n              data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"addGRGNameArea"\r\n              data-dojo-props\x3d"regExp:\'[a-zA-Z0-9_ -]*\', missingMessage:\'${nls.missingGRGLayerName}\'"\r\n              required\x3d"true" aria-label\x3d"${nls.GRGLayerName}"\x3e\x3c/input\x3e\r\n            \x3cselect class\x3d"SelectStyle" aria-label\x3d"${nls.GRGLayerName}" data-dojo-type\x3d"jimu/dijit/formSelect" tabindex\x3d"0"\r\n\t\t\t  \tdata-dojo-attach-point\x3d"featureLayerList"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Publish to new layer --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterToggleLabel GRGDrafterEllipsis" title\x3d"${nls.publishToNewLayer}"\x3e\r\n              ${nls.publishToNewLayer}\x3c/div\x3e\r\n            \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox"\r\n              data-dojo-attach-point\x3d"publishNewLayer" aria-label\x3d"${nls.publishToNewLayer}"/\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Show Labels Toggle --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv\x3e\r\n              \x3cdiv class\x3d"GRGDrafterToggleLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.showLabels}"\x3e\r\n                ${nls.gridSettings.showLabels}\x3c/div\x3e\r\n              \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                data-dojo-attach-point\x3d"settingsShowLabelsToggle" checked\x3d"true" aria-label\x3d"${nls.gridSettings.showLabels}"/\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Publish GRG Button --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterBtnContainer"\x3e\r\n            \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaBySizePublishGRGButton\'\r\n            tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.publishGRGBtn}"\x3e${nls.publishGRGBtn}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Publishing Message --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterPublishMessage" data-dojo-attach-point\x3d"publishMessage"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/GriddedReferenceGraphic/css/style.css":'.GRGDrafterMainContainer {min-width: 222px;}.jimu-widget-GRGDrafter .GRGDrafterFullHeight {height: 100%;}.jimu-widget-GRGDrafter .GRGDrafterFullWidth {width: 100%;}.jimu-widget-GRGDrafter .GRGDrafterFullWidthAndPadding {width: 100%; padding-top: 12px; padding-bottom: 8px;}.jimu-widget-GRGDrafter .GRGDrafterHalfWidthLeft {width: 50%;}.jimu-widget-GRGDrafter .GRGDrafterHalfWidthRight {padding-left: 10px; width: 50%;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterHalfWidthRight {padding-left: 0px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterHalfWidthRight {padding-right: 2px;}.jimu-widget-GRGDrafter .GRGDrafterHalfWidthContainer {display: flex;}.jimu-widget-GRGDrafter .GRGDrafterEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-GRGDrafter .GRGDrafterPointer {cursor: pointer;}.jimu-widget-GRGDrafter .GRGDrafterMainPageRowBlock {display: block;}.jimu-widget-GRGDrafter .GRGDrafterMainPageRow {margin: 10px 10px 10px 10px; display: inline-flex;}.jimu-widget-GRGDrafter .GRGDrafterMainButtonIcon {margin-top: 6px; height: 16px; width: 16px;}.jimu-widget-GRGDrafter .GRGDrafterButtonIcon {height: 24px; width: 24px; float: left;}.jimu-widget-GRGDrafter .GRGFloatRight {float: right;}.jimu-rtl .jimu-widget-GRGDrafter .GRGFloatRight {float: left;}.jimu-widget-GRGDrafter .GRGDrafterMainPageRowItem {width: calc(100% - 40px); margin: 5px 25px 5px 25px; display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterButtonLabel {float: left; width: calc(100% - 30px); padding: 5px 5px 0px 0;}.jimu-widget-GRGDrafter .SelectStyle {height: 30px; color: #7d7d7d; padding-left: 5px; font-size: 13px; width: 100%; font-family: \'Avenir Medium\'; margin: 0 0 8px 0;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterButtonLabel {float: right;}.jimu-widget-GRGDrafter .GRGDrafterDoubleButtonLabel {float: left; width: calc(100% - 65px); padding: 5px 5px 0px 0;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterDoubleButtonLabel {float: right;}.jimu-widget-GRGDrafter .GRGDrafterToggleLabel {float: left; width: calc(100% - 35px); padding: 0;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterToggleLabel {float: right; padding: 1px 0 0 0;}.jimu-widget-GRGDrafter .GRGDrafterInputLabel {float: left; padding: 5px 5px 0px 0;}.jimu-widget-GRGDrafter .GRGNewRightButton {background: url("./images/arrow-right_black.png") no-repeat;}.jimu-rtl .jimu-widget-GRGDrafter .GRGNewRightButton {transform: rotate(180deg); float: left;}.jimu-widget-GRGDrafter .GRGNewRightButton:hover {background: url("./images/arrow-right_black_hover.png") no-repeat;}.jimu-widget-GRGDrafter .GRGNewDownButton {background: url("./images/arrow-down_black.png") no-repeat; margin-top: 9px;}.jimu-widget-GRGDrafter .GRGNewDownButton:hover {background: url("./images/arrow-down_black_hover.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGByDimension {background: url("./images/byDimension.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGByRefSystemButton {background: url("./images/byReferenceSystem.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGByTimeButton {background: url("./images/byTime.png") no-repeat;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterButtonIcon {float: right;}.jimu-widget-GRGDrafter .GRGDrafterPublishMessage {float: left; line-height: 16px; padding: 18px 0px 0px 0; font-weight: bold; display: inline-block; word-break: break-all;}.jimu-widget-GRGDrafter .GRGDrafterPanelRow {margin: 10px 10px 10px 10px; display: block;}.jimu-widget-GRGDrafter .claro .dijitSelect,.claro .dijitSelect .dijitButtonContents,.claro .dijitTextBox {width: calc(100% - 60px); overflow: hidden; text-overflow: ellipsis; margin-bottom: 8px;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-widget-GRGDrafter .GRGDrafterSettingsIcon {background-image: url(\'./images/settings_black.png\'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterSettingsIcon:Hover {background-image: url(\'./images/settings_black_hover.png\'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-widget-GRGDrafter .settingsLocked {background-image: url(\'./images/settings_locked.png\'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-widget-GRGDrafter .dijitTextBox .dijitInputInner {height: 18px !important; text-align: left; line-height: 0px !important; padding-bottom: 6px !important;}.jimu-widget-GRGDrafter .dijitTextBoxFocused .dijitInputContainer {background: transparent;}.jimu-widget-GRGDrafter .GRGDrafterHidden {display: none;}.jimu-rtl .jimu-widget-GRGDrafter .GRGCellsLabel {float: right;}.jimu-widget-GRGDrafter .GRGDrafterSettingsRow {width: 100%; display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterSettingsButtonIcon {margin-top: 10px; height: 20px; width: 25px; float: right; background-size: 45px;}.jimu-widget-GRGDrafter .GRGDrafterLabelSettingsDownButton {background: url("../images/down-arrow.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterLabelSettingsUpButton {background: url("../images/up-arrow.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterSettingsNode {width: 100%; height: calc(100% - 30px); display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterSettingsContainer {margin: 10px; display: inline-block; width: calc(100% - 20px);}.jimu-widget-GRGDrafter .GRGDrafterSettingRow {padding-bottom: 6px; padding-top: 6px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterSettingRow {padding-right: 2px;}.jimu-widget-GRGDrafter .GRGDrafterSettingRowPaddingTop20 {padding-top: 20px;}.jimu-widget-GRGDrafter .GRGDrafterDropdownLabel {padding-bottom: 5px;}.jimu-widget-GRGDrafter .GRGDrafterSettingHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-widget-GRGDrafter .GRGDrafterBackButton {overflow: hidden; width: 15px; float: left;}.jimu-widget-GRGDrafter .GRGDrafterTitleDiv {line-height: 10px; font-weight: bold; text-align: center; width: calc(100% - 50px); padding: 5px; display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow {background-image: url(\'./images/left-arrow_black.png\'); float: left; width: 15px; height: 20px; background-repeat: no-repeat; background-position: center center;}.jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow:hover {background-image: url(\'./images/left-arrow_black_hover.png\');}.jimu-widget-GRGDrafter .dijitSelect .dijitButtonContents {border-style: none none none none; background-color: #fafafc;}.jimu-widget-GRGDrafter .dijitSelect .dijitButtonContentsDartTheme {background-color: inherit;}.jimu-widget-GRGDrafter .dijitSelect .dijitArrowButton {background-color: #fafafc; background-image: none; border-color: #fafafc;}.jimu-widget-GRGDrafter .dijitSelect .dijitArrowButtonDartTheme {background-color: rgba(0, 0, 0, 0.5) !important;}.jimu-widget-GRGDrafter .dijitMenuItem {color: #7989a0;}.jimu-widget-GRGDrafter .dijitSelect .dijitInputField {margin-right: 2px;}.jimu-widget-GRGDrafter .switch-toggle-group {padding: 5px;}.jimu-widget-GRGDrafter .switch-toggle-group .checkbox-inline {padding-left: 36px; vertical-align: top;}.jimu-widget-GRGDrafter .switch-toggle-group .switch-toggle.dijitCheckBox {margin-left: -36px;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox {height: 16px; width: 28px; border: 0 none; background: #adadad; position: relative; display: inline-block; cursor: pointer; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox:before {content: ""; background: #f8f8f8; position: absolute; padding: 0; height: 12px; width: 12px; left: auto; right: 14px; top: 2px; z-index: 1; -webkit-transition: right 0.3s; -moz-transition: right 0.3s; -o-transition: right 0.3s; transition: right 0.3s; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox input {width: 100%; height: 100%; position: absolute; left: 0; z-index: 2;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox.dijitCheckBoxChecked {background: #50ad4e;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox.dijitCheckBoxChecked:before {right: 2px;}.jimu-widget-GRGDrafter .jimu-tab3 .tab-item-td.jimu-state-active {border-bottom: 3px solid #000; font-family: "Avenir Heavy"; color: #000000;}.jimu-widget-GRGDrafter .jimu-tab3 .tab-item-td {font-size: 12px;}.jimu-widget-GRGDrafter .tabs .titles {font-weight: bold; font-family: "Avenir Medium"; font-size: 12px; margin: 20px 0 10px 0;}.jimu-widget-GRGDrafter .tabs .unit-item {margin: 15px 5px 5px 5px; line-height: 18px; height: 18px; vertical-align: middle;}.jimu-widget-GRGDrafter .dijitTextBox .dijitPlaceHolder {font-size: 12px;}.jimu-widget-GRGDrafter .dijitTextBoxError {border-color: #d9dde0 !important; box-shadow: inset 0 0 0 2px #d46464;}.jimu-widget-GRGDrafter .GRGlabelStartPositionSelect:focus,.jimu-widget-GRGDrafter .GRGcellShapeSelect:focus,.jimu-widget-GRGDrafter .style-selector .jimu-color-picker:focus,.jimu-widget-GRGDrafter .GRGGridSizeSelect:focus,.jimu-widget-GRGDrafter .GRGDrafterMainButtonIcon:focus,.jimu-widget-GRGDrafter .GRGDrafterBackButton:focus,.jimu-widget-GRGDrafter .referenceSystemSelect:focus {outline: 2px solid #24B5CC !important; outline-offset: -2px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterInputLabel {float: right; padding: 7px 5px 0px 0px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow {float: right; margin: 0px 0px 00px 10px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterBackButton {float: right;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterSettingsIcon {float: left;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow {transform: rotate(180deg);}.jimu-rtl .jimu-widget-GRGDrafter .dijitSelect .dijitInputField {margin-left: 8px; margin-right: 0;}.SubTitle {font-weight: bold;}.jimu-widget-GRGDrafter .helpBtn {float: right; background: url(./images/help_black.png); background-repeat: no-repeat; background-color: transparent; width: 16px; height: 16px; margin-top: 6px;}.jimu-rtl .jimu-widget-GRGDrafter .helpBtn {float: left;}.jimu-widget-GRGDrafter .helpBtn:hover {float: right; background: url(./images/help_black_hover.png); background-repeat: no-repeat; background-color: transparent; width: 16px; height: 16px; margin-top: 6px;}.jimu-rtl .jimu-widget-GRGDrafter .helpBtn:hover {float: left;}.jimu-widget-GRGDrafter .polygonBtn {display: inline-block; background: url(./images/polygon_default.png); background-repeat: no-repeat; background-color: transparent; width: 30px; height: 30px;}.jimu-widget-GRGDrafter .polygonBtn:hover {background: url(\'./images/polygon_gray_hover.png\'); background-repeat: no-repeat;}.jimu-widget-GRGDrafter .jimu-polygon-active {background: url(\'./images/polygon_gray_hover.png\'); background-repeat: no-repeat; border: none;}.jimu-widget-GRGDrafter .extentBtn {display: inline-block; background: url(./images/extent_default.png); background-repeat: no-repeat; background-color: transparent; width: 30px; height: 30px;}.jimu-widget-GRGDrafter .extentBtn:hover {background: url(\'./images/extent_gray_hover.png\'); background-repeat: no-repeat;}.jimu-widget-GRGDrafter .jimu-extent-active {background: url(\'./images/extent_gray_hover.png\'); background-repeat: no-repeat; border: none;}.btnContainer {text-align: right; margin-top: 15px;}.jimu-widget-GRGDrafter .GRGDrafterBtnContainer {text-align: right; margin-top: 15px; display: grid;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterBtnContainer {padding-right: 2px;}.jimu-widget-GRGDrafter .controlGroupHidden {display: none;}.jimu-widget-GRGDrafter .controlItem {display: flex;}.jimu-widget-GRGDrafter .jimu-btn {margin-bottom: 6px;}.jimu-widget-GRGDrafter .jimu-coordinate-control .coordLabel {font-size: 12px;}.jimu-widget-GRGDrafter .jimu-coordinate-control textarea {width: 100%;}.jimu-widget-GRGDrafter .jimu-coordinate-control .add-with-icon.coordInput {width: calc(100% - 60px);}.jimu-widget-GRGDrafter .dijitSlider {margin-left: 10px; margin-right: auto; margin-top: 14px; width: calc(100% - 212px); width: -moz-calc(100% - 212px);}.jimu-rtl .jimu-widget-GRGDrafter .dijitSlider {margin-left: auto; margin-right: 10px;}.jimu-widget-GRGDrafter .dijitSlider .dijitSliderImageHandleH {top: -10px; width: 20px; height: 20px;}.jimu-widget-GRGDrafter .colorPickerEditor {display: inline-flex; width: 100%;}.jimu-widget-GRGDrafter .percent-display {padding: 7px 0 0 2px;}.jimu-widget-GRGDrafter .colorPickerEditor .jimu-color-picker {display: inline-block; width: 25px; height: 25px;}.jimu-widget-GRGDrafter .colorPickerEditor .dijitSpinner.dijitNumberTextBox.dijitValidationTextBox {width: 65px; height: 30px;}.jimu-widget-GRGDrafter .dijitSliderImageHandleH {top: -7px;}.jimu-widget-GRGDrafter .dijitSliderThumbHover {background-image: url("./images/sliderball.svg"); background-position: 0 0;}.jimu-widget-GRGDrafter .dijitSliderImageHandle.dijitSliderImageHandleH {background-image: url("./images/sliderball.svg"); background-position: 0 0;}.jimu-widget-GRGDrafter .dijitSliderImageHandle.dijitSliderImageHandleH.dojoMoveItem {background-image: url("./images/sliderball.svg"); background-position: 0 0;}.jimu-widget-GRGDrafter .dijitSlider .dijitSliderProgressBarH,.jimu-widget-GRGDrafter .dijitSlider .dijitSliderLeftBumper {border-color: #000; background-color: #000; background-image: -webkit-linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px); background-image: -o-linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px); background-image: linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px);}.jimu-widget-GRGDrafter .dijitSlider .dijitSliderRemainingBarH,.jimu-widget-GRGDrafter .dijitSlider .dijitSliderRightBumper {border-color: #d7d7d7; background-color: #d7d7d7;}.jimu-widget-GRGDrafter .colorPickerEditor .trans {font-family: "Avenir Light"; font-size: 12px; padding: 5px 5px 0 5px; letter-spacing: 0.33px;}.jimu-widget-GRGDrafter .sliderbar {width: 60px;}.jimu-widget-GRGDrafter .style-selector .clearFix {*overflow: hidden; *zoom: 1}.jimu-widget-GRGDrafter .style-selector .clearFix:after {display: table; content: ""; width: 0; clear: both}.jimu-widget-GRGDrafter .style-selector .hide {display: none}.jimu-widget-GRGDrafter .settings-container .title {font-size: 14px; color: #000000; letter-spacing: 0.39px; margin-bottom: 20px;}.jimu-widget-GRGDrafter .settings-container .label {font-size: 12px; color: #282828; letter-spacing: 0.33px; line-height: 30px;}.jimu-widget-GRGDrafter .style-selector .label {margin: 0 0; max-width: 160px; line-height: 30px; font-size: 12px; vertical-align: middle; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-GRGDrafter .style-selector .dijitTextBox,.jimu-widget-GRGDrafter .style-selector .dijitSelect {width: 100%; height: 30px; border: 1px solid #D7D7D7;}.jimu-widget-GRGDrafter .style-selector .jimu-color-picker {width: 40px !important; height: 30px !important; border: 1px solid #D7D7D7 !important;}.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitArrowButtonContainer {border: none;}.jimu-widget-GRGDrafter .style-selector .dijitDownArrowButton .dijitButtonContents,.jimu-widget-GRGDrafter .style-selector .dijitComboBox .dijitDownArrowButton,.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitDownArrowButton {border: none;}.jimu-widget-GRGDrafter .style-selector .dijitTextBox .dijitInputInner {padding: 1px 0 0 0; font-size: 12px; font-style: normal; height: 28px; line-height: 28px;}.jimu-widget-GRGDrafter .style-selector .dijitSelectLabel {font-size: 12px;}.jimu-widget-GRGDrafter .claro .dijitSelectLabel {padding: 1px 0;}.jimu-widget-GRGDrafter .style-selector .dijitSelect,.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitButtonContents,.jimu-widget-GRGDrafter .style-selector .dijitTextBox,.jimu-widget-GRGDrafter .style-selector .dijitTextBox .dijitButtonNode {background-color: transparent;}.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitArrowButton {background-color: transparent;}.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitInputField {padding: 0px 10px;}.jimu-widget-GRGDrafter .jimu-image-chooser .display-text {width: 100%; font-size: 12px; color: #4A4A4A; letter-spacing: 0.33px; background-color: #FFF; text-align: center;}.jimu-image-chooser:hover .hint .display-text {color: #FFF;}.jimu-widget-GRGDrafter .dijitTextBoxFocused {border: 1px solid #D7D7D7 !important; box-shadow: 0 0 0 0 !important; outline: 2px solid #24B5CC !important; outline-offset: -2px !important;}.jimu-widget-GRGDrafter .dijitTextBox .dijitInputField {padding: 5px 10px;}@media screen and (-ms-high-contrast: active),(-ms-high-contrast: none) {.jimu-widget-GRGDrafter .dijitTextBox .dijitInputField {padding: 0px;}}.jimu-widget-GRGDrafter .dijitSelectFocused .dijitArrowButton .dijitArrowButtonInner {background-position: -35px 53%;}.jimu-widget-GRGDrafter .text-size .text-size-group\x3e.dijitComboBox.dijitValidationTextBox,.jimu-widget-GRGDrafter .text-size .text-size-group\x3e.dijitSelect.dijitValidationTextBox {width: 80px;}.jimu-widget-GRGDrafter .text-size .text-size-group\x3etable {width: 140px;}.jimu-widget-GRGDrafter .halo-size .halo-size-group\x3e.dijitSelect.dijitValidationTextBox {width: 80px;}.jimu-widget-GRGDrafter .style-selector .setting-items {height: 30px; width: 100%; margin: 10px 0; vertical-align: middle; white-space: nowrap;}.jimu-widget-GRGDrafter .style-selector .setting-wapper {width: calc(100% - 100px);}.jimu-widget-GRGDrafter .style-selector .background-btn,.jimu-widget-GRGDrafter .style-selector .text-color-btn {width: 40px; height: 30px; overflow: hidden;}.jimu-widget-GRGDrafter .style-selector .halo-color-btn {width: 50px; height: 30px; overflow: hidden; padding-left: 5px; padding-right: 5px;}.jimu-widget-GRGDrafter .style-selector .align-group {margin-right: 8px; margin-left: -3px;}.jimu-rtl .jimu-widget-GRGDrafter .style-selector .align-group {margin-right: -3px; margin-left: 8px;}.jimu-widget-GRGDrafter .style-selector .font-group-btns {margin-left: 6px; margin-right: 6px;}.jimu-widget-GRGDrafter .style-selector .align-btn,.jimu-widget-GRGDrafter .style-selector .font-btn {height: 30px; margin: 0 3px;}.jimu-widget-GRGDrafter .style-selector .font-btn {width: 30px;}.jimu-widget-GRGDrafter .style-selector .align-btn {width: 30px;}.jimu-widget-GRGDrafter .style-selector .image-btn {width: 120px; height: 30px; border: 1px solid #D7D7D7;}.jimu-widget-GRGDrafter .style-selector .bold {background: url("./images/font_B.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .bold.selected {background: url("./images/font_B_selected.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .italic {background: url("./images/font_I.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .italic.selected {background: url("./images/font_I_selected.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .underline {background: url("./images/font_U.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .underline.selected {background: url("./images/font_U_selected.svg") no-repeat;}.jimu-widget-GRGDrafter .halo-toggle-group {padding: 5px;}.jimu-widget-GRGDrafter .halo-toggle-group .checkbox-inline {padding-left: 36px; vertical-align: top;}.jimu-widget-GRGDrafter .halo-toggle-group .halo-toggle.dijitCheckBox {margin-left: -36px;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox {height: 16px; width: 28px; border: 0 none; background: #adadad; position: relative; display: inline-block; cursor: pointer; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; margin-top: 6px; margin-left: 5px;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox:before {content: ""; background: #f8f8f8; position: absolute; padding: 0; height: 12px; width: 12px; left: auto; right: 14px; top: 2px; z-index: 1; -webkit-transition: right 0.3s; -moz-transition: right 0.3s; -o-transition: right 0.3s; transition: right 0.3s; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox input {width: 100%; height: 100%; position: absolute; left: 0; z-index: 2;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox.dijitCheckBoxChecked {background: #50ad4e;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox.dijitCheckBoxChecked:before {right: 2px;}.DartTheme .jimu-widget-GRGDrafter .dijitSelectDisabled,.DartTheme .jimu-widget-GRGDrafter .dijitTextBoxDisabled,.DartTheme .jimu-widget-GRGDrafter .dijitTextBoxDisabled .dijitInputContainer,.DartTheme .jimu-widget-GRGDrafter .dijitTextBoxDisabled {background-color: #4c4c4c;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipContainer {background-color: #4c4c4c; background-image: -webkit-linear-gradient(bottom, rgb(76, 76, 76) 0px, #4c4c4c 10px); border: 1px solid #ffffff; color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .jimu-widget-subtitle {color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipConnector {background-image: url(images/tooltip.png);}.claro .dijitPopup.dijitTooltipDialogPopup .jimu-input {vertical-align: bottom;}.claro .dijitPopup.dijitTooltipDialogPopup .settingsContainer {margin-top: 6px;}.claro .dijitPopup.dijitTooltipDialogPopup .checkbox.jimu-float-leading.jimu-icon.jimu-icon-checkbox {margin-right: 6px;}.claro .dijitPopup.dijitTooltipDialogPopup span.jimu-widget-subtitle {display: inline-block; margin-bottom: 6px;}.jimu-widget-GRGDrafter .jimu-coordinate-control .settingBtn,.jimu-widget-GRGDrafter .jimu-coordinate-control .drawPointBtn {margin-left: 2px;}',
"*now":function(t){t(['dojo/i18n!*preload*widgets/GriddedReferenceGraphic/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo dojo/_base/declare jimu/BaseWidget dojo/_base/array dojo/_base/lang dojo/_base/kernel dojo/dom-style dojo/dom-class dojo/dom-construct dojo/on dojo/_base/html dojo/query dojo/topic dojo/json dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/popup dijit/Menu dijit/MenuItem jimu/dijit/Message jimu/dijit/LoadingIndicator jimu/LayerInfos/LayerInfos jimu/LayerStructure jimu/utils jimu/dijit/CoordinateControl esri/IdentityManager esri/arcgis/Portal esri/Color esri/dijit/util/busyIndicator esri/graphic esri/geometry/geometryEngine esri/geometry/Extent esri/geometry/Point esri/geometry/Polyline esri/geometry/webMercatorUtils esri/layers/FeatureLayer esri/layers/GraphicsLayer esri/layers/LabelClass esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleFillSymbol esri/symbols/TextSymbol esri/toolbars/draw esri/toolbars/edit esri/renderers/SimpleRenderer ./js/GridSettings ./js/drawGRG ./js/geometry-utils ./js/geometryUtils ./js/mgrs-utils ./js/mgrs ./js/util dijit/focus dojo/keys dojo/dom-attr dijit/form/NumberTextBox dijit/form/RadioButton dijit/form/NumberSpinner jimu/dijit/formSelect".split(" "),function(t,
k,d,q,b,e,g,m,r,h,n,c,l,a,p,A,z,w,f,B,K,G,L,D,x,E,u,y,I,C,F,N,T,P,Q,Y,J,U,R,Z,aa,W,M,O,S,H,X,da,ba,ca,fa,V,v,ea){return k([d,p,A],{baseClass:"jimu-widget-GRGDrafter",_lastOpenPanel:"mainPage",_currentOpenPanel:"mainPage",_gridSettingsInstance:null,_cellShape:"default",_labelStartPosition:"lowerLeft",_cellUnits:"meters",_labelType:"alphaNumeric",_labelTypeWithRefSys:"gridReferenceSystem",_labelDirection:"horizontal",_gridOrigin:"center",_referenceSystem:"MGRS",_showLabels:!0,_GRGAreaFillSymbol:null,
_cellTextSymbol:null,angle:0,featureLayerInfo:null,centerPoint:[],geodesicGrid:!0,postMixInProperties:function(){this.nls.common={};b.mixin(this.nls.common,window.jimuNls.common)},constructor:function(a){k.safeMixin(this,a)},postCreate:function(){String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!==typeof a[c]?a[c]:b})});window.isRTL&&"ar"===e.locale?(g.set(this.helpBtnForArea,"transform","rotateY(180deg)"),g.set(this.helpBtnForPt,
"transform","rotateY(180deg)")):(g.set(this.helpBtnForArea,"transform",""),g.set(this.helpBtnForPt,"transform",""));this.inherited(arguments);this.extentAreaFillSymbol={type:"esriSFS",style:"esriSFSSolid",color:[155,155,155,0],outline:{color:[0,0,255,255],width:1.25,type:"esriSLS",style:"esriSLSSolid"}};this.pointSymbol={color:[255,0,0,255],size:8,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}};this.pointSymbol={color:[255,0,0,255],size:8,
type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}};var a=new O(new R(this.pointSymbol));this._coordinatesLayer=new J;this._coordinatesLayer.spatialReference=this.map.spatialReference;this._coordinatesLayer.setRenderer(a);this._graphicsLayerGRGExtent=new J({id:"graphicsLayerGRGExtent"});this._graphicsLayerGRGTimeExtent=new J({id:"graphicsLayerGRGTimeExtent"});this._extentSym=new Z(this.extentAreaFillSymbol);this._ptSym=new R(this.pointSymbol);
this.GRGArea=new Y({layerDefinition:{geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"grid",alias:"grid",type:"esriFieldTypeString"}],drawingInfo:{renderer:{type:"simple",symbol:this.gridSymbol},transparency:0,labelingInfo:[{labelExpression:"[grid]",labelExpressionInfo:{value:"{grid}"},format:null,fieldInfos:null,useCodedValues:!1,maxScale:0,minScale:0,where:null,sizeInfo:null,labelPlacement:"esriServerPolygonPlacementAlwaysHorizontal",
symbol:this._cellTextSymbol}]},extent:{xmin:-1.8746028312877923E7,ymin:-6027547.894280539,xmax:1.882429982984192E7,ymax:1.2561937384669386E7,spatialReference:{wkid:102100}}}},{id:"Gridded-Reference-Graphic",outFields:["*"],showLabels:!0});this.createGraphicDeleteMenu();this.map.addLayers([this._graphicsLayerGRGTimeExtent,this.GRGArea,this._graphicsLayerGRGExtent,this._coordinatesLayer]);var c;if(this.GRGArea.loaded)c=G.getInstanceSync().getLayerInfoById("Gridded-Reference-Graphic"),c.enablePopup(),
this._showLabels&&c.showLabels();else this.GRGArea.on("load",b.hitch(this,function(){c=G.getInstanceSync().getLayerInfoById("Gridded-Reference-Graphic");c.enablePopup();this._showLabels&&c.showLabels()}));this.grgPointBySizeCoordTool=new x({parentWidget:this,label:this.nls.coordInputLabel,input:!0,showCopyButton:!1,showFormatButton:!0,showDrawPoint:!0,drawButtonLabel:this.nls.addPointToolTip,graphicsLayer:this._coordinatesLayer});this.grgPointBySizeCoordTool.placeAt(this.newGRGPointBySizeOriginCoordsContainer);
this.grgPointBySizeCoordTool.startup();this.grgPointByRefSystemCoordTool=new x({parentWidget:this,label:this.nls.coordInputLabel,input:!0,showCopyButton:!1,showFormatButton:!0,showDrawPoint:!0,drawButtonLabel:this.nls.addPointToolTip,graphicsLayer:this._coordinatesLayer});this.grgPointByRefSystemCoordTool.placeAt(this.newGRGPointByRefSystemOriginCoordsContainer);this.grgPointByRefSystemCoordTool.startup();this.grgPointByTimeCoordTool=new x({parentWidget:this,label:this.nls.coordInputLabel,input:!0,
showCopyButton:!1,showFormatButton:!0,showDrawPoint:!0,drawButtonLabel:this.nls.addPointToolTip,graphicsLayer:this._coordinatesLayer});this.grgPointByTimeCoordTool.placeAt(this.newGRGPointByTimeOriginCoordsContainer);this.grgPointByTimeCoordTool.startup();this.dt_AreaBySize=new W(this.map);this.dt_AreaByRefSystem=new W(this.map);this.editToolbar=new M(this.map,{uniformScaling:!0,allowAddVertices:!0,allowDeleteVertices:!0});this._initLoading();this._handleClickEvents();this._createGridSettings();this.util=
new fa({appConfig:this.appConfig,nls:this.nls});this.restrictedCharlist="'\"\x3c\x3e{}[]#$%^\x26;:/\\";""===this.config.grg.operationalLayer.name&&(m.add(this.publishNewLayer,"controlGroupHidden"),m.add(this.featureLayerList.domNode,"controlGroupHidden"),this.publishNewLayer.setValue(!0),m.remove(this.addGRGNameArea.domNode,"controlGroupHidden"));this._layerList=this._getAllMapLayers();this._populateSelectList(this.featureLayerList,this._layerList,this.config.grg.operationalLayer.name,!0);this._supportAccessibility();
V.focus(this.newGRGAreaButton)},startup:function(){this.inherited(arguments);this.busyIndicator=I.create({target:this.domNode.parentNode.parentNode.parentNode,backgroundOpacity:0});this._setTheme();ea.set(this.grgPointByTimeTimeUnits,"aria-label",this.nls.time+""+this.nls.common.unit);ea.set(this.grgPointByTimeRateUnits,"aria-label",this.nls.rate+""+this.nls.common.unit)},onOpen:function(){},onClose:function(){this.grgPointBySizeCoordinateFormat&&this.grgPointBySizeCoordinateFormat.domNode.offsetParent&&
z.close(this.grgPointBySizeCoordinateFormat);this.grgPointByRefSystemCoordinateFormat&&this.grgPointByRefSystemCoordinateFormat.domNode.offsetParent&&z.close(this.grgPointByRefSystemCoordinateFormat);this.grgPointByTimeCoordinateFormat&&this.grgPointByTimeCoordinateFormat.domNode.offsetParent&&z.close(this.grgPointByTimeCoordinateFormat)},_initLoading:function(){this.loading=new K({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()},_newGRGAreaButtonClicked:function(){m.contains(this.newGRGAreaButton,
"GRGNewRightButton")?(n.removeClass(this.fromAreaContainer,"controlGroupHidden"),n.removeClass(this.newGRGAreaButton,"GRGNewRightButton"),n.addClass(this.newGRGAreaButton,"GRGNewDownButton"),n.addClass(this.fromPointContainer,"controlGroupHidden"),n.removeClass(this.newGRGPointButton,"GRGNewDownButton"),n.addClass(this.newGRGPointButton,"GRGNewRightButton"),this._supportAccessibility(),V.focus(this.newGRGAreaButton)):(n.addClass(this.fromAreaContainer,"controlGroupHidden"),n.addClass(this.newGRGAreaButton,
"GRGNewRightButton"),n.removeClass(this.newGRGAreaButton,"GRGNewDownButton"))},_newGRGPointButtonClicked:function(){m.contains(this.newGRGPointButton,"GRGNewRightButton")?(n.removeClass(this.fromPointContainer,"controlGroupHidden"),n.removeClass(this.newGRGPointButton,"GRGNewRightButton"),n.addClass(this.newGRGPointButton,"GRGNewDownButton"),n.addClass(this.fromAreaContainer,"controlGroupHidden"),n.removeClass(this.newGRGAreaButton,"GRGNewDownButton"),n.addClass(this.newGRGAreaButton,"GRGNewRightButton"),
this._updateLastFocusNode()):(n.addClass(this.fromPointContainer,"controlGroupHidden"),n.addClass(this.newGRGPointButton,"GRGNewRightButton"),n.removeClass(this.newGRGPointButton,"GRGNewDownButton"),this._supportAccessibility())},_publishPanelBackButtonClicked:function(){this.publishMessage.innerHTML="";this.addGRGNameArea.setValue("");this.addGRGNameArea.reset();this._graphicsLayerGRGExtent.show();this._graphicsLayerGRGTimeExtent.clear();this._showPanel(this._lastOpenPanel)},_grgAreaBySizePublishGRGButtonClicked:function(){var a=
this.publishNewLayer.checked?this.addGRGNameArea.value:this.featureLayerList.getValue();this._isValidGRGLayerName(a)?(this.publishMessage.innerHTML="",this._initSaveToPortal(a)):(m.contains(this.addGRGNameArea.domNode,"controlGroupHidden")||V.focus(this.addGRGNameArea.domNode),this.addGRGNameArea.set("state","Error"),this.addGRGNameArea.displayMessage(this.nls.missingLayerNameMessage),this.publishMessage.innerHTML=this.nls.missingLayerNameMessage)},_settingsShowLabelsToggleClicked:function(){var a=
G.getInstanceSync().getLayerInfoById("Gridded-Reference-Graphic");(this._showLabels=this.settingsShowLabelsToggle.checked)?a.showLabels():a.hideLabels()},_handleClickEvents:function(){this.own(h(this.newGRGAreaButton,"click",b.hitch(this,this._newGRGAreaButtonClicked)));this.own(h(this.newGRGAreaButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._newGRGAreaButtonClicked()})));this.own(h(this.newGRGPointButton,"click",b.hitch(this,this._newGRGPointButtonClicked)));
this.own(h(this.newGRGPointButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._newGRGPointButtonClicked()})));this.own(h(this.newAreaGRGBySizeButton,"click",b.hitch(this,function(){this._showPanel("grgAreaBySize")})));this.own(h(this.newAreaGRGBySizeButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._showPanel("grgAreaBySize")})));this.own(h(this.newAreaGRGFromRefSystemButton,"click",b.hitch(this,function(){this._showPanel("grgAreaByRefSystem")})));
this.own(h(this.newAreaGRGFromRefSystemButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._showPanel("grgAreaByRefSystem")})));this.own(h(this.newPointGRGBySizeButton,"click",b.hitch(this,function(){this._showPanel("grgPointBySize")})));this.own(h(this.newPointGRGBySizeButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._showPanel("grgPointBySize")})));this.own(h(this.newPointGRGFromRefSystemButton,"click",b.hitch(this,function(){this._showPanel("grgPointByRefSystem")})));
this.own(h(this.newPointGRGFromRefSystemButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._showPanel("grgPointByRefSystem")})));this.own(h(this.newPointGRGFromTimeButton,"click",b.hitch(this,function(){this._showPanel("grgPointByTime")})));this.own(h(this.newPointGRGFromTimeButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._showPanel("grgPointByTime")})));this.own(h(this.grgAreaBySizePanelBackButton,"click",b.hitch(this,
function(){this._resetOnBackToMainPage()})));this.own(h(this.grgAreaBySizePanelBackButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgAreaBySizeSettingsButton.title=this.nls.lockSettings,n.addClass(this.grgAreaBySizeSettingsButton,"settingsLocked"),n.removeClass(this.grgAreaBySizeSettingsButton,"GRGDrafterSettingsIcon")):(this.own(h(this.grgAreaBySizeSettingsButton,"click",b.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);
this._showPanel("settingsPage")}))),this.own(h(this.grgAreaBySizeSettingsButton,"keydown",b.hitch(this,function(a){if(a.keyCode===v.ENTER||a.keyCode===v.SPACE)this._updateSettingsPage(this._currentOpenPanel),this._showPanel("settingsPage")}))));this.own(h(this.grgAreaBySizeDrawPolygonIcon,"click",b.hitch(this,this._grgAreaBySizeDrawPolygonIconClicked)));this.own(h(this.grgAreaBySizeDrawPolygonIcon,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._grgAreaBySizeDrawPolygonIconClicked()})));
this.own(h(this.grgAreaBySizeDrawExtentIcon,"click",b.hitch(this,this._grgAreaBySizeDrawExtentIconClicked)));this.own(h(this.grgAreaBySizeDrawExtentIcon,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._grgAreaBySizeDrawExtentIconClicked()})));this.own(h(this.dt_AreaBySize,"draw-complete",b.hitch(this,this._dt_AreaBySizeComplete)));this.own(h(this.grgAreaBySizeCreateGRGButton,"click",b.hitch(this,this._grgAreaBySizeCreateGRGButtonClicked)));this.own(h(this.grgAreaBySizeCreateGRGButton,
"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._grgAreaBySizeCreateGRGButtonClicked()})));this.own(h(this.grgAreaBySizeClearGRGButton,"click",b.hitch(this,function(){this._clearLayers(!0)})));this.own(h(this.grgAreaBySizeClearGRGButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._clearLayers(!0)})));this.own(h(this.setNumberRowsColumns,"click",b.hitch(this,this._setNumberRowsColumnsCheckBoxChanged)));this.own(h(this.setNumberRowsColumns,
"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._setNumberRowsColumnsCheckBoxChanged()})));this.own(h(this.cellHorizontal,"blur",b.hitch(this,function(){this.cellHorizontal.isValid()&&this._graphicsLayerGRGExtent.graphics[0]&&(0===this.angle?this._calculateCellWidthAndHeight(X.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent())):this._calculateCellWidthAndHeight(this._graphicsLayerGRGExtent.graphics[0].geometry))})));this.own(h(this.cellVertical,
"blur",b.hitch(this,function(){this.cellVertical.isValid()&&this._graphicsLayerGRGExtent.graphics[0]&&(0===this.angle?this._calculateCellWidthAndHeight(X.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent())):this._calculateCellWidthAndHeight(this._graphicsLayerGRGExtent.graphics[0].geometry))})));this.own(h(this.grgAreaBySizeRotation,"keyup",b.hitch(this,function(){setTimeout(b.hitch(this,function(){if(this.grgAreaBySizeRotation.isValid()&&!isNaN(this.grgAreaBySizeRotation.value)&&
this._graphicsLayerGRGExtent.graphics[0]){var a=this.grgAreaBySizeRotation.getValue()-this.angle,a=F.rotate(this._graphicsLayerGRGExtent.graphics[0].geometry,-1*a);this._graphicsLayerGRGExtent.clear();a=new C(a,this._extentSym);this._graphicsLayerGRGExtent.add(a);this.angle=this.grgAreaBySizeRotation.getValue();this.editToolbar.deactivate()}}),1E3)})));this.own(h(this.grgAreaByRefSystemPanelBackButton,"click",b.hitch(this,function(){this._resetOnBackToMainPage()})));this.own(h(this.grgAreaByRefSystemPanelBackButton,
"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgAreaByRefSystemSettingsButton.title=this.nls.lockSettings,n.addClass(this.grgAreaByRefSystemSettingsButton,"settingsLocked"),n.removeClass(this.grgAreaByRefSystemSettingsButton,"GRGDrafterSettingsIcon")):(this.own(h(this.grgAreaByRefSystemSettingsButton,"click",b.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")}))),
this.own(h(this.grgAreaByRefSystemSettingsButton,"keydown",b.hitch(this,function(a){if(a.keyCode===v.ENTER||a.keyCode===v.SPACE)this._updateSettingsPage(this._currentOpenPanel),this._showPanel("settingsPage")}))));this.own(h(this.grgAreaByRefSystemDrawIcon,"click",b.hitch(this,this._grgAreaByRefSystemDrawIconClicked)));this.own(h(this.grgAreaByRefSystemDrawIcon,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._grgAreaByRefSystemDrawIconClicked()})));this.own(h(this.grgAreaByRefSystemCreateGRGButton,
"click",b.hitch(this,this._grgAreaByRefSystemCreateGRGButtonClicked)));this.own(h(this.grgAreaByRefSystemCreateGRGButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._grgAreaByRefSystemCreateGRGButtonClicked()})));this.own(h(this.grgAreaByRefSystemClearGRGButton,"click",b.hitch(this,function(){this._clearLayers(!0)})));this.own(h(this.grgAreaByRefSystemClearGRGButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._clearLayers(!0)})));
this.own(h(this.dt_AreaByRefSystem,"draw-complete",b.hitch(this,function(a){this._dt_AreaByRefSystemComplete(a);V.focus(this.grgAreaByRefSystemGridSize.domNode)})));this.own(h(this.grgAreaByRefSystemGridSize,"change",b.hitch(this,function(){switch(this.grgAreaByRefSystemGridSize.getValue()){case "UTM":this.grgAreaByRefLabelFormat.value="Z";break;case "100000":this.grgAreaByRefLabelFormat.value="ZS";break;default:this.grgAreaByRefLabelFormat.value="ZSXY"}})));this.own(h(this.grgPointBySizePanelBackButton,
"click",b.hitch(this,function(){this.onClose();this._resetOnBackToMainPage()})));this.own(h(this.grgPointBySizePanelBackButton,"keydown",b.hitch(this,function(a){if(a.keyCode===v.ENTER||a.keyCode===v.SPACE)this.onClose(),this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgPointBySizeSettingsButton.title=this.nls.lockSettings,n.addClass(this.grgPointBySizeSettingsButton,"settingsLocked"),n.removeClass(this.grgPointBySizeSettingsButton,"GRGDrafterSettingsIcon")):(this.own(h(this.grgPointBySizeSettingsButton,
"click",b.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")}))),this.own(h(this.grgPointBySizeSettingsButton,"keydown",b.hitch(this,function(a){if(a.keyCode===v.ENTER||a.keyCode===v.SPACE)this._updateSettingsPage(this._currentOpenPanel),this._showPanel("settingsPage")}))));this.own(h(this.grgPointBySizeCreateGRGButton,"click",b.hitch(this,this._grgPointBySizeCreateGRGButtonClicked)));this.own(h(this.grgPointBySizeCreateGRGButton,"keydown",b.hitch(this,
function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._grgPointBySizeCreateGRGButtonClicked()})));this.own(h(this.grgPointBySizeClearGRGButton,"click",b.hitch(this,function(){this._clearLayers(!0)})));this.own(h(this.grgPointBySizeClearGRGButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._clearLayers(!0)})));this.own(h(this.grgPointBySizeCoordTool.dt,"DrawComplete",b.hitch(this,function(){this._dt_Complete();V.focus(this.grgPointBySizeCellHorizontal.domNode)})));
this.own(h(this.grgPointByRefSystemCoordTool.dt,"DrawComplete",b.hitch(this,function(){this._dt_Complete();V.focus(this.grgPointByRefSystemGridSize.domNode)})));this.own(h(this.grgPointByTimeCoordTool.dt,"DrawComplete",b.hitch(this,function(){this._dt_Complete();V.focus(this.grgPointByTimeTime.domNode)})));this.own(h(this.grgPointByRefSystemPanelBackButton,"click",b.hitch(this,function(){this.onClose();this._resetOnBackToMainPage()})));this.own(h(this.grgPointByRefSystemPanelBackButton,"keydown",
b.hitch(this,function(a){if(a.keyCode===v.ENTER||a.keyCode===v.SPACE)this.onClose(),this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgPointByRefSystemSettingsButton.title=this.nls.lockSettings,n.addClass(this.grgPointByRefSystemSettingsButton,"settingsLocked"),n.removeClass(this.grgPointByRefSystemSettingsButton,"GRGDrafterSettingsIcon")):(this.own(h(this.grgPointByRefSystemSettingsButton,"click",b.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")}))),
this.own(h(this.grgPointByRefSystemSettingsButton,"keydown",b.hitch(this,function(a){if(a.keyCode===v.ENTER||a.keyCode===v.SPACE)this._updateSettingsPage(this._currentOpenPanel),this._showPanel("settingsPage")}))));this.own(h(this.grgPointByRefSystemCreateGRGButton,"click",b.hitch(this,this._grgPointByRefSystemCreateGRGButtonClicked)));this.own(h(this.grgPointByRefSystemCreateGRGButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._grgPointByRefSystemCreateGRGButtonClicked()})));
this.own(h(this.grgPointByRefSystemClearGRGButton,"click",b.hitch(this,function(){this._clearLayers(!0)})));this.own(h(this.grgPointByRefSystemClearGRGButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._clearLayers(!0)})));this.own(h(this.grgPointByRefSystemGridSize,"change",b.hitch(this,function(){switch(this.grgPointByRefSystemGridSize.getValue()){case "UTM":this.grgPointByRefLabelFormat.value="Z";break;case "100000":this.grgPointByRefLabelFormat.value="ZS";
break;default:this.grgPointByRefLabelFormat.value="ZSXY"}})));this.own(h(this.grgPointByTimeBackButton,"click",b.hitch(this,function(){this.onClose();this._resetOnBackToMainPage()})));this.own(h(this.grgPointByTimeBackButton,"keydown",b.hitch(this,function(a){if(a.keyCode===v.ENTER||a.keyCode===v.SPACE)this.onClose(),this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgPointByTimeSettingsButton.title=this.nls.lockSettings,n.addClass(this.grgPointByTimeSettingsButton,"settingsLocked"),
n.removeClass(this.grgPointByTimeSettingsButton,"GRGDrafterSettingsIcon")):(this.own(h(this.grgPointByTimeSettingsButton,"click",b.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")}))),this.own(h(this.grgPointByTimeSettingsButton,"keydown",b.hitch(this,function(a){if(a.keyCode===v.ENTER||a.keyCode===v.SPACE)this._updateSettingsPage(this._currentOpenPanel),this._showPanel("settingsPage")}))));this.own(h(this.grgPointByTimeCreateGRGButton,"click",
b.hitch(this,this._grgPointByTimeCreateGRGButtonClicked)));this.own(h(this.grgPointByTimeCreateGRGButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._grgPointByTimeCreateGRGButtonClicked()})));this.own(h(this.grgPointByTimeClearGRGButton,"click",b.hitch(this,function(){this._clearLayers(!0)})));this.own(h(this.grgPointByTimeClearGRGButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._clearLayers(!0)})));this.own(h(this.setNumberRowsColumnsTime,
"click",b.hitch(this,this._setNumberRowsColumnsTimeCheckBoxChanged)));this.own(h(this.setNumberRowsColumnsTime,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._setNumberRowsColumnsTimeCheckBoxChanged()})));this.own(h(this.gridSettingsPanelBackButton,"click",b.hitch(this,function(){this._gridSettingsInstance.onClose();this._showPanel(this._lastOpenPanel)})));this.own(h(this.gridSettingsPanelBackButton,"keydown",b.hitch(this,function(a){if(a.keyCode===v.ENTER||a.keyCode===
v.SPACE)this._gridSettingsInstance.onClose(),this._showPanel(this._lastOpenPanel)})));this.own(h(this.publishPanelBackButton,"click",b.hitch(this,this._publishPanelBackButtonClicked)));this.own(h(this.publishPanelBackButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._publishPanelBackButtonClicked()})));this.own(h(this.grgAreaBySizePublishGRGButton,"click",b.hitch(this,this._grgAreaBySizePublishGRGButtonClicked)));this.own(h(this.grgAreaBySizePublishGRGButton,
"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._grgAreaBySizePublishGRGButtonClicked()})));this.own(h(this.settingsShowLabelsToggle,"click",b.hitch(this,this._settingsShowLabelsToggleClicked)));this.own(h(this.settingsShowLabelsToggle,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._settingsShowLabelsToggleClicked()})));this.own(h(this.editToolbar,"graphic-move-stop",b.hitch(this,function(a){this.centerPoint=a.graphic.geometry.getCentroid()})));
this.own(h(this.editToolbar,"rotate-stop",b.hitch(this,function(a){this.angle+=parseFloat(a.info.angle.toFixed(1));this.grgAreaBySizeRotation.setValue(this.angle)})));this.own(h(this.editToolbar,"vertex-move-stop",b.hitch(this,function(a){this.centerPoint=a.graphic.geometry.getCentroid();this._calculateCellWidthAndHeight(X.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent()))})));this.own(h(this.editToolbar,"scale-stop",b.hitch(this,function(a){this.centerPoint=a.graphic.geometry.getCentroid();
this._calculateCellWidthAndHeight(a.graphic.geometry)})));this.own(h(this.publishNewLayer,"change",b.hitch(this,this._onCheckboxClicked)));l.subscribe("moveMap",b.hitch(this,function(){setTimeout(b.hitch(this,function(){this._moveMap()}),1E3)}))},_populateSelectList:function(c,d,e,f){var g=[];f&&(g=q.filter(d,function(a){return"esriGeometryPolygon"===a.geometryType},this));d=0<g.length?g:d;q.forEach(d,b.hitch(this,function(b){"Feature Layer"===b.type&&null!==b.url&&c.addOption({value:a.parse(b._json).name,
label:D.sanitizeHTML(b.name),selected:!1})}));""!==e&&c.setValue(e)},_getAllMapLayers:function(){var a=[];L.getInstance().traversal(function(b){"undefined"!==typeof b._layerInfo.layerObject.type&&-1===b._layerInfo.layerObject.type.indexOf("tile")&&a.push(b._layerInfo.layerObject)});return a},_onCheckboxClicked:function(){this.publishNewLayer.checked?(m.add(this.featureLayerList.domNode,"controlGroupHidden"),m.remove(this.addGRGNameArea.domNode,"controlGroupHidden"),this.addGRGNameArea.reset(),this.addGRGNameArea.focus()):
(m.add(this.addGRGNameArea.domNode,"controlGroupHidden"),m.remove(this.featureLayerList.domNode,"controlGroupHidden"));this._addLayerToMap=this.publishNewLayer.checked},_isValidGRGLayerName:function(a){var b=!1,c=this._findRestrictedChars(a,this.restrictedCharlist);c&&0<c.length?b=!1:this._isLayerNameValid(a)?a&&0<a.length&&(b=!0):b=!1;return b},_findRestrictedChars:function(a,b){var c="",d;if(a&&b)for(d=0;d<b.length;d++){var e=b.charAt(d);-1!==a.indexOf(e)&&(" "===e&&(e="spaces"),c=0===c.length?
e:c+(" "+e))}return c},_isLayerNameValid:function(a){var b=/^\./,c=/^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)/i;return/^[^\\/:\*\?"<>\|()]+$/.test(a)&&!b.test(a)&&!c.test(a)},_updateSettingsPage:function(a){n.removeClass(this._gridSettingsInstance.gridShapeContainer,"controlGroupHidden");n.removeClass(this._gridSettingsInstance.gridUnitsContainer,"controlGroupHidden");n.removeClass(this._gridSettingsInstance.labelStyleContainer,"controlGroupHidden");n.removeClass(this._gridSettingsInstance.labelStartPositionContainer,
"controlGroupHidden");n.removeClass(this._gridSettingsInstance.labelDirectionContainer,"controlGroupHidden");n.addClass(this._gridSettingsInstance.gridOriginContainer,"controlGroupHidden");n.addClass(this._gridSettingsInstance.gridRefSystemContainer,"controlGroupHidden");n.addClass(this._gridSettingsInstance.labelStyleWithRefSysContainer,"controlGroupHidden");switch(a){case "grgPointBySize":n.removeClass(this._gridSettingsInstance.gridOriginContainer,"controlGroupHidden");break;case "grgAreaByRefSystem":case "grgPointByRefSystem":n.addClass(this._gridSettingsInstance.gridShapeContainer,
"controlGroupHidden"),n.addClass(this._gridSettingsInstance.gridUnitsContainer,"controlGroupHidden"),n.addClass(this._gridSettingsInstance.labelStyleContainer,"controlGroupHidden"),n.addClass(this._gridSettingsInstance.labelDirectionContainer,"controlGroupHidden"),n.removeClass(this._gridSettingsInstance.gridRefSystemContainer,"controlGroupHidden"),n.removeClass(this._gridSettingsInstance.labelStyleWithRefSysContainer,"controlGroupHidden")}},_getNodeByName:function(a){var b;switch(a){case "mainPage":b=
this.mainPageNode;break;case "grgAreaBySize":b=this.grgAreaBySizePageNode;break;case "grgAreaByRefSystem":b=this.grgAreaByRefSystemPageNode;break;case "grgAreaFromNonStandard":b=this.grgAreaFromNonStandardPageNode;break;case "grgPointBySize":b=this.grgPointBySizePageNode;break;case "grgPointByRefSystem":b=this.grgPointByRefSystemPageNode;break;case "grgPointByTime":b=this.grgPointByTimePageNode;this._gridSettingsInstance.gridOrigin.set("value","center");this._gridOrigin="center";break;case "settingsPage":b=
this.settingsPageNode;break;case "publishPage":b=this.publishPageNode}return b},_resetOnBackToMainPage:function(){this._showPanel("mainPage");this._reset();V.focus(this.newGRGAreaButton)},_reset:function(){this._clearLayers(!0);this.dt_AreaBySize.deactivate();this.dt_AreaByRefSystem.deactivate();this.map.enableMapNavigation();t.removeClass(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active");t.removeClass(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active");n.addClass(this.fromAreaContainer,
"controlGroupHidden");n.addClass(this.newGRGAreaButton,"GRGNewRightButton");n.removeClass(this.newGRGAreaButton,"GRGNewDownButton");n.addClass(this.fromPointContainer,"controlGroupHidden");n.addClass(this.newGRGPointButton,"GRGNewRightButton");n.removeClass(this.newGRGPointButton,"GRGNewDownButton")},_clearLayers:function(a){this.GRGArea.clear();this.GRGArea.refresh();this.editToolbar.deactivate();this.grgPointBySizeCoordTool.clear();this.grgPointByRefSystemCoordTool.clear();this.grgPointByTimeCoordTool.clear();
a&&(this._graphicsLayerGRGExtent.clear(),this.angle=0,this.grgAreaBySizeRotation.setValue(this.angle),this.grgAreaBySizeRotation.set("disabled",!0),this.grgAreaBySizeCellHeight.set("disabled",!0),this.grgAreaBySizeCellWidth.set("disabled",!0))},_createGridSettings:function(){this._gridSettingsInstance=new S({nls:this.nls,config:this.config,appConfig:this.appConfig},r.create("div",{},this.gridSettingsNode));this.own(this._gridSettingsInstance.on("gridSettingsChanged",b.hitch(this,function(a){this._cellShape=
a.cellShape;this._labelStartPosition=a.labelStartPosition;this._cellUnits=a.cellUnits;this._labelType=a.labelType;this._labelTypeWithRefSys=a.labelTypeWithRefSys;this._labelDirection=a.labelDirection;this._gridOrigin=a.gridOrigin;this._referenceSystem=a.referenceSystem;"default"===this._cellShape?(this.grgAreaBySizeCellHeight.setValue(this.grgAreaBySizeCellWidth.value),this.grgPointBySizeCellHeight.set("disabled",!1),this.grgPointBySizeCellHeight.setValue(this.grgPointBySizeCellWidth.value)):(this.grgAreaBySizeCellHeight.set("disabled",
!0),this.grgAreaBySizeCellHeight.setValue(0),this.grgPointBySizeCellHeight.set("disabled",!0),this.grgPointBySizeCellHeight.setValue(0));"gridReferenceSystem"!==this._labelTypeWithRefSys?(n.addClass(this.grgAreaByRefSystemLabelFormat,"controlGroupHidden"),n.addClass(this.grgPointByRefSystemLabelFormat,"controlGroupHidden")):(n.removeClass(this.grgAreaByRefSystemLabelFormat,"controlGroupHidden"),n.removeClass(this.grgPointByRefSystemLabelFormat,"controlGroupHidden"));var b=new y(a.gridFillColor);b.a=
1-a.gridFillTransparency;var c=new y(a.gridOutlineColor);c.a=1-a.gridOutlineTransparency;this._GRGAreaFillSymbol={type:"esriSFS",style:"esriSFSSolid",color:b,outline:{color:c,width:2,type:"esriSLS",style:"esriSLSSolid"}};b=new Z(this._GRGAreaFillSymbol);b=new O(b);this.GRGArea.setRenderer(b);var b=new y(a.fontSettings.textColor),c=255*(1-a.fontSettings.labelTransparency),d=0;a.fontSettings.haloOn&&(d=parseInt(a.fontSettings.haloSize,10));var e=new y(a.fontSettings.haloColor);this._cellTextSymbol=
{type:"esriTS",color:[b.r,b.g,b.b,c],haloSize:d,haloColor:[e.r,e.g,e.b,c],horizontalAlignment:"center",font:{size:parseInt(a.fontSettings.fontSize,10),style:a.fontSettings.font.italic?"italic":"normal",weight:a.fontSettings.font.bold?"bold":"normal",family:a.fontSettings.font.fontFamily,decoration:a.fontSettings.font.underline?"underline":"none"}};a=new U({labelExpressionInfo:{value:"{grid}"}});a.symbol=new aa(this._cellTextSymbol);this.GRGArea.setLabelingInfo([a]);this.GRGArea.refresh()})));this._gridSettingsInstance.startup();
this.own(h(this._gridSettingsInstance.tab,"tabChanged",b.hitch(this,function(){setTimeout(b.hitch(this,function(){this._updateLastFocusNode()}),200)})))},_showPanel:function(a){var b;this._currentOpenPanel&&(b=this._getNodeByName(this._currentOpenPanel),m.add(b,"GRGDrafterHidden"));b=this._getNodeByName(a);m.remove(b,"GRGDrafterHidden");this._lastOpenPanel=this._currentOpenPanel;this._currentOpenPanel=a;this._supportAccessibility()},_grgAreaBySizeDrawPolygonIconClicked:function(){this._clearLayers(!0);
m.contains(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active")&&(this.dt_AreaBySize.deactivate(),m.toggle(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active"));m.contains(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active")?(this.dt_AreaBySize.deactivate(),this.map.enableMapNavigation()):(this.map.disableMapNavigation(),this.dt_AreaBySize.activate("polygon"),this.own(h(this._graphicsLayerGRGExtent,"click",b.hitch(this,function(a){this.editToolbar._defaultOptions.uniformScaling=!0;this.editToolbar.activate(M.MOVE|
M.EDIT_VERTICES,a.graphic)}))),this.own(h(this._graphicsLayerGRGExtent,"keydown",b.hitch(this,function(a){if(a.keyCode===v.ENTER||a.keyCode===v.SPACE)this.editToolbar._defaultOptions.uniformScaling=!0,this.editToolbar.activate(M.MOVE|M.EDIT_VERTICES,a.graphic)}))));m.toggle(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active")},_grgAreaBySizeDrawExtentIconClicked:function(){this._clearLayers(!0);m.contains(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active")&&(this.dt_AreaBySize.deactivate(),
m.toggle(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active"));m.contains(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active")?(this.dt_AreaBySize.deactivate(),this.map.enableMapNavigation()):(this.map.disableMapNavigation(),this.dt_AreaBySize.activate("extent"),this.own(h(this._graphicsLayerGRGExtent,"click",b.hitch(this,function(a){this.editToolbar._defaultOptions.uniformScaling=!0;this.editToolbar.activate(M.MOVE|M.ROTATE|M.SCALE,a.graphic)}))),this.own(h(this._graphicsLayerGRGExtent,"keydown",
b.hitch(this,function(a){if(a.keyCode===v.ENTER||a.keyCode===v.SPACE)this.editToolbar._defaultOptions.uniformScaling=!0,this.editToolbar.activate(M.MOVE|M.ROTATE|M.SCALE,a.graphic)}))));m.toggle(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active")},_grgPointBySizeDrawButtonClicked:function(){m.contains(this.grgPointBySizeAddPointBtn,"jimu-edit-active")?this.map.enableMapNavigation():(this._clearLayers(!0),this.grgPointBySizeCoordTool.manualInput=!1,this.map.disableMapNavigation());m.toggle(this.grgPointBySizeAddPointBtn,
"jimu-edit-active")},_grgAreaByRefSystemDrawIconClicked:function(){m.contains(this.grgAreaByRefSystemDrawIcon,"jimu-extent-active")?(this.dt_AreaByRefSystem.deactivate(),this.map.enableMapNavigation()):(this._graphicsLayerGRGExtent.clear(),this.grgPointBySizeCoordTool.manualInput=!1,this.map.disableMapNavigation(),this.dt_AreaByRefSystem.activate("extent"),this.editToolbar.deactivate(),this.own(h(this._graphicsLayerGRGExtent,"click",b.hitch(this,function(a){this.editToolbar._defaultOptions.uniformScaling=
!1;this.editToolbar.activate(M.MOVE|M.SCALE,a.graphic)}))),this.own(h(this._graphicsLayerGRGExtent,"keydown",b.hitch(this,function(a){if(a.keyCode===v.ENTER||a.keyCode===v.SPACE)this.editToolbar._defaultOptions.uniformScaling=!1,this.editToolbar.activate(M.MOVE|M.SCALE,a.graphic)}))));m.toggle(this.grgAreaByRefSystemDrawIcon,"jimu-extent-active")},_dt_AreaBySizeComplete:function(a){var b;this.map.enableMapNavigation();this.dt_AreaBySize.deactivate();"extent"===a.geometry.type?(a.geometry=X.extentToPolygon(a.geometry),
b=new C(a.geometry,this._extentSym),this.grgAreaBySizeRotation.set("disabled",!1),m.toggle(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active")):(b=new C(a.geometry,this._extentSym),a.geometry=X.extentToPolygon(a.geometry.getExtent()),m.toggle(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active"));"default"===this._cellShape&&this.grgAreaBySizeCellHeight.set("disabled",!1);this.grgAreaBySizeCellWidth.set("disabled",!1);V.focus(this.grgAreaBySizeCellWidth.domNode);this._graphicsLayerGRGExtent.add(b);
this.centerPoint=a.geometry.getCentroid();this._calculateCellWidthAndHeight(a.geometry)},_calculateCellWidthAndHeight:function(a){4326===a.spatialReference.wkid&&(a=Q.geographicToWebMercator(a));var b=F.geodesicLength(new P({paths:[[[a.getPoint(0,0).x,a.getPoint(0,0).y],[a.getPoint(0,1).x,a.getPoint(0,1).y]]],spatialReference:a.spatialReference}),this._cellUnits)/this.cellHorizontal.value,c=F.geodesicLength(new P({paths:[[[a.getPoint(0,0).x,a.getPoint(0,0).y],[a.getPoint(0,3).x,a.getPoint(0,3).y]]],
spatialReference:a.spatialReference}),this._cellUnits)/this.cellVertical.value,d=this.util.convertToMeters(b,this._cellUnits),e=this.util.convertToMeters(c,this._cellUnits);2E4>d&&(2E4>e&&"hexagon"!==this._cellShape||"hexagon"===this._cellShape)?(this.geodesicGrid=!0,this.grgAreaBySizeCellWidth.setValue(b),"default"===this._cellShape?this.grgAreaBySizeCellHeight.setValue(c):this.grgAreaBySizeCellHeight.setValue(0)):(this.geodesicGrid=!1,this.grgAreaBySizeCellWidth.setValue(F.distance(a.getPoint(0,
0),a.getPoint(0,1),this._cellUnits)/this.cellHorizontal.value),"default"===this._cellShape?this.grgAreaBySizeCellHeight.setValue(F.distance(a.getPoint(0,0),a.getPoint(0,3),this._cellUnits)/this.cellVertical.value):this.grgAreaBySizeCellHeight.setValue(0))},_dt_Complete:function(){this.grgPointBySizeCoordTool.deactivateDrawTool();this.grgPointByRefSystemCoordTool.deactivateDrawTool();this.grgPointByTimeCoordTool.deactivateDrawTool();this.map.enableMapNavigation()},_dt_AreaByRefSystemComplete:function(a){m.remove(this.grgAreaByRefSystemDrawIcon,
"jimu-extent-active");a=new C(X.extentToPolygon(a.geometry),this._extentSym);this._graphicsLayerGRGExtent.add(a);this.dt_AreaByRefSystem.deactivate();this.map.enableMapNavigation()},_grgPointBySizeCoordFormatPopupApplyButtonClicked:function(){var a=this.grgPointBySizeCoordinateFormat.content.formats[this.grgPointBySizeCoordinateFormat.content.ct],b=a.defaultFormat,c=this.grgPointBySizeCoordinateFormat.content.frmtSelect.get("value");a.useCustom&&(b=a.customFormat);this.grgPointBySizeCoordTool.inputCoordinate.set("formatPrefix",
this.grgPointBySizeCoordinateFormat.content.addSignChkBox.checked);this.grgPointBySizeCoordTool.inputCoordinate.set("formatString",b);this.grgPointBySizeCoordTool.inputCoordinate.set("formatType",c);this._grgPointBySizeSetCoordLabel(c);z.close(this.grgPointBySizeCoordinateFormat)},_setNumberRowsColumnsCheckBoxChanged:function(){this.setNumberRowsColumns.checked?(this.grgAreaBySizeCellWidth.set("disabled",!0),this.grgAreaBySizeCellHeight.set("disabled",!0),this.cellHorizontal.set("disabled",!1),this.cellVertical.set("disabled",
!1)):(this.cellHorizontal.set("disabled",!0),this.cellVertical.set("disabled",!0));this._clearLayers(!0)},_setNumberRowsColumnsTimeCheckBoxChanged:function(){this.setNumberRowsColumnsTime.checked?(this.grgPointByTimeCellWidth.set("disabled",!0),this.grgPointByTimeCellHeight.set("disabled",!0),this.grgPointByTimeCellHorizontal.set("disabled",!1),this.grgPointByTimeCellVertical.set("disabled",!1)):(this.grgPointByTimeCellHorizontal.set("disabled",!0),this.grgPointByTimeCellVertical.set("disabled",!0),
this.grgPointByTimeCellWidth.set("disabled",!1),this.grgPointByTimeCellHeight.set("disabled",!1));this._clearLayers(!0)},_grgAreaBySizeCreateGRGButtonClicked:function(){if(this._graphicsLayerGRGExtent.graphics[0]&&this.grgAreaBySizeCellWidth.isValid()&&this.grgAreaBySizeCellHeight.isValid()&&this.grgAreaBySizeRotation.isValid()){this._clearLayers(!1);var a=0===this.angle?X.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent()):this._graphicsLayerGRGExtent.graphics[0].geometry;
4326===a.spatialReference.wkid&&(a=Q.geographicToWebMercator(a));var b,c;this.geodesicGrid?(b=F.geodesicLength(new P({paths:[[[a.getPoint(0,0).x,a.getPoint(0,0).y],[a.getPoint(0,1).x,a.getPoint(0,1).y]]],spatialReference:a.spatialReference}),"meters"),c=F.geodesicLength(new P({paths:[[[a.getPoint(0,0).x,a.getPoint(0,0).y],[a.getPoint(0,3).x,a.getPoint(0,3).y]]],spatialReference:a.spatialReference}),"meters")):(b=F.distance(a.getPoint(0,0),a.getPoint(0,1),"meters"),c=F.distance(a.getPoint(0,0),a.getPoint(0,
3),"meters"));var a=this.util.convertToMeters(this.grgAreaBySizeCellWidth.value,this._cellUnits),d=this.util.convertToMeters(this.grgAreaBySizeCellHeight.value,this._cellUnits);b=Math.round(b/a);c="default"===this._cellShape?Math.round(c/d):Math.round(c/a/Math.cos(30*Math.PI/180))+1;H.checkGridSize(b,c)?(a=H.createGRG(b,c,this.centerPoint,a,d,this.angle,this._labelStartPosition,this._labelType,this._labelDirection,this._cellShape,"center",this.geodesicGrid,this.map),this.GRGArea.applyEdits(a,null,
null),this.map.setExtent(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent().expand(2),!1),this._graphicsLayerGRGExtent.clear(),this._showPanel("publishPage")):new B({message:this.nls.tooManyCellsErrorMessage})}},_grgPointBySizeCreateGRGButtonClicked:function(){if(this.grgPointBySizeCellWidth.isValid()&&this.grgPointBySizeCellHeight.isValid()&&this.gridAnglePoint.isValid()){var a=Q.geographicToWebMercator(this.grgPointBySizeCoordTool.getMapCoordinateDD()),b=this.util.convertToMeters(this.grgPointBySizeCellWidth.value,
this._cellUnits),c=this.util.convertToMeters(this.grgPointBySizeCellHeight.value,this._cellUnits);this.geodesicGrid=2E4>b&&(2E4>c&&"hexagon"!==this._cellShape||"hexagon"===this._cellShape)?!0:!1;if(H.checkGridSize(this.grgPointBySizeCellHorizontal.value,this.grgPointBySizeCellVertical.value)){a=H.createGRG(this.grgPointBySizeCellHorizontal.value,this.grgPointBySizeCellVertical.value,a,b,c,this.gridAnglePoint.value,this._labelStartPosition,this._labelType,this._labelDirection,this._cellShape,this._gridOrigin,
this.geodesicGrid,this.map);this.GRGArea.applyEdits(a,null,null);b=[];for(c=0;c<a.length;c++)b.push(a[c].geometry);a=F.union(b);this.map.setExtent(a.getExtent().expand(2),!1);this._showPanel("publishPage")}else new B({message:this.nls.tooManyCellsErrorMessage})}else new B({message:this.nls.missingParametersMessage})},_grgPointByTimeCreateGRGButtonClicked:function(){var a,b,c;if(this.grgPointByTimeTime.isValid()&&this.grgPointByTimeRate.isValid()&&this.grgPointByTimeRotation.isValid()){var d=this.grgPointByTimeTime.get("value")*
this.grgPointByTimeTimeUnits.get("value");b=this.grgPointByTimeRate.get("value")*this.grgPointByTimeRateUnits.value.split(";")[0]/this.grgPointByTimeRateUnits.value.split(";")[1];b*=d;d=Q.geographicToWebMercator(this.grgPointByTimeCoordTool.getMapCoordinateDD());2E5>b?(this.geodesicGrid=!0,a=F.geodesicBuffer(d,b,9001),b=X.extentToPolygon(a.getExtent()),b=F.geodesicLength(new P({paths:[[[b.getPoint(0,0).x,b.getPoint(0,0).y],[b.getPoint(0,1).x,b.getPoint(0,1).y]]],spatialReference:b.spatialReference}),
"meters")):(this.geodesicGrid=!1,a=F.buffer(d,b,9001),b=X.extentToPolygon(a.getExtent()),b=F.distance(b.getPoint(0,0),b.getPoint(0,1),"meters"));a=new C(a,this._extentSym);this._graphicsLayerGRGTimeExtent.add(a);if(this.setNumberRowsColumnsTime.checked)if(this.grgPointByTimeCellHorizontal.isValid()&&this.grgPointByTimeCellVertical.isValid())a=b/this.grgPointByTimeCellHorizontal.value,c=b/this.grgPointByTimeCellVertical.value;else{new B({message:this.nls.invalidHorizontalVerticalParametersMessage});
return}else if(this.grgPointByTimeCellWidth.isValid()&&this.grgPointByTimeCellHeight.isValid())a=this.util.convertToMeters(this.grgPointByTimeCellWidth.value,this._cellUnits),c=this.util.convertToMeters(this.grgPointByTimeCellHeight.value,this._cellUnits);else{new B({message:this.nls.invalidWidthHeightParametersMessage});return}var e=Math.round(b/a);b="default"===this._cellShape?Math.round(b/c):Math.round(b/a/Math.cos(30*Math.PI/180))+1;1>e&&(e=1);1>b&&(b=1);if(H.checkGridSize(e,b)){d=H.createGRG(e,
b,d,a,c,this.grgPointByTimeRotation.value,this._labelStartPosition,this._labelType,this._labelDirection,this._cellShape,this._gridOrigin,this.geodesicGrid,this.map);this.GRGArea.applyEdits(d,null,null);b=[];for(a=0;a<d.length;a++)b.push(d[a].geometry);d=F.union(b);this.map.setExtent(d.getExtent().expand(2),!1);this._showPanel("publishPage")}else new B({message:this.nls.tooManyCellsErrorMessage})}else new B({message:this.nls.missingOriginParametersMessage})},_grgPointByRefSystemCreateGRGButtonClicked:function(){var a,
b,c,d,e=[];b=this.grgPointByRefSystemCoordTool.getMapCoordinateDD();this._clearLayers(!1);if(H.checkGridSize(this.grgPointByRefCellHorizontal.getValue(),this.grgPointByRefCellVertical.getValue())){if(this.grgPointByRefCellHorizontal.isValid()&&this.grgPointByRefCellVertical.isValid()){switch(this.grgPointByRefSystemGridSize.getValue()){case "UTM":a=0>b.x?b.x-b.x%6-6:b.x-b.x%6;d=0>b.y?b.y-b.y%8-8:b.y-b.y%8;break;case "100000":c=ca.LLtoMGRS(b.y,b.x,5);c=c.substring(0,c.length-10);c+="0000000000";break;
case "10000":c=ca.LLtoMGRS(b.y,b.x,1);break;case "1000":c=ca.LLtoMGRS(b.y,b.x,2);break;case "100":c=ca.LLtoMGRS(b.y,b.x,3);break;case "10":c=ca.LLtoMGRS(b.y,b.x,4)}if("UTM"===this.grgPointByRefSystemGridSize.getValue())c=new T(a,d),a=6*this.grgPointByRefCellHorizontal.getValue(),b=8*this.grgPointByRefCellVertical.getValue(),d=new N({xmin:c.x,ymin:c.y,xmax:c.x+a,ymax:c.y+b,spatialReference:{wkid:4326}});else{c=ca.USNGtoPoint(c);if(isNaN(c.x)||isNaN(c.y)){new B({message:this.nls.grgPolarOriginError});
return}a=this.util.convertToMeters(this.grgPointByRefSystemGridSize.getValue(),this._cellUnits)*this.grgPointByRefCellHorizontal.getValue();b=this.util.convertToMeters(this.grgPointByRefSystemGridSize.getValue(),this._cellUnits)*this.grgPointByRefCellVertical.getValue();a=da.getDestinationPoint(c,90,a);a=da.getDestinationPoint(a,0,b);b=this.util.convertToMeters(this.grgPointByRefSystemGridSize.getValue(),this._cellUnits)/5;c=da.getDestinationPoint(c,45,b);a=da.getDestinationPoint(a,225,b);d=new N({xmin:c.x,
ymin:c.y,xmax:a.x,ymax:a.y,spatialReference:{wkid:4326}})}H.checkPolarRegion(d)&&new B({message:this.nls.grgPolarRegionError});d=Q.geographicToWebMercator(d);a=ba.zonesFromExtent(d,this.map);var f;c=[];switch(this.grgPointByRefSystemGridSize.getValue()){case "UTM":for(b=0;b<a.length;b++)d=4326!==this.map.spatialReference.wkid?new C(Q.geographicToWebMercator(a[b].gridPolygon.unclippedPolygon)):new C(a[b].gridPolygon.unclippedPolygon),f=this.grgPointByRefLabelFormat.value,f=f.replace(/Z/,a[b].gridPolygon.text),
d.setAttributes({grid:f}),c.push(d),e.push(d.geometry);break;default:a=ba.processZonePolygons(a,this.map,d);for(f=1E4;f>=this.grgPointByRefSystemGridSize.getValue();){var g=[];for(b=0;b<a.length;b++)g=g.concat(ba.handleGridSquares(a[b],this.map,f,d));a=[];a=g;f/=10}for(b=0;b<a.length;b++)d=4326!==this.map.spatialReference.wkid?new C(a[b].clippedPolyToUTMZone):new C(Q.webMercatorToGeographic(a[b].clippedPolyToUTMZone)),"gridReferenceSystem"===this._labelTypeWithRefSys&&(f=this.grgPointByRefLabelFormat.value,
f=f.replace(/Y/,a[b].y),f=f.replace(/X/,a[b].x),f=f.replace(/S/,a[b].GZD),f=f.replace(/Z/,a[b].utmZone+a[b].latitudeZone),d.setAttributes({grid:f}),c.push(d)),e.push(d.geometry)}0<e.length&&(b=F.union(e),this.map.setExtent(b.getExtent().expand(2),!1));"gridReferenceSystem"!==this._labelTypeWithRefSys&&(c=H.labelReferenceGrid(e,this._labelTypeWithRefSys,this._labelStartPosition,this.grgPointByRefSystemGridSize.getValue()));this.GRGArea.applyEdits(c,null,null);this._graphicsLayerGRGExtent.hide();this._showPanel("publishPage")}}else new B({message:this.nls.tooManyCellsErrorMessage})},
_grgAreaByRefSystemCreateGRGButtonClicked:function(){var a,b;if(this._graphicsLayerGRGExtent.graphics[0]){var c=parseInt(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent().getWidth(),10)/this.grgAreaByRefSystemGridSize.getValue(),d=parseInt(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent().getHeight(),10)/this.grgAreaByRefSystemGridSize.getValue();if(H.checkGridSize(c,d)||"UTM"===this.grgAreaByRefSystemGridSize.getValue()){4326!==this.map.spatialReference.wkid?H.checkPolarRegion(Q.webMercatorToGeographic(this._graphicsLayerGRGExtent.graphics[0].geometry))&&
new B({message:this.nls.grgPolarRegionError}):H.checkPolarRegion(this._graphicsLayerGRGExtent.graphics[0].geometry)&&new B({message:this.nls.grgPolarRegionError});c=[];this._clearLayers(!1);var e=ba.zonesFromExtent(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent(),this.map),d=[];switch(this.grgAreaByRefSystemGridSize.getValue()){case "UTM":for(f=0;f<e.length;f++)a=this.grgAreaByRefSystemClipToggle.checked?4326!==this.map.spatialReference.wkid?new C(e[f].gridPolygon.clippedPolygon):new C(Q.webMercatorToGeographic(e[f].gridPolygon.clippedPolygon)):
4326!==this.map.spatialReference.wkid?new C(Q.geographicToWebMercator(e[f].gridPolygon.unclippedPolygon)):new C(e[f].gridPolygon.unclippedPolygon),c.push(a.geometry),b=this.grgAreaByRefLabelFormat.value,b=b.replace(/Z/,e[f].gridPolygon.text),a.setAttributes({grid:b}),d.push(a);break;default:e=ba.processZonePolygons(e,this.map,this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent());for(a=1E4;a>=this.grgAreaByRefSystemGridSize.getValue();){b=[];for(f=0;f<e.length;f++)b=b.concat(ba.handleGridSquares(e[f],
this.map,a,this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent()));e=[];e=b;a/=10}for(var f=0;f<e.length;f++)a=this.grgAreaByRefSystemClipToggle.checked?4326!==this.map.spatialReference.wkid?new C(e[f].clippedPolygon):new C(Q.webMercatorToGeographic(e[f].clippedPolygon)):4326!==this.map.spatialReference.wkid?new C(e[f].clippedPolyToUTMZone):new C(Q.webMercatorToGeographic(e[f].clippedPolyToUTMZone)),c.push(a.geometry),"gridReferenceSystem"===this._labelTypeWithRefSys&&(b=this.grgAreaByRefLabelFormat.value,
b=b.replace(/Y/,e[f].y),b=b.replace(/X/,e[f].x),b=b.replace(/S/,e[f].GZD),b=b.replace(/Z/,e[f].utmZone+e[f].latitudeZone),a.setAttributes({grid:b}),d.push(a))}0<c.length&&(f=F.union(c),this.map.setExtent(f.getExtent().expand(2),!1));"gridReferenceSystem"!==this._labelTypeWithRefSys&&(d=H.labelReferenceGrid(c,this._labelTypeWithRefSys,this._labelStartPosition,this.grgAreaByRefSystemGridSize.getValue()));this.GRGArea.applyEdits(d,null,null);this._graphicsLayerGRGExtent.hide();this._showPanel("publishPage")}else new B({message:this.nls.tooManyCellsErrorMessage})}},
createGraphicDeleteMenu:function(){var a,c=new w({});c.addChild(new f({label:this.nls.deleteBtn,onClick:b.hitch(this,function(){this.GRGArea.remove(a);this.GRGArea.refresh()})}));c.startup();this.own(this.GRGArea.on("mouse-over",function(b){a=b.graphic;c.bindDomNode(b.graphic.getDojoShape().getNode())}));this.own(this.GRGArea.on("mouse-out",function(a){c.unBindDomNode(a.graphic.getDojoShape().getNode())}))},_removeStyleFile:function(a,b){var c=null,c="js"===b?"src":"css"===b?"href":"none";b=document.getElementsByTagName("js"===
b?"script":"css"===b?"link":"none");for(var d=b.length;0<=d;d--)b[d]&&null!==b[d].getAttribute(c)&&-1!==b[d].getAttribute(c).indexOf(a)&&b[d].parentNode.removeChild(b[d])},_setTheme:function(){"DartTheme"===this.appConfig.theme.name?D.loadStyleLink("darkOverrideCSS",this.folderUrl+"css/dartTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dartTheme.css","css");"DashboardTheme"===this.appConfig.theme.name&&"default"===this.appConfig.theme.styles[0]?D.loadStyleLink("darkDashboardOverrideCSS",
this.folderUrl+"css/dashboardTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dashboardTheme.css","css")},destroy:function(){this.inherited(arguments);this.map.removeLayer(this._graphicsLayerGRGExtent);this.map.removeLayer(this.GRGArea)},_initSaveToPortal:function(a){E.registerOAuthInfos();E.getCredential(this.appConfig.portalUrl+"/sharing",{oAuthPopupConfirmation:!1}).then(b.hitch(this,function(){var c=new u.Portal(this.appConfig.portalUrl);c.signIn().then(b.hitch(this,function(d){var e=
d.credential.token,f=d.orgId,g=d.username;if("org_user"===d.role)this.publishMessage.innerHTML=this.nls.createService.format(this.nls.userRole),this._updateLastFocusNode();else{var h=this.appConfig.portalUrl+"sharing/content/users/"+g+"/createService";H.isNameAvailable(this.appConfig.portalUrl+"sharing/rest/portals/"+f+"/isServiceNameAvailable",e,a).then(b.hitch(this,function(d){d.available?(this.busyIndicator.show(),H.createFeatureService(h,e,H.getFeatureServiceParams(a,this.map)).then(b.hitch(this,
function(c){if(c.success){var d=c.serviceurl.replace(/rest/g,"rest/admin")+"/addToDefinition";H.addDefinitionToService(d,e,H.getLayerParams(a,this.map,this._cellTextSymbol,this._GRGAreaFillSymbol)).then(b.hitch(this,function(d){if(d.success){d=new Y(c.serviceurl+"/0?token\x3d"+e,{id:a,outFields:["*"]});d._wabProperties={itemLayerInfo:{portalUrl:this.appConfig.portalUrl,itemId:c.itemId}};this.map.addLayer(d);var f;if(d.loaded)f=G.getInstanceSync().getLayerInfoById(a),f.enablePopup(),this._showLabels&&
f.showLabels();else d.on("load",b.hitch(this,function(){f=G.getInstanceSync().getLayerInfoById(a);f.enablePopup();this._showLabels&&f.showLabels()}));var g=[];q.forEach(this.GRGArea.graphics,function(a){g.push(new C(a.geometry,null,{grid:a.attributes.grid}))},this);d.applyEdits(g,null,null).then(b.hitch(this,function(){this._reset()})).otherwise(b.hitch(this,function(){this._reset()}));this.busyIndicator.hide();this.publishMessage.innerHTML=this.nls.successfullyPublished.format('\x3cbr /\x3e\x3ca role\x3d"link" tabindex\x3d"0" aria-label\x3d"'+
this.nls.successfullyPublished+'" href\x3d"'+this.appConfig.portalUrl+"home/item.html?id\x3d"+c.itemId+'" target\x3d"_blank"\x3e')+"\x3c/a\x3e";this._updateLastFocusNode()}}),b.hitch(this,function(a){this.busyIndicator.hide();this.publishMessage.innerHTML=this.nls.addToDefinition.format(a.message);this._updateLastFocusNode()}))}else this.busyIndicator.hide(),this.publishMessage.innerHTML=this.nls.unableToCreate.format(a),this._updateLastFocusNode()}),b.hitch(this,function(a){this.busyIndicator.hide();
this.publishMessage.innerHTML=this.nls.createService.format(a.message);this._updateLastFocusNode()}))):c.queryItems({q:"name:"+a+" AND owner:"+g}).then(b.hitch(this,function(c){if(0<c.results.length){c=q.map(c.results,function(b){if(b.name===a)return b},this);var d=new Y(c[0].url+"/0?token\x3d"+e,{id:a,outFields:["*"]});d._wabProperties={itemLayerInfo:{portalUrl:this.appConfig.portalUrl,itemId:c[0].id}};var f=[];q.forEach(this.GRGArea.graphics,function(a){f.push(new C(a.geometry,null,{grid:a.attributes.grid}))},
this);d.applyEdits(f,null,null).then(b.hitch(this,function(){this._reset()})).otherwise(b.hitch(this,function(){this._reset()}));l.publish("moveMap",!1);this.publishMessage.innerHTML=this.nls.successfullyPublished.format('\x3cbr /\x3e\x3ca role\x3d"link" tabindex\x3d"0" aria-label\x3d"'+this.nls.successfullyPublished+'" href\x3d"'+this.appConfig.portalUrl+"home/item.html?id\x3d"+c[0].id+'" target\x3d"_blank"\x3e')+"\x3c/a\x3e";this._updateLastFocusNode()}}),b.hitch(this,function(){this.busyIndicator.hide();
this.publishMessage.innerHTML=this.nls.publishingFailedLayerExists.format(a);this._updateLastFocusNode()}))}),b.hitch(this,function(a){this.busyIndicator.hide();this.publishMessage.innerHTML=this.nls.checkService.format(a.message);this._updateLastFocusNode()}))}}),b.hitch(this,function(a){this.publishMessage.innerHTML="ERROR: Error in opening workspace"===a.message?this.nls.publishWorskpaceError:a.message;this._updateLastFocusNode()}))}));E.destroyCredentials()},_supportAccessibility:function(){"mainPage"===
this._currentOpenPanel?(D.initFirstFocusNode(this.domNode,this.newGRGAreaButton),D.initLastFocusNode(this.domNode,this.newGRGPointButton)):"grgAreaBySize"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.grgAreaBySizePanelBackButton,this.grgAreaBySizeClearGRGButton):"grgAreaByRefSystem"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.grgAreaByRefSystemPanelBackButton,this.grgAreaByRefSystemClearGRGButton):"grgPointBySize"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.grgPointBySizePanelBackButton,
this.grgPointBySizeClearGRGButton):"grgPointByRefSystem"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.grgPointByRefSystemPanelBackButton,this.grgPointByRefSystemClearGRGButton):"grgPointByTime"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.grgPointByTimeBackButton,this.grgPointByTimeClearGRGButton):"publishPage"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.publishPanelBackButton,this.grgAreaBySizePublishGRGButton):"settingsPage"===this._currentOpenPanel&&
(D.initFirstFocusNode(this.domNode,this.gridSettingsPanelBackButton),this._checkGridSettingTabSelected(),this._updateLastFocusNode())},_updateLastFocusNode:function(){if("publishPage"===this._currentOpenPanel){D.initLastFocusNode(this.domNode,this.grgAreaBySizePublishGRGButton);var a=c("a",this.publishMessage)[0];""!==this.publishMessage.innerHTML&&a&&(D.initLastFocusNode(this.domNode,this.publishMessage),V.focus(a))}else"settingsPage"===this._currentOpenPanel?this._checkGridSettingTabSelected()?
("grgPointByRefSystem"===this._lastOpenPanel||"grgAreaByRefSystem"===this._lastOpenPanel?V.focus(this._gridSettingsInstance.referenceSystem.domNode):V.focus(this._gridSettingsInstance.cellShape.domNode),D.initLastFocusNode(this.domNode,this._gridSettingsInstance.gridFillColorPicker.spinner.domNode)):(V.focus(this._gridSettingsInstance.labelStartPosition.domNode),D.initLastFocusNode(this.domNode,this._gridSettingsInstance.fontSetting.showHalo.domNode)):"mainPage"===this._currentOpenPanel&&D.initLastFocusNode(this.domNode,
this.newPointGRGFromTimeButton)},_checkGridSettingTabSelected:function(){return"none"===g.get(this._gridSettingsInstance.gridTab,"display")?!1:!0},_moveMap:function(){var a=this.map.spatialReference,b=new N;b.xmin=this.map.extent.xmin+1E-4;b.ymin=this.map.extent.ymin;b.xmax=this.map.extent.xmax;b.ymax=this.map.extent.ymax;b.spatialReference=a;this.map.setExtent(b)},_setFirstAndLastFocusNode:function(a,b){D.initFirstFocusNode(this.domNode,a);V.focus(a);D.initLastFocusNode(this.domNode,b)}})});