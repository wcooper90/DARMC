// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/geoenrichment/SelectableTree":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented ./when dojo/store/util/QueryResults dojo/store/util/SimpleQueryEngine dstore/QueryResults".split(" "),function(m,h,l,e,c,f,d,k){var b=function(a,b){this.storage=a;this.data=b};b.prototype={storage:null,data:null,filter:function(a){return this.storage._filter(this.data,a)},sort:function(a,b){return this.storage._sort(this.data,a,b)},fetch:function(){return this.storage._fetchRange(this.data)},
fetchRange:function(a){return this.storage._fetchRange(this.data,a)},mayHaveChildren:function(a){return this.storage.mayHaveChildren(a)},getChildren:function(a){return this.storage.getChildren(a,{returnCollection:!0})}};return m(e,{idProperty:"id",bindingProperty:null,autoIdentify:!0,queryEngine:d,isDstoreTree:!1,root:null,data:null,_hash:null,_autoId:null,storage:null,constructor:function(a,b){h.mixin(this,b);this.storage=this;this.root={children:a||[]};h.mixin(this._provideBinding(this.root),{deepness:-1,
selectCount:0,leafCount:0});this._hash={};this.idProperty&&this.autoIdentify&&(this._autoId=1);this._initializeNode(this.root,0);this.data=this.root.children},_provideBinding:function(a){var b=this._getBinding(a);b||(a[this.bindingProperty]=b={});return b},_getBinding:function(a){return this.bindingProperty?a[this.bindingProperty]:a},_initializeNode:function(a,b){var c=this._provideBinding(a);c.selected=!!c.selected;a.children?(c.selectCount=0,c.leafCount=0,l.forEach(a.children,function(g){this._registerNode(g);
var n=this._provideBinding(g);n.parent=a;n.deepness=b;this._initializeNode(g,b+1);c.selectCount+=n.selectCount;c.leafCount+=n.leafCount},this),c.selectCount)?c.selectCount===c.leafCount&&(c.selected=!0):c.selected=!1:("number"!==typeof c.leafCount&&(c.leafCount=1),c.selectCount=c.selected?c.leafCount:0)},isOwned:function(a,b){return b||a!==this.root?this.get(this.getIdentity(a))===a:!0},_registerNode:function(a){this._autoId&&void 0===a[this.idProperty]&&(a[this.idProperty]=this._autoId++);this.idProperty&&
(this._hash[a[this.idProperty]]=a)},_unregisterNode:function(a){this.isOwned(a,!0)&&delete this._hash[a[this.idProperty]]},clear:function(){this.root.children.length&&(l.forEach(this.root.children,function(a){this._unbindNode(a)},this),this.data=this.root.children=[])},destroy:function(){this.clear()},_unbindNode:function(a){a.children&&l.forEach(a.children,function(a){delete this._getBinding(a).parent;this._unbindNode(a)},this);this._unregisterNode(a);var b=this._getBinding(a);b.parent&&(this._incrementCounts(b.parent,
-b.selectCount,-b.leafCount),delete b.parent);b!==a&&delete a[this.bindingProperty]},removeNodes:function(a,b){l.forEach(a&&a.slice(),function(a){if(this.isOwned(a,!0)){var g=this._getBinding(a).parent,b=l.indexOf(g.children,a);0<=b&&g.children.splice(b,1);this._unbindNode(a)}},this);!b&&this.emit("updated")},addNodes:function(a,b,c){if(!b)b=this.root;else if(!this.isOwned(b)||!b.children)return!1;var g=this._getBinding(b).deepness+1,n=0,f=0;l.forEach(a,function(a){if(!this.isOwned(a)){b.children.push(a);
this._registerNode(a);var c=this._provideBinding(a);c.parent=b;c.deepness=g;this._initializeNode(a,g+1);n+=c.selectCount;f+=c.leafCount}},this);this._incrementCounts(b,n,f);!c&&this.emit("updated");return!0},select:function(a,b){return this.changeSelect(a,!0,b)},deselect:function(a){this.changeSelect(a,!1)},changeSelect:function(a,b,c){c=c||this.root.leafCount;var g=a&&this._getBinding(a);if(g){b=!!b;var n=(b?g.leafCount:0)-g.selectCount,f=0>n||this.root.selectCount+n<=c;if(!a.children)return f&&
(g.selected=b,n&&this._incrementCounts(a,n)),f;f&&(g.selected=b);l.forEach(a.children,function(a){this.changeSelect(a,b,c)},this);return f}},_incrementCounts:function(a,b,c){a=this._getBinding(a);a.selectCount+=b;c&&(a.leafCount+=c);a.selectCount?a.selectCount==a.leafCount&&(a.selected=!0):a.selected=!1;a.parent&&this._incrementCounts(a.parent,b,c)},getSelectionState:function(a){if(!this.isOwned(a))return!1;a=this._getBinding(a);return a.selectCount&&a.selectCount!=a.leafCount?"mixed":a.selected=
!!a.selectCount},getSelectedNodes:function(a){return this.getDescendingNodes(this.root,!0,a)},getDescendingNodes:function(a,b,c){if(!this.isOwned(a))return[];var g=[];this._collectNodes(a.children,g,b,c);return g},_collectNodes:function(a,b,c,g){l.forEach(a,function(a){var f=this._getBinding(a),n=null===c||void 0===c?f.leafCount:c?f.selectCount:f.leafCount-f.selectCount;n&&(!a.children||!g&&n==f.leafCount?b.push(a):this._collectNodes(a.children,b,c,g))},this)},inspectChildren:function(a,b,c,g){g&&
(b=h.hitch(g,b));a=a||this.root;(a=a.children)&&c&&(a=a.slice(),a.sort(c));return l.every(a,function(a){var g=b(a);return null===g?!1:!1!==g&&a.children?this.inspectChildren(a,b,c):!0},this)},updateExpandedNodes:function(a,b){for(var c in this._hash)this.updateExpand(this._hash[c],!!a[c]);this._updateOddEven(null,b)},updateExpand:function(a,b,c,g){if(a){var f=!1;a.children&&(a=this._getBinding(a),a.expanded!==b&&(f=!0,a.expanded=b));b={};f&&c&&this._updateOddEven(b,g);return b}},_updateOddEven:function(a,
b){var c=1;this.inspectChildren(null,function(b){!1!==b.visible&&(c=1-c);var g=this._getBinding(b);a&&g.isOdd!==c&&(a[this.getIdentity(b)]=c);g.isOdd=c;return!(!b.children||!g.expanded)},b,this)},isOdd:function(a){return(a=this._getBinding(a))&&a.isOdd},get:function(a){return this._hash[a]},getIdentity:function(a){return this.idProperty?a[this.idProperty]:null},query:function(a,b){return f(this._query(this.data,a,b))},_query:function(a,b,c){return this.queryEngine(b,c)(a)},filter:function(a){return this._filter(this.data,
a)},_filter:function(a,c){a=this._query(a,c);return new b(this.storage,a)},sort:function(a,b){return this._sort(this.data,a,b)},_sort:function(a,c,f){"function"===typeof c?(a=a.slice(),a.sort(c)):(c=Array.isArray(c)?c.map(function(a){return{attribute:a.property,descending:a.descending}}):[{attribute:c,descending:f}],a=this._query(a,{},{sort:c}));return new b(this.storage,a)},mayHaveChildren:function(a){return!!a.children},getChildren:function(a,c){var d=this.isOwned(a,!0)?a.children:null;a=this.isDstoreTree||
c&&c.returnCollection;c=this.queryEngine({},a?null:c)(d||[]);return a?new b(this.storage,c):f(c)},fetch:function(){return this._fetchRange(this.data)},fetchRange:function(a){return this._fetchRange(this.data,a)},_fetchRange:function(a,b){return k(c(b?a.slice(b.start,b.end):a.slice()),{totalLength:c(a.length)})}})})},"esri/dijit/geoenrichment/when":function(){define(["dojo/when"],function(m){return m})},"dstore/QueryResults":function(){define(["dojo/_base/lang","dojo/when"],function(m,h){function l(e,
c){return h(this,function(f){for(var d=0,k=f.length;d<k;d++)e.call(c,f[d],d,f)})}return function(e,c){var f=c&&"totalLength"in c;if(e.then){e=m.delegate(e);var d=e.then(function(d){var b=f?c.totalLength:d.totalLength||d.length;d.totalLength=b;return!f&&b});e.totalLength=f?c.totalLength:d;e.response=c&&c.response}else e.totalLength=f?c.totalLength:e.length;e.forEach=l;return e}})},"widgets/BusinessAnalyst/esriAnalystX/widgets/SelectableTreeGrid/SelectableTreeGrid":function(){define("dojo/_base/declare dojo/aspect dojo/Evented dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/query dijit/Tooltip dijit/_WidgetBase ../../dijit/_TemplatedMixin dgrid/OnDemandGrid dgrid/tree esri/dijit/geoenrichment/utils/KeyboardUtil esri/dijit/geoenrichment/TriStateItem ../../dijit/utils/DgridUtil ../../dijit/utils/DomUtil ../../dijit/utils/MouseUtil ../../dijit/tooltips/TooltipUtil dojo/text!./templates/SelectableTreeGrid.html xstyle/css!./css/SelectableTreeGrid.css".split(" "),
function(m,h,l,e,c,f,d,k,b,a,p,q,g,n,u,r,t,z,B,v){var A=m(null,{_selectedRowInfos:null,_lastSelectedRowInfo:null,_outsideHandler:null,_isSelectionFrozen:!1,keepSelectionOnOutsideClick:!1,_previouslySelectedRowsByNode:null,constructor:function(){this._previouslySelectedRowsByNode=new WeakMap},buildRendering:function w(){this._selectedRowInfos={};this.inherited(w,arguments)},postCreate:function x(){this.inherited(x,arguments);e.add(this.domNode,"esriMapsAnalystXNonSelectable")},_reselectSingleNode:function(a){this.selectSingleRow(this._previouslySelectedRowsByNode.get(a),
a)},selectSingleRow:function(a,b){this.unselectAllRows();this._selectRow(a,b)},_selectRow:function(a,b){e.add(a,this.selectedRowClass);e.add(a,"row-level-"+this._getNodeLevel(b));var g=this.tree.getIdentity(b),c={row:a,node:b,nodeId:g,index:b.parent&&b.parent.children.indexOf(b)};this._lastSelectedRowInfo=this._selectedRowInfos[g]=c;this._previouslySelectedRowsByNode.set(b,a);var f=this;this._outsideHandler=this._outsideHandler||d(document.body,"click",function(){z.isMouseOver(f.domNode)||f._isSelectionFrozen||
f.keepSelectionOnOutsideClick||f.unselectAllRows()})},_unselectRow:function(a,b){delete this._selectedRowInfos[this.tree.getIdentity(b)];e.remove(a,this.selectedRowClass)},unselectAllRows:function(){for(var a in this._selectedRowInfos)e.remove(this._selectedRowInfos[a].row,this.selectedRowClass);this._selectedRowInfos={};this._lastSelectedRowInfo=null;this._outsideHandler&&this._outsideHandler.remove();this._outsideHandler=null},getSelectedRowNodes:function(){return this._getSelectedNodesRows().nodes},
selectRowNodes:function(a){var b=this;a&&a.forEach(function(a){var g=b.grid.row(a);g&&g.element&&b._selectRow(g.element,a)})},freezeRowSelection:function(){this._isSelectionFrozen=!0},unfreezeRowSelection:function(){this._isSelectionFrozen=!1},_getSelectedNodesRows:function(){var a=[],b=[],g=[],c;for(c in this._selectedRowInfos)g.push(this._selectedRowInfos[c]);g.sort(function(a,b){return a.index-b.index});g.forEach(function(g){a.push(g.node);b.push(g.row)});return{nodes:a,rows:b}},_emitSelectedRowsEvent:function(){var a=
this._getSelectedNodesRows();if(a.nodes.length)this.onRowsSelected(a.nodes,a.rows)}});return m([a,p,l,A],{templateString:v,tree:null,grid:null,gridClass:"",highlightSelected:!0,firstColumns:null,additionalColumns:null,showRootCheckbox:!0,showCheckboxColumn:!0,showHeader:!0,labelColumnField:"label",gridParams:null,keepContentUnderScroll:void 0,hideInvisibleExpandoIcons:!1,expandOnNodeClick:!1,checkLimit:0,checkLimitMessage:null,checkLimitMessageTimeout:5E3,handleMultipleCheck:!1,enableRowSelection:!1,
enableMultipleRowSelection:!1,allowSelectionFromManyParents:!1,selectedRowFilter:null,selectedRowClass:"row-selected",enableHeaderLabelToggleClick:!0,defaultExpand:null,fitParentSize:!1,renderAllRows:!1,rowPostProcessor:null,_rootCheckbox:null,_checkboxes:null,_lastCheckedNode:null,updateSelectionCountDiv:function(a,b){},getLabel:function(a,b){return a.label},postCreate:function C(){this.inherited(C,arguments);this._createGrid()},resize:function(){this.grid.resize();this._updateCheckboxState(this._rootCheckbox);
for(var a in this._checkboxes)this._updateCheckboxState(this._checkboxes[a]);this._emitSelectionChanged()},setWidth:function(a){this.grid&&this.grid.domNode&&f.set(this.grid.domNode,"width",a+"px")},setHeight:function(a){this.grid&&this.grid.domNode&&f.set(this.grid.domNode,"height",a+"px")},row:function(a){return this.grid.row(a)},cell:function(a){return this.grid.cell(a)},_labelColumn:null,_createGrid:function(){var a=this;this._checkboxes={};var b={label:this.getLabel(this.tree.root,!0),sortable:!1,
field:this.labelColumnField,renderCell:this._renderLabel.bind(this),renderHeaderCell:this._renderLabelHeader.bind(this,this.tree.root)},g;if(this.additionalColumns&&this.additionalColumns.length&&(g=this.additionalColumns.filter(function(b){return b.field===a.labelColumnField})[0])){for(var c in b)void 0===g[c]&&(g[c]=b[c]);b=g}b.indentWidth=b.indentWidth||16;this._labelColumn=b=this._prepareTreeColumn(b);c=[];this.firstColumns&&(c=c.concat(this.firstColumns));this.showCheckboxColumn&&c.push({label:"",
field:"checkbox",sortable:!1,renderCell:this._renderCheckboxForColumn.bind(this),renderHeaderCell:this._renderCheckboxForColumn.bind(this,this.tree.root)});g||c.push(b);this.additionalColumns&&(c=c.concat(this.additionalColumns));b=["esriMapsAnalystXSelectableTreeGrid"];this.gridClass&&b.push(this.gridClass);this.fitParentSize&&b.push("fitParentSize");b=Object.assign({class:b.join(" "),keepScrollPosition:!0,store:this.tree,columns:c},this.gridParams);this.grid=this._createGridObject(b,this.gridContainer);
this.own(this.grid);this.grid._expanded=this.defaultExpand||this.grid._expanded||{};r.oddEvenFix(this.grid);this.own(d(this.tree,"updated",this._onStoreUpdated.bind(this)));this._addKeepScrollHandlers();this._addGridHandlers();this.renderAllRows&&(this.grid.minRowsPerPage=1E4,this.grid.maxRowsPerPage=10250);this.grid.startup();B.autoTooltip(this.domNode);this.showHeader||e.add(this.domNode,"esriMapsAnalystXGridNoHeader");d(this.grid.domNode,".dgrid-expando-icon:click,.dgrid-content .dgrid-column-labelColumn:dblclick,.dgrid-content .dgrid-column-labelColumn:keydown",
function(b){(b=a.grid.row(b))&&a.onExpandChangedUser(b.data)})},_createGridObject:function(a,b){return new q(a,b)},onRowInserted:function(a,b){},_addGridHandlers:function(){function a(a,g){b.enableRowSelection&&g.parent&&(!b.selectedRowFilter||b.selectedRowFilter(g))&&(e.add(a,"esriMapsAnalystXClickable"),d(a,"click",function(c){setTimeout(function(){if(!b._isSelectionFrozen){if(c.shiftKey&&b.enableMultipleRowSelection){if(b._lastSelectedRowInfo&&b._lastSelectedRowInfo.row.parentNode&&b._lastSelectedRowInfo.node.parent===
g.parent){var f=t.getChildIndex(b._lastSelectedRowInfo.row.parentNode,b._lastSelectedRowInfo.row),d=t.getChildIndex(a.parentNode,a),e=f<=d?b._lastSelectedRowInfo.row:a,f=f<=d?a:b._lastSelectedRowInfo.row,d=e;if(e.id!==f.id){do{e=b.grid.row(d).data;b._selectRow(d,e);if(d.id===f.id)break;d=d.nextSibling}while(d)}}else b.selectSingleRow(a,g);t.stealFocus()}else n.isCtrl(c)&&b.enableMultipleRowSelection?b._lastSelectedRowInfo&&b._lastSelectedRowInfo.row.parentNode&&b._lastSelectedRowInfo.node.parent===
g.parent||b.allowSelectionFromManyParents?b._selectedRowInfos[g.id]?b._unselectRow(a,g):b._selectRow(a,g):b.selectSingleRow(a,g):b.selectSingleRow(a,g);b._emitSelectedRowsEvent()}})}))}var b=this;this.own(h.after(this.grid,"insertRow",function(g){var c=g&&b.grid._rowIdToObject[g.id];if(g){if(c&&b.hideInvisibleExpandoIcons&&(!c.children||!c.children.length)){var f=k(".dgrid-expando-icon",g)[0];f&&(f.style.width="0")}t[c&&!1===c.visible?"hide":"show"](g);a(g,c)}c&&(b._updateRowHighlighting(c,g),b.onRowInserted(g,
c));b.rowPostProcessor&&b.rowPostProcessor(g,c);return g}))},_addKeepScrollHandlers:function(){function a(a){if(!b.grid.contentNode)return a;if(b.fitParentSize){var g=t.hasScrollbars(b.grid.bodyNode);b.grid.headerNode.style[b.isLeftToRight()?"right":"left"]=g.w?"":"0px";b._lastContentWidth=b.grid.contentNode.style.width||b._lastContentWidth||"";b.grid.contentNode.style.width=g.h?b._lastContentWidth:""}else b.keepContentUnderScroll?b.grid.contentNode.style.width=b.grid.headerNode.firstChild.offsetWidth+
"px":!1===b.keepContentUnderScroll&&(b.grid.contentNode.style.width="");return a}var b=this;if(this.fitParentSize||void 0!==this.keepContentUnderScroll)h.before(this.grid,"refresh",function(){b.hideCheckLimitMessage();b._lastCheckedNode=null}),h.after(this.grid,"resize",a),h.after(this.grid,"refresh",a)},_getNodeLevel:function(a){var b=-1;for(a=a&&a.parent;a;)b++,a=a.parent;return b},_prepareTreeColumn:function(a){return this._wrapTreeColumn(g(a))},_wrapTreeColumn:function(a){return a},_onStoreUpdated:function(){this._checkboxes=
{};this._refreshGrid();this._rootCheckbox&&this._updateCheckboxState(this._rootCheckbox);this._emitSelectionChanged()},_emitSelectionChanged:function(a){var b=this.tree.root.selectCount;this.updateSelectionCountDiv(this.selectionCounter,b);this.emit("SelectionChanged",{selected:b,toggledTreeNode:a})},refresh:function(){this._refreshGrid();this.refreshCheckboxes()},_isRefreshSuspended:!1,setRefreshSuspended:function(a){this._isRefreshSuspended=a},_refreshGrid:function(){if(!this._isRefreshSuspended){var a=
this.grid.getScrollPosition();this.grid.refresh();this.grid.scrollTo(a);for(var b in this._selectedRowInfos)this.grid.row(this._selectedRowInfos[b].node).element&&this._selectRow(this.grid.row(this._selectedRowInfos[b].node).element,this._selectedRowInfos[b].node)}},getScrollPosition:function(){return this.grid&&this.grid.getScrollPosition()},setScrollPosition:function(a){return this.grid&&this.grid.scrollTo(a)},_renderCheckbox:function(a){if(!a.leafCount&&a!==this.tree.root||!this.showCheckboxColumn||
!1===a.selectable&&void 0===a.indepSelection)return document.createTextNode("");var b=new u(null,{class:"esriStyleInTable"});b.autoToggle=!1;b.node=a;this._updateCheckboxState(b,a);!1===a.enabled&&b.set("disabled",!0);a===this.tree.root?(this._rootCheckbox=b,t[this.showRootCheckbox?"show":"hide"](b.domNode)):this._checkboxes[this.tree.getIdentity(a)]=b;b.onClick=this._onCheckboxClick.bind(this,a,b);return b},_renderCheckboxForColumn:function(a){return(a=this._renderCheckbox(a))&&a.domNode},refreshCheckboxes:function(){this._rootCheckbox&&
this._updateCheckboxState(this._rootCheckbox);for(var a in this._checkboxes)this._updateCheckboxState(this._checkboxes[a])},clearLastCheckInfo:function(){this._lastCheckedNode=null},_onCheckboxClick:function(a,b,g){g.stopPropagation();this.hideCheckLimitMessage();var c=this.handleMultipleCheck&&("function"!==typeof this.handleMultipleCheck||this.handleMultipleCheck(a));c&&g.shiftKey&&this._tryToggleMultipleNodes(this._lastCheckedNode,a,b||g)?this._lastCheckedNode=a:(this._lastCheckedNode=c?a:null,
this._toggleNodeSelection(a,b||g),this.refreshCheckboxes())},_tryToggleMultipleNodes:function(a,b,g){if(!a||a===b||a.parent!==b.parent)return!1;var c=b.parent.children,f=c.indexOf(a);b=c.indexOf(b);a=f<b?1:-1;for(var d=[],n=[],f=f+a;;f+=a){var e=c[f];((void 0===e.indepSelection?e.selected:e.indepSelection)?d:n).push(e);if(f===b)break}d.forEach(function(a){this._toggleNodeSelection(a,g)},this);n.every(function(a){return this._toggleNodeSelection(a,g)},this);this.refreshCheckboxes();return!0},_toggleNodeSelection:function(a,
b){var g=void 0===a.indepSelection?!a.selected:!a.indepSelection;if(g&&this.checkLimit){var c=this.getSelectedNodes().length,f="function"===typeof this.checkLimit?this.checkLimit(this.tree,c):this.checkLimit;if(c>=f)if(void 0===a.indepSelection&&a.children&&!1!==this.tree.getSelectionState(a))g=!1;else return this.showCheckLimitMessage(b),!1}c=!0;void 0===a.indepSelection?(c=this.tree.changeSelect(a,g,f),!c&&this.showCheckLimitMessage(b)):a.indepSelection=g;this._emitSelectionChanged(a);return c},
_checkLimitHandler:null,showCheckLimitMessage:function(a){if(this.checkLimitMessage){var g=a&&(a.domNode||a.target);g&&(b.show(this.checkLimitMessage,g,["above","below"]),a=function(){g&&b.hide(g);g=null},setTimeout(a,this.checkLimitMessageTimeout),this._checkLimitHandler=a,this.onCheckLimitReached(a))}},hideCheckLimitMessage:function(){this._checkLimitHandler&&this._checkLimitHandler();this._checkLimitHandler=null},onCheckLimitReached:function(a){},_updateCheckboxState:function(a){if(a){var b=this._getNodeSelection(a.node);
a.set("checked",b);this._updateRowHighlighting(a.node,null,b)}},_getNodeSelection:function(a){return void 0!==a.indepSelection?a.indepSelection:this.tree.getSelectionState(a)},_updateRowHighlighting:function(a,b,g){this.highlightSelected&&a&&(g=void 0!==g?g:this._getNodeSelection(a),(b=b||this.grid&&this.row(a).element)&&(!0!==g||void 0===a.indepSelection&&!1===a.selectable?e.remove(b,"selected"):e.add(b,"selected")))},_renderLabel:function(a,b,g){b=this._renderLabelNode(a);this._provideLabelClickAction(b,
g,a);return b},_provideLabelClickAction:function(a,b,g){var c=this.expandOnNodeClick&&g.children?g.children.length&&(a=b,function(){this.toggleExpand(g);this.onExpandChangedUser(g)}.bind(this)):!1!==g.enabled&&this.showCheckboxColumn?this._onCheckboxClick.bind(this,g,null):null;c&&(e.add(a,"esriMapsAnalystXClickable"),d(a,"click",function(a){a.stopPropagation();c(a)}))},_renderLabelNode:function(a){return c.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(a)})},
_renderLabelHeader:function(a){var b=c.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(a)||this._labelColumn&&this._labelColumn.label||""});this.enableHeaderLabelToggleClick&&this.showRootCheckbox&&(e.add(b,"esriMapsAnalystXClickable"),d(b,"click",this._onCheckboxClick.bind(this,a,null)));return b},onRowsSelected:function(a,b){},isNodeSelected:function(a){return a&&(a.selected||a.indepSelection)},getSelectedNodes:function(){var a=this.tree.getSelectedNodes(!1),
b=this._getIndepSelectedNodes();return a.concat(b)},_getIndepSelectedNodes:function(){function a(g){g&&(g.indepSelection&&b.push(g),g.children&&g.children.forEach(a))}var b=[];a(this.tree.root);return b},getSelectedState:function(){if(!this.tree)return null;var a={normalSelection:{},indepSelection:{}},b=this.tree.getSelectedNodes(!1);b&&b.forEach(function(b){a.normalSelection[b.id]=!0});(b=this._getIndepSelectedNodes())&&b.forEach(function(b){a.indepSelection[b.id]=!0});return a},setSelectedState:function(a){if(this.tree){this.tree.changeSelect(this.tree.root,
!1);if(a){for(var b in a.normalSelection){var g=this.tree.get(b);g&&this.tree.changeSelect(g,!0)}for(b in a.indepSelection)if(g=this.tree.get(b))g.indepSelection=!0}this.refreshCheckboxes()}},setNodeSelected:function(a,b,g){a&&(void 0!==a.indepSelection?a.indepSelection=b:this.tree.changeSelect(a,b),!1!==g&&this.refreshCheckboxes())},isExpanded:function(a){a="string"===typeof a?a:a[this.tree.idProperty];return this.grid._expanded&&this.grid._expanded[a]},setExpanded:function(a,b,g){a="string"==typeof a?
a:a[this.tree.idProperty];void 0!==a&&(!1!==g?(g=this.grid.row(a))&&g.element&&this.grid.expand(a,b):this.grid._expanded[a]=b)},toggleExpand:function(a){this.setExpanded(a,!this.isExpanded(a))},getExpandedState:function(){return Object.assign({},this.grid._expanded)},setExpandedState:function(a){this.grid._expanded=a||{}},onExpandChangedUser:function(a){},destroy:function(){this.unselectAllRows();this.inherited(arguments)}})})},"widgets/BusinessAnalyst/esriAnalystX/dijit/_TemplatedMixin":function(){define(["dojo/_base/declare",
"dijit/_TemplatedMixin","./_EscapeValueMixin"],function(m,h,l){return m([h,l],{})})},"widgets/BusinessAnalyst/esriAnalystX/dijit/_EscapeValueMixin":function(){define(["dojo/_base/declare"],function(m){return m(null,{_escapeValue:function(h){return h.replace(/"/g,"\x26quot;")}})})},"dgrid/tree":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred dojo/_base/lang dojo/query dojo/on dojo/aspect ./util/has-css3 ./Grid dojo/has!touch?./util/touch put-selector/put".split(" "),function(m,
h,l,e,c,f,d,k,b,a,p){function q(a,b,g,c){c=this.grid.isRTL?"right":"left";var f=".dgrid-expando-icon";b&&(f+=".ui-icon.ui-icon-triangle-1-"+(g?"se":"e"));a=p("div"+f+"[style\x3dmargin-"+c+": "+a*(this.indentWidth||9)+"px; float: "+c+"]");a.innerHTML="\x26nbsp;";return a}function g(a){var b=this,g=this.style.height;g&&(this.style.display="0px"==g?"none":"block");a&&(p(this,".dgrid-tree-resetting"),setTimeout(function(){p(b,"!dgrid-tree-resetting")}));this.style.height=""}function n(n){var e=n.renderCell||
b.defaultRenderCell,u,m;n||(n={});n.shouldExpand=n.shouldExpand||function(a,b,g){return g};d.after(n,"init",function(){var b=n.grid,e=".dgrid-content .dgrid-column-"+n.id,r=[];b.cleanEmptyObservers=!1;if(!b.store)throw Error("dgrid tree column plugin requires a store to operate.");n.renderExpando||(n.renderExpando=q);r.push(b.on(n.expandOn||".dgrid-expando-icon:click,"+e+":dblclick,"+e+":keydown",function(a){var g=b.row(a);b.store.mayHaveChildren&&!b.store.mayHaveChildren(g.data)||"keydown"==a.type&&
32!=a.keyCode||"dblclick"==a.type&&m&&1<m.count&&g.id==m.id&&-1<a.target.className.indexOf("dgrid-expando-icon")||b.expand(g);-1<a.target.className.indexOf("dgrid-expando-icon")&&(m&&m.id==b.row(a).id?m.count++:m={id:b.row(a).id,count:1})}));k("touch")&&r.push(b.on(a.selector(e,a.dbltap),function(){b.expand(this)}));b._expanded||(b._expanded={});r.push(d.after(b,"insertRow",function(a){var b=this.row(a);n.shouldExpand(b,u,this._expanded[b.id])&&this.expand(a,!0,!0);return a}));r.push(d.before(b,"removeRow",
function(a,g){if(a=a.connected)c("\x3e.dgrid-row",a).forEach(function(a){b.removeRow(a,!0)}),g||p(a,"!")}));n.collapseOnRefresh&&r.push(d.after(b,"cleanup",function(){this._expanded={}}));b._calcRowHeight=function(a){var b=a.connected;return a.offsetHeight+(b?b.offsetHeight:0)};b.expand=function(a,d,e){var q=a.element?a:b.row(a),u=k("transitionend");a=new l;var h=a.promise;a.resolve();a=q.element;a=-1<a.className.indexOf("dgrid-expando-icon")?a:c(".dgrid-expando-icon",a)[0];e=e||!1===n.enableTransitions;
if(a&&a.mayHaveChildren&&(e||d!==!!this._expanded[q.id])){var m=void 0===d?!this._expanded[q.id]:d;p(a,".ui-icon-triangle-1-"+(m?"se":"e")+"!ui-icon-triangle-1-"+(m?"e":"se"));d=q.element;var r=d.connected,x,t,y={originalQuery:this.query};if(!r){var r=y.container=d.connected=p(d,"+div.dgrid-tree-container"),z=function(a){return b.store.getChildren(q.data,a)};n.allowDuplicates&&(y.parentId=q.id);"level"in a&&(z.level=a.level);h=h.then(function(){if(b.renderQuery)return b.renderQuery(z,y);var a=p(r,
"div"),g=b.renderArray(z(y),a,"level"in z?{queryLevel:z.level}:{});l.when(g,function(){p(a,"!")});return g});u?f(r,u,g):g.call(r)}r.hidden=!m;x=r.style;!u||e?(x.display=m?"block":"none",x.height=""):(m?(x.display="block",t=r.scrollHeight,x.height="0px"):(p(r,".dgrid-tree-resetting"),x.height=r.scrollHeight+"px"),setTimeout(function(){p(r,"!dgrid-tree-resetting");x.height=m?t?t+"px":"auto":"0px"}));m?this._expanded[q.id]=!0:delete this._expanded[q.id]}return h};d.after(n,"destroy",function(){h.forEach(r,
function(a){a.remove()});delete b.expand;delete b._calcRowHeight})});n.renderCell=function(a,b,g,c){var f=n.grid,d=Number(c&&c.queryLevel)+1,k=!f.store.mayHaveChildren||f.store.mayHaveChildren(a),q=c.parentId,d=u=isNaN(d)?0:d,f=n.renderExpando(d,k,f._expanded[(q?q+"-":"")+f.store.getIdentity(a)],a);f.level=d;f.mayHaveChildren=k;(a=e.call(n,a,b,g,c))&&a.nodeType?(p(g,f),p(g,a)):g.insertBefore(f,g.firstChild)};return n}n.defaultRenderExpando=q;e.getObject("dgrid.tree",!0);return dgrid.tree=n})},"dgrid/util/has-css3":function(){define(["dojo/has"],
function(m){function h(e,c){e=e.style;var f;if(c in e)return!0;c=c.slice(0,1).toUpperCase()+c.slice(1);for(f=l.length;f--;)if(l[f]+c in e)return l[f];return!1}var l=["ms","O","Moz","Webkit"];m.add("css-transitions",function(e,c,f){return h(f,"transitionProperty")});m.add("css-transforms",function(e,c,f){return h(f,"transform")});m.add("css-transforms3d",function(e,c,f){return h(f,"perspective")});m.add("transitionend",function(){var e=m("css-transitions");return e?!0===e?"transitionend":{ms:"MSTransitionEnd",
O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[e]:!1});return m})},"esri/dijit/geoenrichment/utils/KeyboardUtil":function(){define(["dojo/on","dojo/sniff","./DomUtil"],function(m,h,l){var e={listenToKeyboardCombinationOverNode:function(a){return m(document.body,"keydown",function(b){if(!a.isCtrl||e.isCtrl(b))if(!a.isShift||b.shiftKey)if(!a.isAlt||b.altKey)String.fromCharCode(b.keyCode).toLowerCase()!==a["char"]||a.node&&!l.isNodeInLayout(a.node)||a.callback(b)})},isCtrl:function(a){return a.ctrlKey||
c.ctrlKey||c.cmdKey||h("mac")&&a.metaKey}},c={};if(h("mac")){var f=function(a,f){kC=a.keyCode;(d||k)&&(91===kC||93===kC)||b&&224===kC?c.cmdKey=f:16===kC?c.shiftKey=f:17===kC?c.ctrlKey=f:18===kC&&(c.altKey=f)},d=h("webkit"),k=h("opera"),b=h("mozilla");m(document.body,"keydown",function(a){f(a,!0)});m(document.body,"keyup",function(a){f(a,!1)})}return e})},"esri/dijit/geoenrichment/utils/DomUtil":function(){define("dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/query esri/dijit/geoenrichment/Deferred dojo/domReady!".split(" "),
function(m,h,l,e,c,f,d,k){function b(){p||(p=e.create("div",{"class":"esriGEOffscreen"},document.body));return p}var a={isHidden:function(a){return a&&l.contains(a,"esriGEHidden")},hasVisibleChildren:function(b){if(!b||!b.children.length)return!1;for(var g=0;g<b.children.length;g++)if(!a.isHidden(b.children[g]))return!0;return!1},hide:function(b){return a.addTag(b,"esriGEHidden")},show:function(b){return a.removeTag(b,"esriGEHidden")},display:function(b,c){return a[c?"show":"hide"](b)},addTag:function(b,
c){return a.applyCallback(b,function(a){a&&l.add(a,c)})},removeTag:function(b,c){return a.applyCallback(b,function(a){a&&l.remove(a,c)})},applyCallback:function(a,b,c){c&&(b=m.hitch(c,b));Array.isArray(a)?a.forEach(b):b(a);return a},getChildIndex:function(a,b){if(!a||!a.children||!b)return-1;for(var g=0;g<a.children.length;g++)if(a.children[g]===b)return g;return-1},getChildren:function(a){if(!a||!a.children)return null;for(var b=[],g=0;g<a.children.length;g++)b.push(a.children[g]);return b},getChildNodes:function(a){if(!a||
!a.childNodes)return null;for(var b=[],g=0;g<a.childNodes.length;g++)b.push(a.childNodes[g]);return b},isChildOf:function(a,b,c){var g=!1,f=function(a){if(c&&!c(a))return!1;a.parentNode===b?g=!0:a.parentNode&&f(a.parentNode)};a&&f(a);return g},isNodeInLayout:function(b){return a.isChildOf(b,document.body,function(b){return!a.isHidden(b)&&"none"!=f.get(b,"display")&&!l.contains(b,"dijitHidden")})},isNodeVisible:function(b){return a.isChildOf(b,document.body,function(a){return!l.contains(a,"dijitHidden")&&
"hidden"!=f.get(a,"visibility")})},isNodeOnscreen:function(b){return a.isChildOf(b,document.body,function(a){return!l.contains(a,"esriGEOffscreen")})},enableContent:function(a,b,d){if(a){d=d||{};var g=a.children.length-1;if(!(0>g)){g=a.children[g];l.contains(g,"esriGEDisabledContent")||(g=null);if(b)g&&a.removeChild(g);else if(g=g||e.create("div",{"class":"esriGEDisabledContent"+(d.overlayClass?" "+d.overlayClass:"")},a),d.textContent&&(g.textContent=d.textContent),!1!==d.fitParent&&(a=c[d.marginBox?
"getMarginBox":"getContentBox"](a).h))a=a.toString()+"px",f.set(g,{height:a,marginTop:"-"+a});return g}}},enableContentAbsolute:function(b,c,d){if(b){d=d||{};var g=f.get(b,"position");"relative"!==g&&"absolute"!==g&&f.set(b,"position","relative");return a.enableContent(b,c,{overlayClass:"esriGEAbsoluteStretched "+(d.overlayClass||"")+(d.isTransparent?" esriGEDisabledContentTransparent ":""),fitParent:!1,textContent:d.textContent})}}},p;a.hideNodeInBackground=function(a,c){if(a){if(a._hideNodeInBackgroundUndoController)return a._hideNodeInBackgroundUndoController;
var g=e.create("div",null,a,"after"),f=e.create("div",{style:"position: absolute; left: 0px; top: 0px;"},b());e.place(a,f);c="DomUtil.hideNodeInBackground"+(c?"."+c:"");h.set(g,"_bg_memo_node",c);h.set(f,"_bg_temp_node",c);c={undo:function(){g&&(g.parentNode&&e.place(a,g,"replace"),e.destroy(g),e.destroy(f),p.children.length||(e.destroy(p),p=null),g=null,delete a._hideNodeInBackgroundUndoController)},remove:function(){this.undo()}};return a._hideNodeInBackgroundUndoController=c}};a.showNodeFromBackground=
function(a){a&&a._hideNodeInBackgroundUndoController&&a._hideNodeInBackgroundUndoController.undo()};a.noTransformPosition=function(a){function b(a){for(var b={x:0,y:0};a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop,a=a.offsetParent,b.x+=f.get(a,"borderLeftWidth"),b.y+=f.get(a,"borderTopWidth");return b}function g(a){return f.get(a,"width")+f.get(a,"paddingLeft")+f.get(a,"paddingRight")+f.get(a,"borderLeftWidth")+f.get(a,"borderRightWidth")}function c(a){return f.get(a,"height")+f.get(a,"paddingTop")+
f.get(a,"paddingBottom")+f.get(a,"borderTopWidth")+f.get(a,"borderBottomWidth")}if(a){var d;if(a instanceof SVGElement&&a.getBBox)return d=(d=a.ownerSVGElement&&a.ownerSVGElement.parentNode)&&b(d),a=a.getBBox(),{x:(a.x||0)+d.x,y:(a.y||0)+d.y,w:a.width||0,h:a.height||0};d=b(a);return{x:d.x,y:d.y,w:g(a),h:c(a)}}};a.uniteNodeBoxes=function(b,c){var g=1E6,f=1E6,d=-1E6,e=-1E6;b.forEach(function(b){b=a.noTransformPosition(b);g=Math.min(g,b.x);f=Math.min(f,b.y);d=Math.max(d,b.x+b.w);e=Math.max(e,b.y+b.h)});
b={x:g,y:f,w:d-g,h:e-f};c&&(c=a.noTransformPosition(c),b.x-=c.x,b.y-=c.y);return b};a.getNodesBox=function(b,f){if(!b||!b.length)return null;for(var g=1E6,d=-1E6,e=1E6,k=-1E6,n=0;n<b.length;n++)var p=b[n],p=f&&f.ignoreTranformation?a.noTransformPosition(p):c.position(p),g=Math.min(g,p.x),e=Math.min(e,p.y),d=Math.max(d,p.x+p.w),k=Math.max(k,p.y+p.h);return{x:g,y:e,w:d-g,h:k-e}};a.traverseChildren=function(a,b){function g(a){if(a&&a.children)for(var c=0;c<a.children.length;c++){var f=a.children[c];
if(b(f))break;g(f)}}g(a)};a.scrollToListNode=function(a,b,c){var g=b.offsetTop+b.clientHeight,f=g-(a.scrollTop+a.clientHeight);0<f&&(a.scrollTop+=f);c&&(g-=b.clientHeight-c.offsetTop,f=a.scrollTop-g,0<f&&(a.scrollTop-=f))};var q;a.getScrollbarSize=function(){if(!q){var a=e.create("div",null,document.body);a.style.width="100px";a.style.height="100px";a.style.overflow="scroll";a.style.position="absolute";a.style.top="9999px";q={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight};e.destroy(a)}return q};
a.hasScrollbars=function(a){var b=f.getComputedStyle(a);return{w:"scroll"===b.overflowX||a.offsetWidth>a.clientWidth&&"auto"===b.overflowX,h:"scroll"===b.overflowY||a.offsetHeight>a.clientHeight&&"auto"===b.overflowY}};a.getMeasureContext=function(a){a=a||{};a.style=a.style?a.style+" ":"";a.style+="display: inline-block; position: absolute; left: 0; top: 0;";return{div:e.create("div",a,document.body),measureText:function(a){this.div.innerHTML=a;a=c.getMarginBox(this.div);delete a.l;delete a.t;return a},
destroy:function(){e.destroy(this.div)}}};a.getTextBox=function(b,c){c=a.getMeasureContext(c);b=c.measureText(b);c.destroy();return b};a.getNodeFontFamily=function(a){return(a=f.get(a,"fontFamily")||f.getComputedStyle(a)["font-family"])?a.replace(/'|"/g,"").split(",")[0]:a};a.getNodeFontSize=function(a){return f.toPixelValue(a,f.get(a,"fontSize"))};a.stealFocus=function(){var a=new k;try{var b=e.create("input",{type:"text",style:"position: absolute; left: 0px; top: 0px;"});e.place(b,document.body);
b.select();e.destroy(b)}catch(u){}setTimeout(a.resolve,0);return a.promise};a.getWindowBox=function(){for(var b=[],c=0,f=document.body.children.length;c<f;c++){var d=document.body.children[c];a.isHidden(d)||(a.hide(d),b.push(d))}c={w:document.body.clientWidth,h:document.body.clientHeight};b.forEach(function(b){a.show(b)});return c};a.getBorder=function(a){return{t:f.toPixelValue(a,f.get(a,"borderTopWidth")),r:f.toPixelValue(a,f.get(a,"borderRightWidth")),b:f.toPixelValue(a,f.get(a,"borderBottomWidth")),
l:f.toPixelValue(a,f.get(a,"borderLeftWidth"))}};a.isBodyLtr=function(){return"ltr"===(document.body.dir||"ltr").toLowerCase()};a.setAttribute=function(a,b,c){return 2===arguments.length?h.set(a,b):h.set(a,b,c)};a.getAttribute=function(a,b,c){return 2===arguments.length?h.get(a,b):h.get(a,b,c)};a.addClass=function(a,b){return l.add(a,b)};a.removeClass=function(a,b){return l.remove(a,b)};a.setClass=function(a,b,c){return l[c?"add":"remove"](a,b)};a.toggleClass=function(a,b){return l.toggle(a,b)};a.replaceClass=
function(a,b,c){return l.replace(a,b,c)};a.containsClass=function(a,b){return l.contains(a,b)};a.getStyle=function(a,b){return f.get(a,b)};a.setStyle=function(a,b,c){return 2===arguments.length?f.set(a,b):f.set(a,b,c)};a.toPixelValue=function(a,b){return parseFloat(b)||0};a.getComputedStyle=function(a){return a&&1===a.nodeType&&window.getComputedStyle(a)};a.position=function(a,b){return c.position(a,b)};a.getMarginBox=function(a,b){return c.getMarginBox(a,b)};a.setMarginBox=function(a,b){return c.setMarginBox(a,
b)};a.getMarginExtents=function(a,b){return c.getMarginExtents(a,b)};a.getContentBox=function(a,b){return c.getContentBox(a,b)};a.getPadBorderExtents=function(a,b){return c.getPadBorderExtents(a,b)};a.getPadExtents=function(a,b){return c.getPadExtents(a,b)};a.getBorderExtents=function(a,b){return c.getBorderExtents(a,b)};a.create=function(a,b,c,f){return e.create(a,b,c,f)};a.toDom=function(a){return e.toDom(a)};a.place=function(a,b,c){return e.place(a,b,c)};a.empty=function(a){return e.empty(a)};
a.destroy=function(a){return e.destroy(a)};a.query=function(a,b){return d(a,b)};return a})},"esri/dijit/geoenrichment/Deferred":function(){define(["dojo/Deferred"],function(m){return m})},"esri/dijit/geoenrichment/TriStateItem":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/Stateful dojo/on dojo/dom-construct dojo/dom-class ./utils/DeviceUtil".split(" "),function(m,h,l,e,c,f,d,k){return m(e,{domNode:null,checkboxNode:null,checked:!1,disabled:!1,autoToggle:!0,_currentClass:null,
_lastChecked:!1,constructor:function(b,a,e){var p=k.isMobileDevice()?"touchstart":"click";a=a||{};var g=a["class"];a["class"]=(g?g+" ":"")+"esriTriStateCheckBoxIcon";if(g=a.label){if(b instanceof HTMLLabelElement)b.innerHTML="\x26nbsp;"+g;else{var n=a.labelAttrs||{};n.innerHTML="\x26nbsp;"+g;n=f.create("label",n);b&&f.place(n,b);b=n}a=l.mixin({},a);delete a.label;delete a.labelAttrs}this.checkboxNode=f.create("div",a,b,b instanceof HTMLLabelElement?"first":e);this._currentClass=this._composeClass();
d.add(this.checkboxNode,this._currentClass);b instanceof HTMLLabelElement?(c(b,p,l.hitch(this,this._onClick)),d.add(b,"esriTriStateCheckBoxLabel")):c(this.checkboxNode,p,l.hitch(this,this._onClick));this.domNode=g?b:this.checkboxNode},postscript:function(){},_onClick:function(b){this.disabled||(this.autoToggle&&this.toggle(),b.checked=this.checked,this.onClick(h.fix(b)))},onClick:function(b){},toggle:function(){this.set("checked",!this._lastChecked);return this.checked},_checkedSetter:function(b){b!==
this.checked&&(this.checked="mixed"===b?b:this._lastChecked=!!b,this._updateClass())},_disabledSetter:function(b){this.disabled=!!b;this._updateClass()},_updateClass:function(){var b=this._composeClass();b!==this._currentClass&&(d.replace(this.checkboxNode,b,this._currentClass),this._currentClass=b)},_composeClass:function(){var b="esriTriStateCheckBox"+("mixed"==this.checked?"Mixed":this.checked?"Checked":"");return this.disabled?b+"Disabled":b}})})},"esri/dijit/geoenrichment/utils/DeviceUtil":function(){define(["dojo/sniff"],
function(m){var h={},l=function(){var e=window,c=document,f=e.navigator.platform,d=e.navigator.userAgent,k={ios:!1,android:!1,androidChrome:!1,desktop:!1,windowsPhone:!1,iphone:!1,iphoneX:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!e.cordova&&!e.phonegap),phonegap:!(!e.cordova&&!e.phonegap)},b=e.screen.width,a=e.screen.height,p=d.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),q=d.match(/(Android);?[\s\/]+([\d.]+)?/),g=d.match(/(iPad).*OS\s([\d_]+)/),n=d.match(/(iPod)(.*OS\s([\d_]+))?/),
h=!g&&d.match(/(iPhone\sOS|iOS)\s([\d_]+)/),b=h&&(375===b&&812===a||414===b&&896===a),a=0<=d.indexOf("MSIE ")||0<=d.indexOf("Trident/"),l=0<=d.indexOf("Edge/"),m=0<=d.indexOf("Gecko/")&&0<=d.indexOf("Firefox/"),z="MacIntel"===f,f="Win32"===f;k.ie=a;k.edge=l;k.firefox=m;p&&(k.os="windows",k.osVersion=p[2],k.windowsPhone=!0);q&&!f&&(k.os="android",k.osVersion=q[2],k.android=!0,k.androidChrome=0<=d.toLowerCase().indexOf("chrome"));if(g||h||n)k.os="ios",k.ios=!0;h&&!n&&(k.osVersion=h[2].replace(/_/g,
"."),k.iphone=!0,k.iphoneX=b);g&&(k.osVersion=g[2].replace(/_/g,"."),k.ipad=!0);n&&(k.osVersion=n[3]?n[3].replace(/_/g,"."):null,k.iphone=!0);k.ios&&k.osVersion&&0<=d.indexOf("Version/")&&"10"===k.osVersion.split(".")[0]&&(k.osVersion=d.toLowerCase().split("version/")[1].split(" ")[0]);k.webView=!(!(h||g||n)||!d.match(/.*AppleWebKit(?!.*Safari)/i)&&!e.navigator.standalone)||e.matchMedia&&e.matchMedia("(display-mode: standalone)").matches;k.standalone=k.webView;k.desktop=!(k.os||k.android||k.webView);
k.desktop&&(k.macos=z,k.windows=f);k.os&&"ios"===k.os&&(d=k.osVersion.split("."),c=c.querySelector('meta[name\x3d"viewport"]'),k.minimalUi=!k.webView&&(n||h)&&(7===1*d[0]?1<=1*d[1]:7<1*d[0])&&c&&0<=c.getAttribute("content").indexOf("minimal-ui"));k.needsStatusbarOverlay=function(){return(k.webView||k.android&&k.cordova)&&e.innerWidth*e.innerHeight===e.screen.width*e.screen.height?!k.iphoneX||90!==e.orientation&&-90!==e.orientation?!0:!1:!1};k.statusbar=k.needsStatusbarOverlay();k.pixelRatio=e.devicePixelRatio||
1;return k}();h.device=l;h.isMobileDevice=function(){return!l.desktop&&!l.ipad};h.isPCWithTouchScreen=function(){return l.desktop&&m("touch")};h.isLandscape=function(){return 90===Math.abs(window.orientation)};h.press=l.desktop?"mousedown":"touchstart";h.release=l.desktop?"mouseup":"touchend";h.click=l.desktop?"click":"touchend";h.clickOrRelease=l.desktop?"click, mouseup":"touchend";h.move=l.desktop?"mousemove":"touchmove";return h})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/DgridUtil":function(){define(["dojo/aspect",
"dojo/dom-class","dojo/query","../../utils/ArrayUtil"],function(m,h,l,e){function c(b,a,c){if(void 0===c){var f=b._rowIdToObject[a.id];f&&(c=(b=b.store)&&b.isOdd&&b.isOdd(f))}0!==c&&1!==c||h.replace(a,k[c],k[1-c])}function f(b,a,f){var d=b.store;if(d&&d.updateExpand){f=d.updateExpand(a.data,f,!0,b.getSortingFunction());for(var g in f)a=b.row(d.get(g)),a.element&&c(b,a.element,f[g])}}var d=["ui-icon-triangle-1-e","ui-icon-triangle-1-se"],k=["dgrid-row-even","dgrid-row-odd"];return{createExpando:function(b){h.add(b,
"dgrid-expando-icon ui-icon ui-icon-triangle-1-e esriMapsAnalystXClickable");return{expando:b,update:function(a){a=a?1:0;h.replace(b,d[a],d[1-a])}}},oddEvenFix:function(b){b.expand&&(b.getSortingFunction=function(){var a=this.get("sort");return a&&a.length?e.getSorting(a):null},m.after(b,"insertRow",function(a){c(b,a);return a}),m.before(b,"refresh",function(){var a=b.store;a&&a.updateExpandedNodes&&a.updateExpandedNodes(b._expanded,b.getSortingFunction())}),m.around(b,"expand",function(a){return function(c,
d){var g=c.element?c:b.row(c);void 0===d&&(d=!b._expanded[g.id]);!0===d&&f(b,g,!0);var e=a.apply(this,arguments);!1===d&&f(b,g,!1);return e}}),m.around(b,"adjustRowIndices",function(a){return function(){var c=b.store;c&&c.updateExpandedNodes&&c.updateExpand&&c.isOdd||a.apply(this,arguments)}}))},makeContentNeverGoUnderScroll:function(b){function a(){var a=b.headerNode.firstChild,c=b.contentNode;c&&a&&a.offsetWidth!==c.offsetWidth&&(c.style.width="",a.style.width="",a.style.width=c.offsetWidth+"px")}
m.after(b,"resize",a);m.after(b,"refresh",a);m.after(b,"expand",function(b){setTimeout(a,100);setTimeout(a,300);return b})},inlineSortArrow:function(b,a,c){a=e.arrayToObject(e.listToArray(a));m.after(b,"updateSortArrow",function(f,g){if((g=f[0]&&f[0].attribute)&&a[g]){var d=(g=b._sortNode||b._findSortArrowParent(g))&&l(".dgrid-sort-arrow",g)[0];f=f[0].descending;if(d){d.remove();h.remove(g,"dgrid-sort-down dgrid-sort-up");var e=c?l(c,g)[0]:g.lastChild.append?g.lastChild:g;e.append||(e=g);h.add(e,
f?"dgrid-sort-down":"dgrid-sort-up");e.append(d)}}},!0)}}})},"widgets/BusinessAnalyst/esriAnalystX/utils/ArrayUtil":function(){define("require exports ../../baUtil/array dojo/store/util/SimpleQueryEngine ./ObjectUtil esri/dijit/geoenrichment/utils/ArrayUtil".split(" "),function(m,h,l,e,c,f){function d(a,b){a.some(function(c,f){b.func(c,f,b,a);if(b.stop)return!0});return b}function k(a){var b=a.split(" "),f=b[1];a={};switch(b[0]){case "max":a.result=-Infinity;b=function(a,b,d){d.result=Math.max(d.result,
c.getObject(a,f))};break;case "min":a.result=Infinity;b=function(a,b,d){d.result=Math.min(d.result,c.getObject(a,f))};break;case "sum":a.result=0;b=function(a,b,d){d.result+=c.getObject(a,f)};break;case "random":a.result=void 0;b=function(a,b,c,f){c.result=f[Math.round((f.length-1)*Math.random())];c.stop=!0};break;default:throw Error("Unsupported query.");}a.func=b;return a}var b={getSorting:function(a,b){if(!a)return c.compare;if("function"===typeof a)return a;var f;f=Array.isArray(a)?a:a.sort||
[a];var d={};"string"===typeof b&&(b=[b]);Array.isArray(b)?b.forEach(function(a){d[a]=c.compareNames}):b&&(d=b);return function(a,b){for(var g=void 0,e=0;g=f[e];e++){var k=a[g.attribute],p=b[g.attribute];if(k=(d[g.attribute]||(d["*"]?d["*"].bind(null,g.attribute):c.compare))(k,p,!1,!1,a,b))return g.descending?-k:k}return 0}},sort:function(a,c,f){return a.sort(b.getSorting(c,f))},sortIndices:function(a,c,f){a=l.map(a,function(a,b){return{value:a,index:b}});var d=b.getSorting(c,f);a.sort(function(a,
b){return d(a.value,b.value)});return l.map(a,function(a){return a.index})},getQueryEngine:function(a,c){return function(f,d){d&&d.sort&&(d=Object.assign({},d),d.sort=b.getSorting(d.sort,a));return(c||e)(f,d)}},objectToArray:function(a,b){void 0===b&&(b=null);var c=[],f=b?function(c){return a[c]?a[c][b]:void 0}:function(b){return a[b]},d;for(d in a){var e=f(d);"undefined"!==typeof e&&c.push(e)}return c},arrayToObject:function(a,b){var c={},d=f.composeIdentityFunction(b);l.forEach(a,function(a){c[d(a)]=
a});return c},composeIdentityFunction:f.composeIdentityFunction,removeDuplicates:f.removeDuplicates,splitArrayToBunches:f.splitArrayToBunches,contains:function(a,b){return-1!==l.indexOfLoose(a,b)},remove:function(a,b){b=l.indexOfLoose(a,b);-1!==b&&a.splice(b,1);return-1!==b},merge:function(a,b){a=a||[];null!=b&&Array.prototype.push.apply(a,b);return a},listToArray:function(a,b){if(null==a)return[];void 0===b&&(b=",");a="string"===typeof a?a.split(b):a.slice();for(b=0;b<a.length;b++)"string"===typeof a[b]&&
(a[b]=a[b].trim());return a},reorderArray:function(a,b){var c=a.length,f=0,d=Array(c),e={},k={},h;for(h in b){var p=Math.round(h);if(0<=p&&p<c&&!e[p]){var l=Math.round(b[h]);0<=l&&l<c&&!k[l]&&(d[l]=a[p],e[p]=1,k[l]=1,f++)}}f!==c&&(d=d.filter(function(a,b){return k[b]}),a.forEach(function(a,b){!e[b]&&d.push(a)}));return d},mapIndices:function(a,b,c,f){f=null==f?null:f;if(1===a)c.call(f,0,Math.floor(b/2));else{b=(b-1)/(a-1);for(var d=0;d<a;d++)c.call(f,d,Math.floor(.5+d*b))}},moveElement:function(a,
b,c,f){var d=Array.isArray(b)?b:[b];if(-1!==d.indexOf(c))return a.slice();var g=[];a.forEach(function(a){-1===d.indexOf(a)&&(a==c?"before"===f?(d.forEach(function(a){g.push(a)}),g.push(c)):"after"===f&&(g.push(c),d.forEach(function(a){g.push(a)})):g.push(a))});return g},min:function(a,b){var c=a.length;switch(c){case 0:return null;case 1:return a[0];default:for(var f=a[0],d=b(f),e=0,k=1;k<c;k++){var h=b(a[k]);d>h&&(f=a[k],d=h,e=k)}return{key:e,value:f,comparisonValue:d}}},max:function(a,b){var c=
a.length;switch(c){case 0:return null;case 1:return a[0];default:for(var f=a[0],d=b(f),e=0,k=1;k<c;k++){var h=b(a[k]);d<h&&(f=a[k],d=h,e=k)}return{key:e,value:f,comparisonValue:d}}},query:function(a,b){if("object"===typeof b)return d(a,b);if("string"===typeof b)return b=k(b),d(a,b).result},everyEqualProperty:function(a,b){if(2>a.length)return!0;var c;return!a.some(function(a,f){if(0===f)c=a[b];else if(c!==a[b])return!0})}};return b})},"widgets/BusinessAnalyst/baUtil/array":function(){define(["require",
"exports"],function(m,h){var l=Array.prototype,e={every:function(c,f,d){return null==c?!0:"string"===typeof c?l.every.call(c.split(""),f,d):l.every.call(c,f,d)},some:function(c,f,d){return null==c?!1:"string"===typeof c?l.some.call(c.split(""),f,d):l.some.call(c,f,d)},forEach:function(c,f,d){if(null!=c)return"string"===typeof c?l.forEach.call(c.split(""),f,d):l.forEach.call(c,f,d)},map:function(c,f,d){return null==c?[]:"string"===typeof c?l.map.call(c.split(""),f,d):l.map.call(c,f,d)},filter:function(c,
f,d){return null==c?[]:"string"===typeof c?l.filter.call(c.split(""),f,d):l.filter.call(c,f,d)},indexOf:function(c,f){return null==c?-1:"string"===typeof c?l.indexOf.call(c.split(""),f):l.indexOf.call(c,f)},indexOfLoose:function(c,f){if(null==c||void 0===c.length)return-1;if("string"===typeof c)return e.indexOfLoose(c.split(""),f);for(var d=0,k=c.length;d<k;d++)if(c[d]==f)return d;return-1},lastIndexOf:function(c,f){return null==c?-1:"string"===typeof c?l.lastIndexOf.call(c.split(""),f):l.lastIndexOf.call(c,
f)},lastIndexOfLoose:function(c,f){if(null==c||void 0===c.length)return-1;if("string"===typeof c)return e.lastIndexOfLoose(c.split(""),f);for(var d=c.length-1;0<=d;d--)if(c[d]==f)return d;return-1}};return e})},"widgets/BusinessAnalyst/esriAnalystX/utils/ObjectUtil":function(){define(["../../baUtil/ObjectUtil","esri/dijit/geoenrichment/utils/ObjectUtil","esri/dijit/geoenrichment/utils/SortUtil"],function(m,h,l){var e=Object.assign({},m,h,l);e.getPrototypeOf=function(c){try{return Object.getPrototypeOf?
Object.getPrototypeOf(c):c.__proto__||c.constructor&&c.constructor.prototype}catch(f){return null}};e.isJson=function(c){return"object"===typeof c&&e.getPrototypeOf(c)===Object.prototype};e.copyJson=function(c){return void 0===c||null===c?null:JSON.parse(JSON.stringify({object:c})).object};e.convert=function(c,f,d){var k=f||function(){};f=k(c);if("undefined"!==typeof f)return f;if(Array.isArray(c)){var b=[];c.forEach(function(a){b.push(e.convert(a,k,d))},this);return b}if(!e.isJson(c))return c;f=
{};for(var a in c){var h=c[a],q=d?k(a):a;"undefined"===typeof q&&(q=a);f[q]=e.convert(h,k,d)}return f};e.getDeepCopy=function(c){return e.convert(c)};e.getRange=function(c,f,d){f="function"===typeof f?f.bind(null==d?null:d):null;var e,b,a;for(a in c)d=c[a],d=Number(null===f?d:f(d,a)),isNaN(d)||(void 0===e?e=b=d:(e=Math.min(e,d),b=Math.max(b,d)));return void 0===e?{}:{min:e,max:b}};e.removeEmptyObjects=function(c){function f(c){c&&"object"===typeof c&&Object.keys(c).forEach(function(b){var a=c[b];
!a||"object"!==typeof a||Array.isArray(a)||Object.keys(a).length?f(a):(d=!0,delete c[b])})}for(var d=!0;d;)d=!1,f(c);return c};e.removeValues=function(c,f){function d(c){c&&"object"===typeof c&&Object.keys(c).forEach(function(b){f(b,c[b])?d(c[b]):delete c[b]})}d(c);return c};e.isEqual=function(c,f){if(null===c||"object"!==typeof c||null===f||"object"!==typeof f)return c===f;if(Object.keys(c).length!==Object.keys(f).length)return!1;var d={},k;for(k in c)d[k]=!0;for(k in f)if(void 0!==d[k])delete d[k];
else return!1;for(k in c)if(!e.isEqual(c[k],f[k]))return!1;return!0};e.getObject=function(c,f){if(!f)return c;f=f.split(".");for(var d=0;d<f.length;d++)c=c&&c[f[d]];return c};e.formatNumber=function(c,f){f="number"===typeof f?{places:f}:f||{};if(null==f.places||0>f.places)f.places=e.getPlaces(c,!0),f.maxPlaces&&f.places>f.maxPlaces&&(f.places=f.maxPlaces);return h.formatNumber(c,f)};e.getPlaces=function(c,f){function d(a,f){var d=c.indexOf(a,e);if(0>d)return b;a=c.charAt(d+a.length);return!a||0>f.indexOf(a)?
b:d-e}c=+c;if(isNaN(c))return-1;c+="";var e=c.indexOf(".")+1,b=e?c.length-e:0;if(2>=b||!f)return b;f=0;if(!+c.substr(0,e-1))for(;"0"===c.charAt(e);)e++,f++,b--;for(var a=b-1;2<=a;a--){var h=Math.min(d("000000000000000".substr(0,a),"01234"),d("999999999999999".substr(0,a),"56789"));if(h!==b){b=h;break}}return b+f};return e})},"widgets/BusinessAnalyst/baUtil/ObjectUtil":function(){define(["require","exports"],function(m,h){function l(e,c){for(var f=0,d=Object.keys(c);f<d.length;f++){var k=d[f];"object"!==
typeof e[k]||null===e[k]||"object"!==typeof c[k]||null===c[k]?e[k]=c[k]:Array.isArray(e[k])?Array.isArray(c[k])?e[k].concat(c[k]):e[k]=c[k]:Array.isArray(c[k])?e[k]=c[k]:l(e[k],c[k])}}return{map:function(e,c,f){void 0!==f&&(c=c.bind(f));if("object"!==typeof e)throw Error("Object or array expected");if(Array.isArray(e)){f=[];for(var d=0,k=e.length;d<k;d++)f.push(c(e[d],d));return f}f={};d=0;for(k=Object.keys(e);d<k.length;d++){var b=k[d];Object.hasOwnProperty.call(e,b)&&(f[b]=c(e[b],b))}return f},
deepAssign:function(e){for(var c=[],f=1;f<arguments.length;f++)c[f-1]=arguments[f];for(f=0;f<c.length;f++)l(e,c[f]);return e}}})},"esri/dijit/geoenrichment/utils/ObjectUtil":function(){define(["dojo/number"],function(m){var h={};Math.log10=Math.log10||function(e){return Math.log(e)*Math.LOG10E};h.populateObject=function(e,c,f){function d(c,b){function a(a){var e=c[a],k=b[a],h=e&&"object"===typeof e;void 0!==e&&(void 0===k?b[a]=e:k&&"object"===typeof k&&h?d(e,k):f&&(h?(k=b[a]={},d(e,k)):b[a]=c[a]))}
if(c&&b&&!(Array.isArray(c)&&!Array.isArray(b)||Array.isArray(b)&&!Array.isArray(c)))if(Array.isArray(c))c.forEach(function(b,c){a(c)});else for(var e in c)a(e)}d(c,e);return e};h.filterByPattern=function(e,c){function f(c,b,a){for(var d in c){var e=c[d],g=b[d];if(Array.isArray(e)){var k=e[0];if(g&&Array.isArray(g)){var h=a[d]=[];g.forEach(function(a){if(a&&"object"===typeof a){var b=Array.isArray(a)?[]:{};f(k,a,b);h.push(b)}})}}else if("object"===typeof e){if(g&&"object"===typeof g){var l=a[d]={};
f(e,g,l)}}else void 0!==g&&(a[d]=g)}}var d={};f(c,e,d);return d};h.traverseObject=function(e,c){for(var f in e){var d=e[f];c(d);d&&"object"===typeof d&&h.traverseObject(d,c)}};h.copyOwnJsonProperties=function(e,c,f){c=c||{};for(var d in e){var k=e[d];e.hasOwnProperty(d)&&"function"!=typeof k&&(k&&"object"==typeof k&&f&&(k=f(d,k)),void 0!==k&&(c[d]=k))}return c};h.removeUndefinedProperties=function(e){e&&Object.keys(e).forEach(function(c){void 0===e[c]&&delete e[c]});return e};h.getValue=function(e,
c){if("string"!==typeof c)return e;c=c.split(".");for(var f=0;f<c.length;f++)e=e&&e[c[f]];return e};h.setValue=function(e,c,f){if("string"===typeof c&&(c=c.split("."),c.length)){for(var d=0;d<c.length-1;d++)e=e&&e[c[d]];e&&(e[c[c.length-1]]=f)}};h.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};h.roundNumber=function(e,c){return"number"!==typeof e?e:parseFloat(e.toFixed(void 0!==c?c:0))};h.getBestPrecision=function(e){return 0===e?0:Math.max(0,Math.round(Math.log10(3E3/Math.abs(e))))};
h.getPlaces=function(e,c){function f(a,b){var c=e.indexOf(a,d);if(0>c)return k;a=e.charAt(c+a.length);return!a||0>b.indexOf(a)?k:c-d}e=+e;if(isNaN(e))return-1;e+="";var d=e.indexOf(".")+1,k=d?e.length-d:0;if(2>=k||!c)return k;c=0;if(!+e.substr(0,d-1))for(;"0"===e.charAt(d);)d++,c++,k--;for(var b=k-1;2<=b;b--){var a=Math.min(f("000000000000000".substr(0,b),"01234"),f("999999999999999".substr(0,b),"56789"));if(a!==k){k=a;break}}return k+c};h.formatNumber=function(e,c){c="number"===typeof c?{places:c}:
c||{};var f=c.places,d={};0<=f?d.places=f:f=-1;e=m.format(e,d);if(c.noSeparator){void 0===l&&(l=m.format(9999,{places:0}).replace(/9/g,""));var d=l,k;if(d)for(;0<=(k=e.indexOf(d));)e=e.substr(0,k)+e.substr(k+1)}if(c.preserveTrailingZeroes||0>=f||!e)return e;for(c=e.length;0<f&&"0"==e.charAt(c-1);)c--,--f||c--;return e.substr(0,c)};h.formatNumberAsCurrency=function(e,c,f){return c?c.split(";")[0>e?1:0].replace("0",h.formatNumber(Math.abs(e),f)):h.formatNumber(e,f)};var l;h.parseNumber=function(e,c,
f,d){if(""===e)return"undefined"!==typeof f?f:NaN;if(null==e||"string"!==typeof e&&isNaN(e))return NaN;e=String(e);if(!e.trim())return void 0!==f?f:NaN;f=m.parse(e,{strict:d});isNaN(f)&&e.trim().length&&(f=d?m.parse(e,{strict:d,locale:"en-US"}):Number(e));return isNaN(f)||void 0===c||0>c?f:m.round(f,c)};h.parsePercentOrCurrency=function(e,c,f,d,k){"string"===typeof e&&(e=e.replace("%",""),c&&(c=c.split(";")[0].replace("0",""),e=e.replace(c,"")));return h.parseNumber(e,f,d,k)};h.compareEqual=function(e,
c,f){return void 0===f?e===c:Number(Number(e).toFixed(f))===Number(Number(c).toFixed(f))};return h})},"esri/dijit/geoenrichment/utils/SortUtil":function(){define([],function(){function m(c,f,d,e){c=void 0===c||null===c;return c!=(void 0===f||null===f)?(f=c?-1:1,(void 0===e?d:e)?-f:f):c?0:null}function h(c){var f=/^(.+)\s([1-9]\d*)$/.exec(c);return f?{base:f[1],number:f[2]}:/^[1-9]\d*$/.test(c)?{base:"",number:+c}:{base:c,number:0}}var l={NEWEST:"newest",OLDEST:"oldest",ALPHABETICAL:"alphabetical",
UNALPHABETICAL:"unalphabetical",compareNumeric:function(c,f,d,e){e=m(c,f,d,e);if(null!==e)return e;c=Number(c);f=Number(f);e=c>f?1:c<f?-1:0;return d?-e:e},compareString:function(c,f,d,e){e=m(c,f,d,e);if(null!==e)return e;c=String(c);f=String(f);e=c.localeCompare(f);return d?-e:e}},e=/^(.+)\s([1-9]\d*)(\D*)$/;l.compareNames=function(c,f,d,k){var b=h("string"===typeof c?c.toLowerCase():c),a=h("string"===typeof f?f.toLowerCase():f),p=null;if(b.base===a.base)p=l.compareNumeric(b.number,a.number,d,k);
else{var q=e.exec(b.base);if(q){var g=e.exec(a.base);g&&q[1]===g[1]&&q[3]===g[3]&&(p=l.compareNumeric(q[2],g[2],d,k))}null===p&&(p=l.compareString(b.base,a.base,d,k))}return p||l.compareString(c,f,d,k)};l.compare=function(c,f,d,e){var b=m(c,f,d,e);if(null!==b)return b;b=typeof c;typeof f!=b&&(b="");switch(b){case "number":case "boolean":break;case "object":c=c.valueOf();f=f.valueOf();break;default:return l.compareString(c,f,d,e)}b=c>f?1:c<f?-1:0;return d?-b:b};return l})},"esri/dijit/geoenrichment/utils/ArrayUtil":function(){define(["dojo/_base/array"],
function(m){var h={},l={}.toString();h.arraysEqual=function(e,c){if(!e&&!c)return!0;if(!e||!c||e.length!==c.length)return!1;for(var f=0;f<e.length;f++)if(e[f]!==c[f])return!1;return!0};h.composeIdentityFunction=function(e,c){var f="function"===typeof e?e:e?function(c){return c[e]}:function(c){return c};return function(d){return(d=f(d))&&d.toString?d.toString():c&&void 0===d?d:String(d)}};h.removeDuplicates=function(e,c){var f=[],d={};c=h.composeIdentityFunction(c,!0);m.forEach(e,function(e,b){var a=
c(e);a===l&&(void 0===e["__ArrayUtil.js_uniqueKey__"]&&(e["__ArrayUtil.js_uniqueKey__"]="__ArrayUtil.js_uniqueKey__"+b),a=e["__ArrayUtil.js_uniqueKey__"]);void 0===a||a in d||(d[a]=e,f.push(e))});return f};h.splitArrayToBunches=function(e,c){c=c||100;for(var f=[],d,k=0,b=e.length;k<b;k++)d&&d.length!==c||(d=[],f.push(d)),d.push(e[k]);return f};return h})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/DomUtil":function(){define("dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/on ../../utils/ObjectUtil esri/dijit/geoenrichment/utils/DomUtil".split(" "),
function(m,h,l,e,c,f,d){var k=Object.assign({},d);k.select=function(b){return k.addTag(b,"selected")};k.unselect=function(b){return k.removeTag(b,"selected")};k.floatStart=function(b){return k.addTag(b,"esriMapsAnalystXFloatStart")};k.floatEnd=function(b){return k.addTag(b,"esriMapsAnalystXFloatEnd")};k.addSpacer=function(b,a){b=m.create("div",{"class":"esriMapsAnalystXSpacer",innerHTML:"\x26nbsp;"},b);if(a)k[a](b);return b};k.getAndUpdateNumber=function(b,a){if(!b)return NaN;var c=b.get&&b.set;void 0===
a&&(a=0);var d=f.parseNumber(c?b.get("value"):b.value,a);isNaN(d)||(c?b.set("value",f.formatNumber(d,a)):b.value=f.formatNumber(d,a));return d};k.getAndUpdateString=function(b){if(!b)return null;if(b.get&&b.set){var a=b.get("value").trim();b.set("value",a)}else a=b.value.trim(),b.value=a;return a};k.getScreenScaleFactor=function(){return k.getTextBox("",{style:"width: 72pt; height: 72pt"}).w/96};k.positionAtCenter=function(b,a){if(b&&a){var c=h.position(b);a=h.position(a);c.w&&c.h&&a.w&&a.h&&l.set(b,
{left:(a.w-c.w)/2+"px",top:(a.h-c.h)/2+"px"})}};k.showAroundOverlay=function(b,a){a=a||{};k.removeAroundOverlay(b);var f={w:"width",h:"height",l:"left",t:"top",r:"right",b:"bottom"},d=h.position(b);if(a.viewPortContainer){var e=h.position(a.viewPortContainer),n=d.x,u=d.y;d.x=Math.max(d.x,e.x);d.w-=d.x-n;d.y=Math.max(d.y,e.y);d.h-=d.y-u;d.w=Math.min(d.w,e.x+e.w-d.x);d.h=Math.min(d.h,e.y+e.h-d.y)}b.__aroundOverlays=(a.placeInNode?[{l:0,t:-d.y,w:d.w,h:d.y},{l:d.w,t:-d.y,w:document.body.clientWidth-(d.x+
d.w),h:document.body.clientHeight},{l:0,t:d.h,w:d.w,h:document.body.clientHeight-(d.y+d.h)},{l:-d.x,t:-d.y,w:d.x,h:document.body.clientHeight}]:[{l:d.x,t:0,w:d.w,h:d.y},{w:document.body.clientWidth-(d.x+d.w),r:0,t:0,b:0},{l:d.x,h:document.body.clientHeight-(d.y+d.h),w:d.w,b:0},{l:0,t:0,w:d.x,b:0}]).map(function(c){var d=m.create("div",{"class":a.overlayClass||"esriMapsAnalystXNodeAroundOverlay"},a.placeInNode?b:document.body),e={position:"absolute"},g;for(g in f)void 0!==c[g]&&(e[f[g]]=Math.round(c[g])+
"px");l.set(d,e);return d});d=function(){k.removeAroundOverlay(b)};a.removeOnClick&&(b.__aroundOverlaysRemoveHandle=c.once(document.body,"click",d));b.__aroundOverlaysResizeHandle=c(window,"resize",function(){k.showAroundOverlay(b,a)});var r;b.__aroundOverlaysSetIntervalHandle=setInterval(function(){if(r){var c=h.position(b);c.x==r.x&&c.y==r.y&&c.w==r.w&&c.h==r.h||k.showAroundOverlay(b,a)}else r=h.position(b)},50);return{remove:d}};k.removeAroundOverlay=function(b){b.__aroundOverlays&&b.__aroundOverlays.forEach(function(a){m.destroy(a)});
delete b.__aroundOverlays;b.__aroundOverlaysRemoveHandle&&b.__aroundOverlaysRemoveHandle.remove();delete b.__aroundOverlaysRemoveHandle;b.__aroundOverlaysResizeHandle&&b.__aroundOverlaysResizeHandle.remove();delete b.__aroundOverlaysResizeHandle;clearInterval(b.__aroundOverlaysSetIntervalHandle);delete b.__aroundOverlaysSetIntervalHandle};k.getDocumentStyleDeclaration=function(b){function a(c){var d;try{d=c.rules||c.cssRules}catch(r){d=null}if(d)for(c=0;c<d.length;c++){var f=d[c];if(f.styleSheet){if(f=
a(f.styleSheet))return f}else if(f.selectorText==b)return f.style}}for(var c=0;c<document.styleSheets.length;c++){var d=a(document.styleSheets[c]);if(d)return d}return null};k.getNodeFontFamily=function(b){return(b=l.get(b,"fontFamily")||l.getComputedStyle(b)["font-family"])?b.replace(/'|"/g,"").split(",")[0]:b};k.getNodeFontSize=function(b){return l.toPixelValue(b,l.get(b,"fontSize"))};k.listenToNodeAdded=function(b,a,c){if(k.isNodeInLayout(b))a();else{b.__listenToNodeAddedHandle&&b.__listenToNodeAddedHandle.remove();
var d=setInterval(function(){k.isNodeInLayout(b)&&(b.__listenToNodeAddedHandle&&b.__listenToNodeAddedHandle.remove(),a())},c||100);b.__listenToNodeAddedHandle={remove:function(){clearInterval(d);delete b.__listenToNodeAddedHandle}};return b.__listenToNodeAddedHandle}};k.isNodeVisible=function(b){return k.isChildOf(b,document.body,function(a){return!e.contains(a,"dijitHidden")&&"hidden"!=l.get(a,"visibility")})};k.enableHyperlink=function(b,a){a?e.replace(b,"esriMapsAnalystXLink","esriMapsAnalystXLinkDisabled"):
e.replace(b,"esriMapsAnalystXLinkDisabled","esriMapsAnalystXLink")};return k})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/MouseUtil":function(){define(["dojo/dom-geometry","esri/dijit/geoenrichment/utils/MouseUtil"],function(m,h){var l;h.unitTesting_setCursorOverNode=function(e){e=m.position(e);h.unitTesting_setCursorPosition(e.x+e.w/2,e.y+e.h/2)};h.unitTesting_setCursorPosition=function(e,c){h._latestEvent={clientX:e,pageX:e,clientY:c,pageY:c}};h.unitTesting_lockPosition=function(e){l=e};
h.unitTesting_shiftMousePosition=function(e,c){h.unitTesting_setCursorPosition(h._latestEvent.clientX+(e||0),h._latestEvent.clientY+(c||0))};h._setLatestEvent=function(e){l||(h._latestEvent=e)};return h})},"esri/dijit/geoenrichment/utils/MouseUtil":function(){define("dojo/_base/lang dojo/on dojo/sniff dojo/touch dojo/dom-geometry ./DomUtil dojo/domReady!".split(" "),function(m,h,l,e,c,f){var d={_latestEvent:null,_setLatestEvent:function(b){d._latestEvent=b}};l("touch")?(h(document.body,e.press,function(b){d._setLatestEvent(d.fixTouchEvent(b,
!0))}),h(document.body,e.move,function(b){d._setLatestEvent(d.fixTouchEvent(b,!0))})):h(document.body,"mousemove",function(b){d._setLatestEvent(d.fixTouchEvent(b,!0))});var k;h(document.body,"mousedown",function(){k||(k=!0,h.once(document.body,"mouseup, click",function(){k=!1}))});d.getCursorPosition=function(){return d._latestEvent};d.isMouseOver=function(b,a){var e=a&&a.event||d._latestEvent;if(!(b&&b.parentNode&&b.getBoundingClientRect&&e))return!1;if(a&&a.checkAllChildren){a=m.mixin({},a);delete a.checkAllChildren;
var k=!1;f.traverseChildren(b,function(b){if(d.isMouseOver(b,a))return k=!0});return k}return d.isMouseOverBox(c.position(b),a)};d.isMouseOverBox=function(b,a){if(!b)return!1;var c=a&&a.event||d._latestEvent;a&&a.ignoreBorderTolerance&&(a=a.ignoreBorderTolerance,b=m.mixin({},b),b.x+=a,b.y+=a,b.w-=2*a,b.h-=2*a);return b.x<=c.clientX&&b.x+b.w>=c.clientX&&b.y<=c.clientY&&b.y+b.h>=c.clientY};d.fixTouchEvent=function(b,a){b=a?m.mixin({},b):b;b.touches&&1===b.touches.length?(a=b.touches[0],b.clientX=a.clientX,
b.clientY=a.clientY,b.pageX=a.pageX,b.pageY=a.pageY):b.changedTouches&&1===b.changedTouches.length&&(a=b.changedTouches[0],b.clientX=a.clientX,b.clientY=a.clientY,b.pageX=a.pageX,b.pageY=a.pageY);return b};d.isBeingDragged=function(){return k};d.addOverOutHandler=function(b){function a(){clearTimeout(f);c&&c.remove()}var c,f,e=h(b.node,"mouseover",function(e){function g(){d.isMouseOver(b.node)&&(b.onMouseOver(e),c=h(document.body,"mousemove",function(c){d.isMouseOver(b.node)||(a(),b.onMouseOut(c))}))}
a();b.delayTimeout?f=setTimeout(g,b.delayTimeout):g()});return{remove:function(){e.remove();a()}}};d.addOutHandler=function(b,a){return h(document.body,"mousemove",function(c){d.isMouseOver(b,{checkAllChildren:!0})||a(c)})};return d})},"widgets/BusinessAnalyst/esriAnalystX/dijit/tooltips/TooltipUtil":function(){define("dojo/dom-construct dojo/dom-style dojo/dom-geometry dojo/dom-class dojo/query dojo/on dojox/gfx dojo/sniff dojo/aspect dojox/uuid/generateRandomUuid dijit/Tooltip ../utils/DomUtil ../utils/MouseUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/domReady!".split(" "),
function(m,h,l,e,c,f,d,k,b,a,p,q,g,n){function u(){w&&(w.isMultilineContainer?v.hideTooltipForNode(w):(clearInterval(w.__autoTooltipInLayoutCheckHandle),delete w.__autoTooltipInLayoutCheckHandle,p.hide(w)),w=null)}function r(a,b){b=b||"";var c=m.create("div",{class:"esriMapsAnalystXValidationTooltip"+b},document.body);!b&&m.create("div",{class:"esriMapsAnalystXValidationTooltipTip"+b},c);m.create("div",{innerHTML:a,class:"esriMapsAnalystXValidationTooltipBody"+b},c);h.set(c,"position","fixed");return c}
function t(a,b){function c(){a&&(document.body.removeChild(a),g.forEach(function(a){a.remove()}),a=g=null)}b=b.textbox||b;var d=l.getMarginBox(a),e=l.position(b);"rtl"===document.dir?h.set(a,{left:e.x-d.w+"px",top:e.y+e.h/2-d.h/2+"px"}):h.set(a,{left:e.x+e.w+"px",top:e.y+e.h/2-d.h/2+"px"});var g=[f(document.body,"mousedown, keydown",c),f(b,"blur",c)];return{remove:c}}function z(b,c,d){function f(){var a=m.create("div",{class:"esriMapsAnalystXClosableTooltipTip"},k);e.add(a,"right"===d?"esriMapsAnalystXClosableTooltipTipRight":
"esriMapsAnalystXClosableTooltipTipLeft")}function g(){l=m.create("div",{class:"esriMapsAnalystXClosableTooltipBody"},k);m.create("div",{innerHTML:b,class:"esriMapsAnalystXClosableTooltipLabel"},l);n=m.create("div",{class:"esriMapsAnalystXClosableTooltipCloseButton esriMapsAnalystXCloseWindow esriMapsAnalystXCloseWindowWhite"},l)}c={class:"esriMapsAnalystXClosableTooltip "+(c||"")};c.id=a();var k=m.create("div",c,document.body),l,n;"right"!==d?(g(),f()):(f(),g());h.set(k,"position","fixed");return{tooltip:k,
body:l,closeButton:n}}function B(a,b,c,d){var e=l.getMarginBox(a.tooltip),g=l.position(b);"rtl"===document.dir&&"right"!==d||"rtl"!==document.dir&&"right"===d?h.set(a.tooltip,{left:g.x+g.w+"px",top:g.y+g.h/2-e.h/2+"px"}):h.set(a.tooltip,{left:g.x-e.w+"px",top:g.y+g.h/2-e.h/2+"px"});var k,n,m,p=function(){k&&clearTimeout(k);n&&clearInterval(n);m&&m.remove();a.tooltip.parentNode===document.body&&document.body.removeChild(a.tooltip)};n=setInterval(function(){q.isNodeInLayout(b)||p();q.isNodeVisible(b)?
q.show(a.tooltip):q.hide(a.tooltip)},300);c&&(k=setTimeout(p,c));m=f(a.closeButton,"click",function(){p()});a.tooltip._removeFunc=p;return a.tooltip}var v={},A={};v.hideTooltipForNode=n.hideTooltipForNode;v.setTooltipToNode=n.setTooltipToNode;v.createTooltip=function(b,c,d){var e={orientation:l.isBodyLtr(document)?"right":"left",offset:{x:15,y:0}};c&&(e.innerHTML=c);d&&(e=Object.assign(e,d));e.id=a();e.toMouseCursor&&(e.mouseEvent=g.getCursorPosition(),delete e.toMouseCursor);c=e.mouseEvent;delete e.mouseEvent;
d=e.htmlFragment;delete e.htmlFragment;var k=e.widget;delete e.widget;var n=e.orientation;delete e.orientation;var p=e.offset;delete e.offset;var q=e.horizontalOffset;delete e.horizontalOffset;var x=m.create("div",e,b?b.container:document.body);d?m.place(d,x):k&&k.placeAt(x);h.set(x,"position","fixed");var y=l.getMarginBox(x),u=function(a,b){var c=a.touches?event.touches[0].clientX:a.clientX;a=a.touches?event.touches[0].clientY:a.clientY;var d,f,e=p.x,g=p.y;"left"===n?0>c-y.w-e&&(d="right"):c+y.w+
e>document.body.clientWidth&&(d="left");a+y.h+g>document.body.clientHeight&&(f="above");d=d||n;h.set(x,{left:b?b+"px":c+("left"===d?-y.w-e:e)+"px",top:a+("above"===f?-y.h-g:g)+"px"});x.style.display=""};c&&u(c,q);e=[];e.push(f(b?b:document.body,b?"mouse-move, mousemove":"mousemove, touchmove",function(a){u(a,q)}));e.push(f(b?b:document.body,b?"mouse-out, mouseout":"mouseout, touchend",function(a){x.style.display="none"}));b={};b.handlers=e;b.tooltip=x;A[x.id]=b;return x};v.removeTooltip=function(a){if(a){a=
"string"===typeof a?a:a.id;var b=A[a];delete A[a];b&&(b.handlers.forEach(function(a){a.remove()}),m.destroy(b.tooltip))}};var y={};v.registerTooltipForSlider=function(c,d,e,g){var k={offsetX:0,offsetY:0,class:"esriMapsAnalystXTooltip"};d&&(k=Object.assign(k,d));k.id=a();var n=m.create("div",k,document.body);n.style.display="none";h.set(n,"position","fixed");var p=!1,q=function(a,d){if(!p){p=!0;n.style.display="";n.innerHTML=d();var e=l.getMarginBox(n),g=l.position(a);h.set(n,{left:g.x+g.w/2-e.w/2+
k.offsetX+"px",top:g.y-e.h-5+k.offsetY+"px"});var m=[];m.push(b.after(c,"onChange",function(){n.innerHTML=d();g=l.position(a);h.set(n,{left:g.x+g.w/2-e.w/2+"px",top:g.y-e.h-5+"px"})}));var q=function(){n.style.display="none";m.forEach(function(a){a.remove()});p=!1},x=!1;m.push(f(a,"mousedown, mouseDown, mouse-down",function(){x=!0;m.push(f(document,"mouseup, mouseUp, mouse-up",function(){q()}))}));m.push(f(a,"mouseout, mouseOut, mouse-out",function(){x||q()}))}};d=[];d.push(f(c.sliderHandle,"mouseover, mouseOver, mouse-over",
function(){g&&c.isSliderDisabled&&c.isSliderDisabled()||q(c.sliderHandle,function(){var a=g?c.get("value")[0]:c.get("value");return e?e(a):a})}));g&&d.push(f(c.sliderHandleMax,"mouseover, mouseOver, mouse-over",function(){c.isSliderDisabled&&c.isSliderDisabled()||q(c.sliderHandleMax,function(){return e?e(c.get("value")[1]):c.get("value")[1]})}));d.push(b.before(c,"destroy",function(){v.unregisterTooltipForSlider(c)}));c.tooltipId=n.id;var x={};x.tooltip=n;x.handlers=d;y[n.id]=x};v.unregisterTooltipForSlider=
function(a){var b=y[a.tooltipId];b&&(b.handlers.forEach(function(a){a.remove()}),m.destroy(b.tooltip));delete y[a.tooltipId];delete a.tooltipId};var w=null;v.autoTooltip=function(a,b,c){"string"===typeof b&&(b=b.split(" ").filter(function(a){return a&&!!a.trim().length}));b=b||[];b.push("TrimWithEllipses");c=c||[];c.push("esriMapsAnalystXInfoIcon");for(var d=0;d<b.length;d++)f(a,"."+b[d]+":mouseover, "+b[d]+":touchstart, ",function(a){this!==w&&this.offsetWidth<this.scrollWidth&&!this.noAutoTooltip&&
(a=getComputedStyle(this).width,a=Number(a.substr(0,a.length-2)),0>a-Math.round(a)&&this.offsetWidth==this.scrollWidth-1||(u(),w=this,a=w.autoTooltip||w.textContent||w.value,w.title&&(a+=" ("+w.title+")"),a&&p.show(a,w,["above","below"]),f.once(w,"mouseout, touchstart, touchout",function(){u()}),w.__autoTooltipInLayoutCheckHandle=setInterval(function(){q.isNodeInLayout(w)||u()},500)))});if(k("touch"))for(d=0;d<c.length;d++)f(a,"."+c[d]+":touchstart ",function(a){this!==w&&(w=this,w.title&&(p.show(w.title,
w,["above","below"]),f.once(w,"touchstart, touchout",function(){p.hide(w);w=null})))})};v.addAutoTooltipsToTabContainer=function(a){c(".tabLabel",a.domNode).forEach(function(a){e.add(a,"TrimWithEllipses")});v.autoTooltip(a)};v.setMultilineText=function(a,b,c,d){c=c||2;b=b.trim();d=d||["above","below"];e.remove(a,"TrimWithEllipses");a.style.overflow="hidden";a.innerHTML="";for(var f=b,g=!1;f;){c--;var k=m.create("div",null,a);k.style.overflow="hidden";k.style.whiteSpace="nowrap";for(var h=f;h;)if(k.textContent=
h,k.offsetWidth<k.scrollWidth-1)h=(h=h.match(/^(.*[^\s]+)\s+[^\s]+$/))&&h[1]||"";else break;!h||!c&&h!==f?(k.textContent=f,f="",k.style.textOverflow="ellipsis",g=!0):f=f.substr(h.length).trim()}g&&v.setTooltipToNode(a,function(){u();w=a;w.isMultilineContainer=!0;return b},{position:d})};v.showErrorTip=function(a,b){return t(r(b),a.domNode||a)};v.showNewStyleErrorTip=function(a,b,c){return t(r(b,"NewStyle"+(c?" esriMapsAnalystXWarningStyle":"")),a.domNode||a)};v.showAlertTooltip=function(a){a&&a.node&&
a.message&&(p.show(a.message,a.node,a.position||["above","below"]),setTimeout(function(){p.hide(a.node)},a.timeout||5E3))};v.showClosableTooltip=function(a){var b=z(a.message,a.tooltipClass,a.position);return B(b,a.component,a.timeout,a.position)};v.removeClosableTooltip=function(a){a&&a._removeFunc&&a._removeFunc()};v.showClosableTooltipOnVerticalBracket=function(a){var b=a.below||a.above,c=l.position(a.above,!0),e=l.position(b,!0),g="rtl"!==document.dir?"start"===a.direction:"end"===a.direction,
k=c.x+c.w*(g?0:1),c=c.y,n=e.y+e.h,p=m.create("div",{class:"esriMapsAnalystFlexibleTooltip_tooltip esriMapsAnalystXNonSelectable"},document.body),y=m.create("div",{class:"esriMapsAnalystFlexibleTooltip_surfaceContainer"},p),e={},k={top:c-2,left:k+(g?-3:3),height:n-c+4,width:10},u;for(u in k)e[u]=k[u]+"px";h.set(p,e);var r=d.createSurface(y,k.width,k.height);r.clear();r.createPolyline([{x:g?k.width:0,y:0},{x:g?0:k.width,y:0},{x:g?0:k.width,y:k.height},{x:g?k.width:0,y:k.height}]).setStroke({color:"#6E6E6E",
width:6});a.component=p;var g=z(a.message,a.tooltipClass,a.position),t=function(){clickHandler&&clickHandler.remove();x&&clearInterval(x);r&&r.clear();m.destroy(y);m.destroy(p)},x=setInterval(function(){q.isNodeInLayout(b)||t();q.isNodeVisible(b)?h.set(p,"visibility","visible"):h.set(p,"visibility","hidden")},300);a.timeout&&setTimeout(t,a.timeout);clickHandler=f(g.closeButton,"click",t);tooltip=B(g,a.component,a.timeout,a.position);var w=tooltip._removeFunc;tooltip._removeFunc=function(){w();t()};
return tooltip};return v})},"dojox/uuid/generateRandomUuid":function(){define(["./_base"],function(){dojox.uuid.generateRandomUuid=function(){function m(){for(var c=Math.floor(Math.random()%1*Math.pow(2,32)).toString(16);8>c.length;)c="0"+c;return c}var h=m(),l=m(),l=l.substring(0,4)+"-4"+l.substring(5,8),e=m(),e="8"+e.substring(1,4)+"-"+e.substring(4,8),c=m();return(h+"-"+l+"-"+e+c).toLowerCase()};return dojox.uuid.generateRandomUuid})},"dojox/uuid/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],
function(m){m.getObject("uuid",!0,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(h,l){if(!h)throw l||(l="An assert statement failed.\nThe method dojox.uuid.assert() was called with a 'false' value.\n"),Error(l);};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID};dojox.uuid.isValid=
function(h){h=h.toString();var l=m.isString(h)&&36==h.length&&h==h.toLowerCase();if(l){h=h.split("-");var l=5==h.length&&8==h[0].length&&4==h[1].length&&4==h[2].length&&4==h[3].length&&12==h[4].length,e;for(e in h)var c=parseInt(h[e],16),l=l&&isFinite(c)}return l};dojox.uuid.getVariant=function(h){if(!dojox.uuid._ourVariantLookupTable){var l=dojox.uuid.variant,e=[];e[0]=l.NCS;e[1]=l.NCS;e[2]=l.NCS;e[3]=l.NCS;e[4]=l.NCS;e[5]=l.NCS;e[6]=l.NCS;e[7]=l.NCS;e[8]=l.DCE;e[9]=l.DCE;e[10]=l.DCE;e[11]=l.DCE;
e[12]=l.MICROSOFT;e[13]=l.MICROSOFT;e[14]=l.UNKNOWN;e[15]=l.UNKNOWN;dojox.uuid._ourVariantLookupTable=e}h=h.toString();h=h.charAt(19);h=parseInt(h,16);dojox.uuid.assert(0<=h&&16>=h);return dojox.uuid._ourVariantLookupTable[h]};dojox.uuid.getVersion=function(h){dojox.uuid.assert(dojox.uuid.getVariant(h)==dojox.uuid.variant.DCE,"dojox.uuid.getVersion() was not passed a DCE Variant UUID.");h=h.toString();h=h.charAt(14);return parseInt(h,16)};dojox.uuid.getNode=function(h){dojox.uuid.assert(dojox.uuid.getVersion(h)==
dojox.uuid.version.TIME_BASED,"dojox.uuid.getNode() was not passed a TIME_BASED UUID.");h=h.toString();return h.split("-")[4]};dojox.uuid.getTimestamp=function(h,l){dojox.uuid.assert(dojox.uuid.getVersion(h)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.");h=h.toString();l||(l=null);switch(l){case "string":case String:return dojox.uuid.getTimestamp(h,Date).toUTCString();case "hex":var e=h.split("-");h=e[0];l=e[1];e=e[2];e=e.slice(1);h=e+l+h;dojox.uuid.assert(15==
h.length);return h;case null:case "date":case Date:return e=h.split("-"),h=parseInt(e[0],16),l=parseInt(e[1],16),e=(parseInt(e[2],16)&4095)<<16,e=4294967296*(e+l),e+=h,new Date(e/1E4-122192928E5);default:dojox.uuid.assert(!1,"dojox.uuid.getTimestamp was not passed a valid returnType: "+l)}};return dojox.uuid})},"esri/dijit/geoenrichment/utils/TooltipUtil":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dojo/mouse dojo/sniff dijit/Tooltip dijit/place ./DeviceUtil ./DnDUtil ./DomUtil ./MouseUtil dojo/domReady!".split(" "),
function(m,h,l,e,c,f,d,k,b,a,p,q,g,n,u){function r(){}var t={},z=m(a._MasterTooltip,{_customClasses:null,addCustomClasses:function(a){a&&(l.add(this.domNode,a),this._customClasses=a)},show:function(b,c,d,f,g,k,n){if(!this.aroundNode||this.aroundNode!==c||this.containerNode.innerHTML!=b)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{"string"===typeof b?this.containerNode.innerHTML=b:(this.containerNode.innerHTML="",e.place(b.domNode,this.containerNode));g&&this.set("textDir",g);this.containerNode.align=
f?"right":"left";var l=p.around(this.domNode,c,d&&d.length?d:a.defaultPosition,!f,h.hitch(this,"orient")),m=l.aroundNodePos;"M"==l.corner.charAt(0)&&"M"==l.aroundCorner.charAt(0)?(this.connectorNode.style.top=m.y+(m.h-this.connectorNode.offsetHeight>>1)-l.y+"px",this.connectorNode.style.left=""):"M"==l.corner.charAt(1)&&"M"==l.aroundCorner.charAt(1)?this.connectorNode.style.left=m.x+(m.w-this.connectorNode.offsetWidth>>1)-l.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");
this.domNode.style.opacity="0";this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=c;this.onMouseEnter=k||r;this.onMouseLeave=n||r}},orient:function(a,d,f,e,g){this.connectorNode.style.top="";var k=e.h;e=e.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight",
"BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[d+"-"+f];this.addCustomClasses(this._customClasses);this.domNode.style.width="auto";var h=c.position(this.domNode);if(b("ie")||b("trident"))h.w+=2;c.setMarginBox(this.domNode,{w:Math.min(Math.max(e,1),h.w)});"B"==f.charAt(0)&&"B"==d.charAt(0)?(a=c.position(a),d=this.connectorNode.offsetHeight,a.h>k?(this.connectorNode.style.top=k-(g.h+d>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(g.h/2-d/2,
0),a.h-d)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,h.w-e)}}),B={show:function(a,b,c,d){"string"===typeof c&&(c=[c]);c=c&&c.map(function(a){return{after:"after-centered",before:"before-centered"}[a]||a});var f=new z;f.addCustomClasses(d);f.show(a,b,c);return f}};t.setTooltipToNode=function(a,b,c){function f(){!e&&t.showTooltipForNode(a,b,c)}c=c||{};if(a&&(t.hideTooltipForNode(a),a.__setTooltipToNodeMouseEnterHandle&&
a.__setTooltipToNodeMouseEnterHandle.remove(),b)){var e=!1;q.isMobileDevice()?a.__setTooltipToNodeMouseEnterHandle=g.addNoDragClickHandler(a,f):a.__setTooltipToNodeMouseEnterHandle=d(a,k.enter,f);c.showTooltip&&f();return{remove:function(){b=null;t.hideTooltipForNode(a)},suspend:function(){t.hideTooltipForNode(a);e=!0},resume:function(){e=!1},refresh:function(){a._shownTooltip&&f()}}}};t.showTooltipForNode=function(a,b,c){function f(){t.hideTooltipForNode(a);var b=Array.isArray(c.classes)?c.classes.join(" "):
c.classes,b=(b||"")+" esriGETooltip";c.notRestricted&&(b+=" notRestricted");a._shownTooltip=g=B.show(e,a,c.position||["after","before"],b)}if(a){t.hideTooltipForNode(a);var e="function"==typeof b?b():b;if(e){c.textAlign&&(e="\x3cdiv class\x3d'"+("start"===c.textAlign?"esriGEStart":"end"===c.textAlign?"esriGEEnd":"")+"'\x3e"+e+"\x3c/div\x3e");l.add(a,"esriGESimpleTextTooltip");var g;f();var h=t.hideTooltipForNode.bind(t,a);q.isMobileDevice()?a.__setTooltipToNodeMouseLeaveHandle=d(document.body,"touchstart",
function(b){u.isMouseOver(a,{event:b})||h()}):a.__setTooltipToNodeMouseLeaveHandle=d.once(a,k.leave,function(){!c.stayOnHover&&h()});c.ignoreNodeRemoval||(a.__setTooltipToNodeInLayoutHandle=setInterval(function(){!n.isNodeInLayout(a)&&h()},300));q.isMobileDevice()||(a.__setTooltipToNodeMouseOverHandle=setInterval(function(){c.stayOnHover&&u.isMouseOver(g.domNode)||u.isMouseOver(a)||h()},300),a.__setTooltipToNodeClickHandle=d(a,"click",function(b){c.hideOnClick?h():!a._shownTooltip&&f()}),c.stayOnHover&&
(a.__setTooltipToNodeMouseLeaveMasterHandle=d(g.domNode,k.leave,h)));return a._shownTooltip}}};t.hideTooltipForNode=function(a){a&&(delete a.title,l.remove(a,"esriGESimpleTextTooltip"),a._shownTooltip&&a._shownTooltip.destroy(),delete a._shownTooltip,a.__setTooltipToNodeMouseLeaveHandle&&a.__setTooltipToNodeMouseLeaveHandle.remove(),clearInterval(a.__setTooltipToNodeInLayoutHandle),clearInterval(a.__setTooltipToNodeMouseOverHandle),a.__setTooltipToNodeClickHandle&&a.__setTooltipToNodeClickHandle.remove(),
a.__setTooltipToNodeMouseLeaveMasterHandle&&a.__setTooltipToNodeMouseLeaveMasterHandle.remove())};var v,A;t.autoTooltip=function(a){d(a,".TrimWithEllipses:mouseover",function(){if(this!==v&&this.offsetWidth<this.scrollWidth){var a=function(){v=null;A&&(A.tooltip.destroy(),A.mouseOutH.remove(),A.mouseMoveH.remove(),A=null)};a();v=this;A={tooltip:B.show(v.textContent,v,["above","below"]),mouseOutH:d.once(v,"mouseout, mousedown, touchstart",a),mouseMoveH:d(document.body,"mousemove",function(){u.isMouseOver(v)||
a()})}}})};t.showClosableTooltip=function(a){var b=t._createClosableTooltip(a.message,a.tooltipClass,a.position);return t._placeClosableTooltip(b,a.node,a.timeout,a.position,a.onClosed)};t.removeClosableTooltip=function(a){a&&a._removeFunc&&a._removeFunc()};t._createClosableTooltip=function(a,b,c){function d(){var a=e.create("div",{"class":"esriGEClosableTooltipTip"},g);l.add(a,"right"===c?"esriGEClosableTooltipTipRight":"esriGEClosableTooltipTipLeft")}function f(){k=e.create("div",{"class":"esriGEClosableTooltipBody"},
g);e.create("div",{innerHTML:a,"class":"esriGEClosableTooltipLabel"},k);h=e.create("div",{"class":"esriGEClosableTooltipCloseButton"},k)}var g=e.create("div",{"class":"esriGEClosableTooltip esriGENonSelectable "+(b||"")},document.body),k,h;"right"!==c?(f(),d()):(d(),f());g.style.position="fixed";return{tooltip:g,body:k,closeButton:h}};t._placeClosableTooltip=function(a,b,e,g,k){function h(){var d=c.position(b),e=d.x+";"+d.y+";"+d.w+";"+d.h;e!==m&&(m=e,e=c.getMarginBox(a.tooltip),f.set(a.tooltip,{left:(l?
d.x+d.w:d.x-e.w)+"px",top:d.y+d.h/2-e.h/2+"px"}))}var l="rtl"===document.dir&&"right"!==g||"rtl"!==document.dir&&"right"===g,m;h();var p,q,u,r,t,v=function(){p&&clearTimeout(p);q&&clearInterval(q);u&&clearInterval(u);r&&r.remove();a.tooltip.parentNode&&a.tooltip.parentNode.removeChild(a.tooltip)};q=setInterval(function(){n.isNodeInLayout(b)&&b.parentNode||(t=!1,v());n.isNodeVisible(b)&&n.isNodeOnscreen(b)?(t=!0,n.show(a.tooltip)):(t=!1,n.hide(a.tooltip))},0);u=setInterval(function(){t&&h()},0);e&&
(p=setTimeout(v,e));r=d(a.closeButton,"click",function(){v();k&&k()});a.tooltip._removeFunc=v;return a.tooltip};return t})},"esri/dijit/geoenrichment/utils/DnDUtil":function(){define(["dojo/on","dojo/sniff","./DeviceUtil","./KeyboardUtil"],function(m,h,l,e){var c={MOBILE_TOLERANCE:10,LONG_PRESS_TIMEOUT:500,addNoDragClickHandler:function(f,d,e){e=e||{};return l.isMobileDevice()?c._addMobile(f,d,e):c._addPC(f,d,e)},_addPC:function(c,d,k){var b=k.tolerance||0,a,f,h=m(c,"mousedown",function(c){f&&f.remove();
var g=c.clientX,k=c.clientY,h;a=m(document.body,"mousemove",function(a){if(!a.shiftKey&&!e.isCtrl(a)){var b=a.clientY;if(0<Math.abs(a.clientX-g)||0<Math.abs(b-k))h=!0}});f=m.once(document.body,"mouseup",function(c){a.remove();var f=c.clientX,e=c.clientY;!h&&Math.abs(f-g)<=b&&Math.abs(e-k)<=b&&d(c)})});return{remove:function(){a&&a.remove();f&&f.remove();h&&h.remove()}}},_addMobile:function(f,d,e){function b(){h&&h.remove();g&&g.remove();n&&n.remove();clearTimeout(l)}var a=e.tolerance||c.MOBILE_TOLERANCE,
k,h,g,n,l;k=m(f,"touchstart",function(k){function p(b){return Math.abs(k.clientX-b.clientX)<a&&Math.abs(k.clientY-b.clientY)<a}b();var q;if(e.detectLongPress){var u;g=m(f,"touchmove",function(a){u=a});l=setTimeout(function(){p(u||k)&&(e.ignoreReleaseIfLongPressHappened&&(q=!0),e.longPressCallback(k))},e.longPressTimeout||c.LONG_PRESS_TIMEOUT)}h=m.once(f,"touchend",function(a){!q&&p(a)&&d(a);b()});n=m.once(f,"touchcancel",b)});return{remove:function(){k&&k.remove();b()}}},addGlobalDragHanlder:function(c){function d(){f&&
f.remove();b&&b.remove();a&&a.remove();p&&p.remove();q&&c.destroyDnDBox&&c.destroyDnDBox(q)}c.tolerance=0<c.tolerance?c.tolerance:5;var f,b,a,p,q;return m(c.node,c.downEventName||l.press,function(g){d();if(!c.onMouseDown||c.onMouseDown(g)){var k=g.clientX,u=g.clientY,r=k,t=u;f=m(document.body,l.move,function(g){g.shiftKey||e.isCtrl(g)||!(Math.abs(k-g.clientX)>=c.tolerance||Math.abs(u-g.clientY)>=c.tolerance)||(f.remove(),c.dragStarted&&!c.dragStarted(g,g.clientX-r,g.clientY-t))||(r=g.clientX,t=g.clientY,
q=c.createDnDBox&&c.createDnDBox(),b=m(document.body,l.move,function(a){c.dragMoved&&c.dragMoved(a,a.clientX-r,a.clientY-t);r=a.clientX;t=a.clientY}),a=m.once(document.body,h("ie")||h("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){d();c.dragEnded&&c.dragEnded()}),p=m(document.body,"keyup",function(a){27==a.keyCode&&(d(),c.dragCanceled&&c.dragCanceled())}))});m.once(document.body,h("ie")||h("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){f.remove()})}})}};
return c})},"widgets/BusinessAnalyst/utils/GEUtil":function(){define("dojo/_base/array dojo/when esri/request ./GeocodeUtil esri/geometry/webMercatorUtils esri/dijit/geoenrichment/utils/FileUtil jimu/portalUtils".split(" "),function(m,h,l,e,c,f,d){return{getAvailableCountries:function(){return d.getPortal(portalUrl).loadSelfInfo().then(function(c){return l({url:(c&&c.helperServices&&c.helperServices.geoenrichment&&c.helperServices.geoenrichment.url?c.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+
"/Geoenrichment/Countries",content:{appID:"webappbuilder",f:"json",langCode:"en-us"},handleAs:"json"})})},createRingOrDriveTimes:function(c){return d.getPortal(portalUrl).loadSelfInfo().then(function(b){return l({url:(b&&b.helperServices&&b.helperServices.geoenrichment&&b.helperServices.geoenrichment.url?b.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Enrich",content:{appID:"webappbuilder",f:"json",langCode:"en-us",
useData:JSON.stringify({sourceCountry:c.sourceCountry}),studyAreasOptions:JSON.stringify(c.studyAreasOptions),dataCollections:JSON.stringify(["GlobalIntersect"]),returnGeometry:!0,outSR:JSON.stringify({wkid:102100}),studyAreas:JSON.stringify([{geometry:c.geometry}]),token:esri.id.credentials[0].token},handleAs:"json"})})},createReport:function(c){var b={appID:"webappbuilder",langCode:"en-us",report:"string"===typeof c.report?c.report:JSON.stringify(c.report),format:"pdf",f:"bin",token:esri.id.credentials[0].token,
useData:JSON.stringify({sourceCountry:c.sourceCountry}),studyAreas:JSON.stringify(c.studyAreas),reportFields:JSON.stringify({locationname:c.locationName,latitude:c.lat,longitude:c.long,subtitle:"Prepared by Esri",areadesc2:c.areadesc2})};return d.getPortal(portalUrl).loadSelfInfo().then(function(a){return l({url:(a&&a.helperServices&&a.helperServices.geoenrichment&&a.helperServices.geoenrichment.url?a.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+
"/Geoenrichment/createReport",content:b,handleAs:"blob"}).then(function(a){return f.saveAs(a,c.reportDownloadName+".pdf")}).otherwise(function(a){alert("Error: "+a)})})},checkCapabilities:function(c){return d.getPortal(portalUrl).loadSelfInfo().then(function(b){var a=!1,d=!1,e=b&&b.user&&b.user.privileges,f=b&&b.helperServices;b=f.geoenrichment&&f.geoenrichment.url;var f=f.routingUtilities&&f.routingUtilities.url,k=b?b:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";
!window.isBuilder&&!c.mode&&c.appProxies&&0<c.appProxies.length&&m.some(c.appProxies,function(a){return k.toLowerCase()===a.sourceUrl.toLowerCase()})?d=a=!0:m.forEach(e,function(b){"premium:user:geoenrichment"===b?a=!0:"premium:user:networkanalysis"===b&&(d=!0)});return{hasPrivilege:a&&d,geServiceConfigured:!!b,dirRoutingServiceConfigured:!!f}})},getCountryForPolygon:function(f,b,a){return d.getPortal(portalUrl).loadSelfInfo().then(function(d){return l({url:(d&&d.helperServices&&d.helperServices.geoenrichment&&
d.helperServices.geoenrichment.url?d.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Enrich",content:{appID:"webappbuilder",f:"json",langCode:"en-us",dataCollections:JSON.stringify(["GlobalIntersect"]),outSR:JSON.stringify({wkid:102100}),studyAreas:JSON.stringify([{geometry:f.toJson()}]),token:esri.id.credentials[0].token},handleAs:"json"}).then(function(d){if(d&&d.results&&1===d.results.length&&1===d.results[0].value.FeatureSet[0].features.length)return d.results[0].value.FeatureSet[0].features[0].attributes.sourceCountry;
if(d&&d.results&&1===d.results.length&&1<d.results[0].value.FeatureSet[0].features.length){var g=f.getCentroid(),g=c.xyToLngLat(g.x,g.y),k=function(c){var d="";m.forEach(c,function(b){b.attributes.sourceCountry==a&&(d=a)});if(d)return d;m.forEach(c,function(a){a.attributes.sourceCountry==b.defaultCountryID&&(d=defaultCountryID)});return d?d:c[0].attributes.sourceCountry};return h(e.reverseGeocode({x:g[0],y:g[1]})).then(function(a){return a&&a.address&&a.address.CountryCode?a.address.CountryCode:k(d.results[0].value.FeatureSet[0].features)}).otherwise(function(){return k(d.results[0].value.FeatureSet[0].features)})}return b.defaultCountryID})})},
getGEProxyUrl:function(c){var b=!1;return d.getPortal(portalUrl).loadSelfInfo().then(function(a){geUrl=a&&a.helperServices&&a.helperServices.geoenrichment&&a.helperServices.geoenrichment.url?a.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";!window.isBuilder&&!c.mode&&c.appProxies&&0<c.appProxies.length&&m.forEach(c.appProxies,function(a){geUrl.toLowerCase()===a.sourceUrl.toLowerCase()&&(b=a.proxyUrl)});return b})}}})},"widgets/BusinessAnalyst/utils/GeocodeUtil":function(){define(["esri/request",
"jimu/portalUtils"],function(m,h){return{reverseGeocode:function(l){return h.getPortal(portalUrl).loadSelfInfo().then(function(e){return m({url:(e&&e.isPortal&&e.helperServices&&e.helperServices.geocode&&0<e.helperServices.geocode.length?e.helperServices.geocode[0].url:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer")+"/reverseGeocode",content:{appID:"webappbuilder",f:"json",langCode:"en-us",location:JSON.stringify({x:l.x,y:l.y}),distance:250},handleAs:"json"})})}}})},"esri/dijit/geoenrichment/utils/FileUtil":function(){define(["esri/dijit/geoenrichment/Deferred",
"./DataUtil","./ImageUtil"],function(m,h,l){function e(){return new m.reject(Error("Saving not supported."))}var c=e,f=/[\\/:*?"<>|]/g,d={savingSupported:function(){return void 0!==window.Blob},saveTextFile:function(a,b,c){return d.savingSupported()?d.saveAs(new Blob([a],{type:c||"text/plain"}),b||"text.txt"):e()},saveImageFile:function(a,b){if(d.savingSupported()){var c;"string"===typeof a?(c=l.base64DataFromDataURL(a),c=h.binaryStringToByteArray(atob(c)).buffer):a instanceof ArrayBuffer&&(c=a);
return d.saveAs(c?h.arrayBuffersToBlob([c],"image/png"):a,b)}e()},saveAs:function(a,b){return c(a,d.validateName(b||"download"))},validateName:function(a){return String(a).trim().replace(f,"")}};if(!d.savingSupported())return d;if(window.navigator&&window.navigator.msSaveOrOpenBlob)return c=function(a,b){var c=new m;window.navigator.msSaveOrOpenBlob(a,b)?c.resolve():c.reject(Error("Failed to save or open downloaded file."));return c.promise},d;var k=window.URL||window.webkitURL;if("download"in window.document.createElement("a")){var b=
function(a){var b;void 0!==window.MouseEvent?b=new MouseEvent("click",{bubbles:!0,cancelable:!1}):(b=document.createEvent("MouseEvent"),b.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null));a.dispatchEvent(b)},c=function(a,c){var d=new m,e=k.createObjectURL(a);a=window.document.createElement("a");a.href=e;a.download=c;b(a);setTimeout(function(){k.revokeObjectURL(e);d.resolve()},1E3);return d.promise};return d}c=function(a,b){var c=new m;a=new File([a],b,{type:a.type});var d=k.createObjectURL(a);
window.open(d,"_blank");setTimeout(function(){k.revokeObjectURL(d);c.resolve()},1E3);return c.promise};return d})},"esri/dijit/geoenrichment/utils/DataUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(m,h){function l(c){return"string"==typeof c?{source:c,getLength:function(){return this.source.length},getByte:function(c){return this.source.charCodeAt(c)&255}}:window.ArrayBuffer&&c instanceof ArrayBuffer?{source:new Uint8Array(c),getLength:function(){return this.source.byteLength},
getByte:function(c){return this.source[c]}}:c}function e(c){for(var d=c.length,b=new Uint8Array(c.length),a=0;a<d;a++)b[a]=c.charCodeAt(a);return b}function c(c,e){c=new Uint8Array(c);e=Math.min(e,c.byteLength);for(var b="",a=0;a<e;a++)b+=String.fromCharCode(c[a]);return b}var f={arrayBufferFromBlob:function(c){var d=new m,b=new FileReader;b.onloadend=function(){b.error?d.reject(b.error):d.resolve(b.result)};b.readAsArrayBuffer(c);return d.promise},arrayBuffersToBlob:function(c,e){return new Blob(c,
{type:e||"application/octet-stream"})},binaryStringFromByteSource:function(c){if("string"==typeof c)return c;c=l(c);for(var d=c.getLength(),b=d%4,d=d-b,a="",e=0,f,g,h,m;e<d;)f=c.getByte(e++),g=c.getByte(e++),h=c.getByte(e++),m=c.getByte(e++),a+=String.fromCharCode(f,g,h,m);1==b?a+=String.fromCharCode(c.getByte(e)):2==b?a+=String.fromCharCode(c.getByte(e),c.getByte(e+1)):3==b&&(a+=String.fromCharCode(c.getByte(e),c.getByte(e+1),c.getByte(e+2)));return a},base64FromByteSource:function(c){c=l(c);for(var d=
c.getLength(),b=d%3,d=d-b,a,e,f,g,h="",m=0;m<d;m+=3)g=c.getByte(m)<<16|c.getByte(m+1)<<8|c.getByte(m+2),a=g>>18&63,e=g>>12&63,f=g>>6&63,g&=63,h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g];1==b?(g=c.getByte(m),h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>
2&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g<<4&63]+"\x3d\x3d"):2==b&&(g=c.getByte(m)<<8|c.getByte(m+1),h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>10&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>4&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g<<2&63]+"\x3d");return h}};f.binaryStringToByteArray=e;f.base64ToByteArray=function(c){return e(atob(c))};f.getFirstBytes=function(d,e){var b;if("string"==
typeof d)b=d.substr(0,e);else if(window.ArrayBuffer&&d instanceof ArrayBuffer)b=c(d,e);else if(window.Blob&&d instanceof Blob){b=new m;var a=new FileReader;a.onloadend=function(){a.error?b.resolve(""):b.resolve(c(a.result,e))};a.readAsArrayBuffer(d.slice(0,e))}return h(b||"")};f.isBase64=function(c){return c&&0==c.length%4&&/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/]+$/.test(c.replace(/={0,2}$/,""))};f.getContentType=function(c){c=f.getFileExtension(c);if(null===c)return null;
switch(c){case "png":return"image/png";case "jpg":case "jpeg":return"image/jpeg";case "gif":return"image/gif";case "json":return"application/json";case "txt":return"text/plain";case "xml":return"text/xml";default:return null}};f.getFileExtension=function(c){var d=c.lastIndexOf(".")+1;return d?c.substr(d).toLowerCase():null};return f})},"esri/dijit/geoenrichment/utils/ImageUtil":function(){define(["esri/dijit/geoenrichment/Deferred","dojo/dom-construct","esri/dijit/geoenrichment/when"],function(m,
h,l){var e={base64DataToDataURL:function(c,f){if(/^data:image/.test(c))return c;f||(f=atob(c.substr(0,16)),f=e.getImageContentType(f));return"data:"+(f||"image/png")+";base64,"+c},getImageContentType:function(c){if("\u00ff\u00d8\u00ff"==c.substr(0,3)&&"JFIF"==c.substr(6,4))return"image/jpeg";if("\u0089PNG\r\n\u001a\n"==c.substr(0,8))return"image/png";if("GIF89a"==c.substr(0,6)||"GIF87a"==c.substr(0,6))return"image/gif"},base64DataFromDataURL:function(c){0==c.indexOf("data:")&&(c=c.substr(c.indexOf(",")+
1));return c},getBase64DataIndex:function(c){c=0==c.indexOf("data:")?c.indexOf(";base64,"):-1;return 0<c?c+8:0},getContentType:function(c){var f=e.getBase64DataIndex(c);return f?c.substring(5,f-8):null},checkBase64FileSize:function(c,f){return e.getBase64FileSize(c)<=f},getBase64FileSize:function(c){return.75*c.length},imageToDataURL:function(c,e){e=e||{};var d=document.createElement("canvas"),f=d.getContext("2d");d.width=e.width||c.width;d.height=e.height||c.height;var b=e.opacity;null!=b&&!isNaN(b)&&
0<=b&&1>b&&(f.globalAlpha=+b,e.format="image/png");(b=e.pos)?f.drawImage(c,b.x||0,b.y||0):f.drawImage(c,0,0,d.width,d.height);return d.toDataURL(e.format)},imageFromUrl:function(c){var e=new m,d=new Image;0!==c.indexOf("data:")&&d.setAttribute("crossOrigin","anonymous");d.onload=function(){d.width&&d.height?e.resolve(d):e.reject(Error("Error of reading an image from URL."));h.destroy(d)};d.onerror=function(c){e.reject(c);h.destroy(d)};d.src=require.toUrl(c);return e.promise},scaleImage:function(c,
f){if("string"===typeof c)var d=e.base64DataToDataURL(c),k=e.getContentType(d),d=e.imageFromUrl(d);return l(d||c).then(function(b){var a=1,c=b.width,d=b.height;if(f.factor)a=f.factor;else if(f.maxDim)a=f.maxDim/Math.max(c,d);else if(f.imageDim){var g=f.imageDim.w,h=f.imageDim.h;f.imageDim.preserveRatio?(a=Math.min(g/c,h/d),f.imageDim.reduceOnly&&1<a&&(a=1)):f.imageDim.reduceOnly?(c=Math.min(c,g),d=Math.min(d,h)):(c=g,d=h)}return e.imageToDataURL(b,{width:c*a,height:d*a,format:f.format||k,opacity:f.opacity})})}};
return e})},"widgets/BusinessAnalyst/utils/ReportUtil":function(){define("dojo/Deferred dojo/promise/all dojo/when dojo/_base/array esri/request jimu/portalUtils dojo/i18n!../nls/strings".split(" "),function(m,h,l,e,c,f,d){STANDARD_INFOGRAPHIC_TYPEKEYWORD="esriReportPlayerStandardInfographic";var k=[];k.US=["LANDSCAPESUMMARYREPORT"];return{_ownedCachedCustomReports:null,_sharedCachedCustomReports:null,_cachedCountryClassicReports:[],_cachedInfographicReports:null,_countryInitDfds:[],getAvailableClassicReports:function(b,
a){var c=this,f=[],g=new m,h;a&&e.forEach(a.countryConfig,function(a){b==a.countryID&&(h=a)});h||(h={countryID:b,allowEsriReports:!0,allowEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,disabledReports:[],disabledInfographics:[]});var u=null,r=null,t=null;h.allowEsriReports&&(u=f.length,f.push({value:"esriReports",label:d.esriReports,children:[]}));h.allowMyReports&&(r=f.length,f.push({value:"myReports",label:d.myReports,children:[]}));
h.allowSharedReports&&(t=f.length,f.push({value:"sharedReports",label:d.sharedReports,children:[]}));l(this._initReports(b),function(){h.allowEsriReports&&c._cachedCountryClassicReports[b]&&0<c._cachedCountryClassicReports[b].length&&e.forEach(c._cachedCountryClassicReports[b],function(a){h.disabledReports.includes(a.reportID)||k[b]&&k[b].includes(a.reportID.toUpperCase())||f[u].children.push(c._formatClassicReportsForDropDown(a))});var a=["esriWebInfographicReport","esriWebSingleInfographic","esriWebBlankInfographic",
"esriWebHiddenInfographic","esriWebComparisonReport"];h.allowMyReports&&e.forEach(c._ownedCachedCustomReports,function(d){d.properties.countries.includes(b)&&!h.disabledReports.includes(d.id)&&(d.typeKeywords.some(function(b){return 0<=a.indexOf(b)})||f[r].children.push(c._formatClassicReportsForDropDown(d)))});h.allowSharedReports&&e.forEach(c._sharedCachedCustomReports,function(d){d.properties.countries.includes(b)&&!h.disabledReports.includes(d.id)&&(d.typeKeywords.some(function(b){return 0<=a.indexOf(b)})||
f[t].children.push(c._formatClassicReportsForDropDown(d)))});var d=function(a,b){a=a.label.toUpperCase();b=b.label.toUpperCase();var c=0;a>b?c=1:a<b&&(c=-1);return c};0<f.length&&f[0].children.sort(d);1<f.length&&f[1].children.sort(d);2<f.length&&f[2].children.sort(d);g.resolve(f)});return g},_formatClassicReportsForDropDown:function(b){return b.metadata?{label:b.metadata.title,value:b.reportID,reportType:b.metadata.type}:{label:b.title,value:b.id,reportType:b.properties.type,item:{itemid:b.id,url:portalUrl,
token:esri.id.credentials[0].token}}},getAvailableInfographicReports:function(b,a){var c=this,f=[],g=new m,h;a&&e.forEach(a.countryConfig,function(a){b==a.countryID&&(h=a)});h||(h={countryID:b,allowEsriReports:!0,allowEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,disabledReports:[],disabledInfographics:[]});var k=null,r=null,t=null;h.allowEsriInfographics&&(k=f.length,f.push({value:"esriReports",label:d.esriInfographics,children:[]}));
h.allowMyInfographics&&(r=f.length,f.push({value:"myReports",label:d.myInfographics,children:[]}));h.allowSharedInfographics&&(t=f.length,f.push({value:"sharedReports",label:d.sharedInfographics,children:[]}));l(this._initReports(b),function(){h.allowEsriInfographics&&e.forEach(c._cachedInfographicReports,function(a){a.properties.countries.includes(b)&&!h.disabledInfographics.includes(a.id)&&f[k].children.push(c._formatInfographicReportsForDropDown(a))});h.allowMyInfographics&&e.forEach(c._ownedCachedCustomReports,
function(a){a.properties.countries.includes(b)&&!h.disabledInfographics.includes(a.id)&&(a.typeKeywords.includes("esriWebInfographicReport")||c._isOldPortalInfographic(a))&&f[r].children.push(c._formatInfographicReportsForDropDown(a))});h.allowSharedInfographics&&e.forEach(c._sharedCachedCustomReports,function(a){a.properties.countries.includes(b)&&!h.disabledInfographics.includes(a.id)&&(a.typeKeywords.includes("esriWebInfographicReport")||c._isOldPortalInfographic(a))&&f[t].children.push(c._formatInfographicReportsForDropDown(a))});
var a=function(a,b){a=a.label.toUpperCase();b=b.label.toUpperCase();var c=0;a>b?c=1:a<b&&(c=-1);return c};0<f.length&&f[0].children.sort(a);1<f.length&&f[1].children.sort(a);2<f.length&&f[2].children.sort(a);g.resolve(f)});return g},_isOldPortalInfographic:function(b){return b.properties&&b.properties.isHidden&&"true"===b.properties.isHidden?!1:b.properties&&b.properties.isGraphicReport&&"true"===b.properties.isGraphicReport?!0:!1},_formatInfographicReportsForDropDown:function(b){return{label:b.title,
value:b.id}},_initReports:function(b){var a=[],d=this;if(this._countryInitDfds[b])return this._countryInitDfds[b];this._countryInitDfds[b]=new m;f.getPortal(portalUrl).loadSelfInfo().then(function(f){f=f&&f.helperServices&&f.helperServices.geoenrichment&&f.helperServices.geoenrichment.url?f.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";d._cachedCountryClassicReports[b]||a.push(c({url:f+"/Geoenrichment/reports/"+b,content:{appID:"webappbuilder",
f:"json",langCode:"en-us"}}).then(function(a){d._cachedCountryClassicReports[b]=a.reports},function(a){alert(a)}));d._cachedInfographicReports||(d._cachedInfographicReports=[],a.push(c({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:"typekeywords:(esriReportPlayerStandardInfographic jsapiVersion3.31)"}}).then(function(a){e.forEach(a.results,function(a){d._cachedInfographicReports.push(a)})},function(a){alert(a)})));
d._ownedCachedCustomReports||(d._ownedCachedCustomReports=[],a.push(c({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) owner:'+esri.id.credentials[0].userId}}).then(function(a){e.forEach(a.results,function(a){d._ownedCachedCustomReports.push(a)})},function(a){alert(a)})));d._sharedCachedCustomReports||(d._sharedCachedCustomReports=[],
a.push(c({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:shared type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId}}).then(function(a){e.forEach(a.results,function(a){d._sharedCachedCustomReports.push(a)})},function(a){alert(a)})),a.push(c({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",
sortOrder:"desc",q:'access:org type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId}}).then(function(a){e.forEach(a.results,function(a){d._sharedCachedCustomReports.push(a)})},function(a){alert(a)})));0===a.length?d._countryInitDfds[b].resolve():h(a).then(function(){d._countryInitDfds[b].resolve()})});return this._countryInitDfds[b]}}})},"widgets/BusinessAnalyst/utils/ValidationUtil":function(){define(["dojo/dom-class"],function(m){return{MIN_RINGS_VALUE:0,
MAX_RINGS_VALUE:1E3,MIN_DTWT_VALUE:0,MAX_DTWT_VALUE:300,validateInvalidValues:function(h,l,e,c,f){var d=h.get("value"),k=l.get("value"),b=e.get("value"),a=!0;0<d.length&&null===this._tryParseFloat(d)?(a=!1,m.remove(c,"hidden"),c.innerHTML=f,m.add(h.domNode,"invalidValue")):m.remove(h.domNode,"invalidValue");0<k.length&&null===this._tryParseFloat(k)?(a=!1,m.remove(c,"hidden"),c.innerHTML=f,m.add(l.domNode,"invalidValue")):m.remove(l.domNode,"invalidValue");0<b.length&&null===this._tryParseFloat(b)?
(a=!1,m.remove(c,"hidden"),c.innerHTML=f,m.add(e.domNode,"invalidValue")):m.remove(e.domNode,"invalidValue");a&&m.add(c,"hidden");return a},validateMinMaxValues:function(h,l,e,c,f,d,k){var b=h.get("value"),a=l.get("value"),p=e.get("value"),q=!0;0<b.length?(b=parseFloat(b),b<c||b>f?(q=!1,m.remove(d,"hidden"),d.innerHTML=k,m.add(h.domNode,"invalidValue")):m.remove(h.domNode,"invalidValue")):m.remove(h.domNode,"invalidValue");0<a.length?(b=parseFloat(a),b<c||b>f?(q=!1,m.remove(d,"hidden"),d.innerHTML=
k,m.add(l.domNode,"invalidValue")):m.remove(l.domNode,"invalidValue")):m.remove(l.domNode,"invalidValue");0<p.length?(b=parseFloat(p),b<c||b>f?(q=!1,m.remove(d,"hidden"),d.innerHTML=k,m.add(e.domNode,"invalidValue")):m.remove(e.domNode,"invalidValue")):m.remove(e.domNode,"invalidValue");q&&m.add(d,"hidden");return q},_tryParseFloat:function(h){var l=null;null!==h&&0<h.length&&(isNaN(h)||(l=parseFloat(h)));return l}}})},"widgets/BusinessAnalyst/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/BusinessAnalyst/esriAnalystX/widgets/SelectableTreeGrid/templates/SelectableTreeGrid.html":'\x3cdiv class\x3d"esriMapsAnalystXNonSelectable"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"gridContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"selectionCounter" class\x3d"esriMapsAnalystXSelectableTreeCounter"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/BusinessAnalyst/setting/Setting.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"reportInfographicTabContainer" style\x3d"width: 100%; height: 520px;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"infographicsContentPane" title\x3d"${nls.infographics}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledInfographicsOption"\r\n                        data-dojo-attach-point\x3d"disabledInfographicsOption"\x3e\r\n                    \x3clabel for\x3d"disabledInfographicsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cspan style\x3d"float: left; margin-top: 3px;"\x3e${nls.selectCountryOrRegion}\x3c/span\x3e\r\n                \x3cdiv style\x3d"float:left; margin-left: 5px;" data-dojo-attach-point\x3d"countryDropDownContainerInfographics"\x3e\x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cdiv\x3e${nls.defineWhichInfographics}\x3c/div\x3e\r\n                \x3cdiv style\x3d"height: 40px;" data-dojo-attach-point\x3d"infographicTreeGridContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"reportsContentPane" title\x3d"${nls.reports}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledReportsOption"\r\n                        data-dojo-attach-point\x3d"disabledReportsOption"\x3e\r\n                    \x3clabel for\x3d"disabledReportsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cspan style\x3d"float: left; margin-top: 3px;"\x3e${nls.selectCountryOrRegion}\x3c/span\x3e\r\n                \x3cdiv style\x3d"float:left; margin-left: 5px;" data-dojo-attach-point\x3d"countryDropDownContainerReports"\x3e\x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cdiv\x3e${nls.defineWhichReports}\x3c/div\x3e\r\n                \x3cdiv style\x3d"height: 40px;" data-dojo-attach-point\x3d"reportTreeGridContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"ringsContentPane" title\x3d"${nls.rings}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.radius}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 1"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 3"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"ringsBufferUnits"\x3e\r\n                    \x3coption value\x3d"esriMiles" selected\x3d"selected"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"ringValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledRingsOption"\r\n                        data-dojo-attach-point\x3d"disabledRingsOption"\x3e\r\n                    \x3clabel for\x3d"disabledRingsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"driveTimeContentPane" title\x3d"${nls.driveTime}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.time}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 10"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 15"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"driveTimeBufferUnits"\x3e\r\n                    \x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${nls.minutes}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"driveTimeValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"disabledDriveTimeOption"\r\n                        id\x3d"disabledDriveTimeOption"\x3e\r\n                    \x3clabel for\x3d"disabledDriveTimeOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"walkTimeContentPane" title\x3d"${nls.walkTime}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.time}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 10"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 15"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"walkTimeBufferUnits"\x3e\r\n                    \x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${nls.minutes}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"walkTimeValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledWalkTimeOption"\r\n                        data-dojo-attach-point\x3d"disabledWalkTimeOption"\x3e\r\n                    \x3clabel for\x3d"disabledWalkTimeOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/setting/css/style.css":'.widget-setting-page .esriMapsAnalystXSelectableTreeGrid.dgrid {position: absolute; top: 33px; right: 0; left: 0px; bottom: 0; height: auto; width: auto;}.jimu-widget-business-analyst-setting .tabs {font-family: "Avenir Light"; color: #000000; height: 100%;} .jimu-widget-business-analyst-setting .tabs .tab-description {margin: 10px 0;} .jimu-widget-business-analyst-setting .jimu-tab\x3e.control\x3e.tab{background-color: #fff; border-top: 0; border-left: 0; border-right: 0; border-bottom: 1px solid #dedede; color:#898989; font-family: "Avenir Medium"; font-size: 14px;} .jimu-widget-business-analyst-setting .jimu-tab\x3e.control\x3e.tab.jimu-state-selected {border-bottom: 3px solid #24b5cc; font-family: "Avenir Heavy"; color: #000000;} .jimu-widget-business-analyst-setting .tabs .titles {font-weight: bold; font-family: "Avenir Medium"; font-size: 14px; margin: 20px 0 10px 0;} .jimu-widget-business-analyst-setting .tabs .hide{display: none;} .jimu-widget-business-analyst-setting .tabs .indent{margin-left: 20px; margin-top: 10px;} .jimu-widget-business-analyst-setting .tabs .unit-item{margin: 15px 5px 5px 5px; line-height: 18px; height: 18px; vertical-align: middle;} .jimu-widget-business-analyst-setting .tabs .clearFix {*overflow: hidden; *zoom: 1;} .jimu-widget-business-analyst-setting .tabs .clearFix:after {display: table; content: ""; width: 0; clear: both;} .jimu-widget-business-analyst-setting .tabs .view{height: 100%; overflow-y: auto;} .jimu-widget-business-analyst-setting .tabs .jimu-tab\x3e.jimu-viewstack{padding-bottom: 30px;} .jimu-widget-business-analyst-setting .validationErrorMessage {color: #FF0000; margin-top: 10px;} .jimu-widget-business-analyst-setting .validationErrorMessage.hidden {display: none;} .jimu-widget-business-analyst-setting .invalidValue {outline: 3px solid #FF0000;}',
"*now":function(m){m(['dojo/i18n!*preload*widgets/BusinessAnalyst/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/array dojo/_base/declare dojo/on jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin esri/dijit/geoenrichment/SelectableTree ../esriAnalystX/widgets/SelectableTreeGrid/SelectableTreeGrid ../utils/GEUtil ../utils/ReportUtil ../utils/ValidationUtil jimu/dijit/formSelect jimu/dijit/TabContainer dijit/form/CheckBox dijit/layout/ContentPane".split(" "),function(m,h,l,e,c,f,d,k,b,a,p,q){return h([e,c],{baseClass:"jimu-widget-business-analyst-setting",selectedCountryID:"",postCreate:function(){this.inherited(arguments);
this.tab=new q({tabs:[{title:this.nls.infographics,content:this.infographicsContentPane},{title:this.nls.reports,content:this.reportsContentPane},{title:this.nls.rings,content:this.ringsContentPane},{title:this.nls.driveTime,content:this.driveTimeContentPane},{title:this.nls.walkTime,content:this.walkTimeContentPane}],selected:this.nls.infographics});this.tab.placeAt(this.reportInfographicTabContainer);this.tab.startup()},startup:function(){this._started||(this.inherited(arguments),this.setConfig(this.config))},
setConfig:function(a){var b=this;k.getAvailableCountries().then(function(a){var c=[];m.forEach(a.countries,function(a){c.push({label:a.name,value:a.id,selected:a.id==b.config.defaultCountryID?"selected":""})});b.countryDropDownInfographics=(new p({options:c})).placeAt(b.countryDropDownContainerInfographics);b.countryDropDownInfographics.startup();b.selectedCountryID=b.countryDropDownInfographics.get("value");l(b.countryDropDownInfographics,"change",function(){b._countryChangeInfographics()});b.countryDropDownReports=
(new p({options:c})).placeAt(b.countryDropDownContainerReports);b.countryDropDownReports.startup();b.selectedCountryID=b.countryDropDownReports.get("value");l(b.countryDropDownReports,"change",function(){b._countryChangeReports()});b._loadConfigForCountry(b.selectedCountryID)});this._loadRingDTWTConfig()},getConfig:function(){if(!this._validateRingDTWT())return!1;this._setConfigForCountry(this.selectedCountryID);this._setRingDTWTConfig();this.config.defaultCountryID=this.selectedCountryID;return this.config},
_countryChangeInfographics:function(){this.countryDropDownReports.get("value")!=this.countryDropDownInfographics.get("value")&&(this.countryDropDownReports.set("value",this.countryDropDownInfographics.get("value")),this._countryChange())},_countryChangeReports:function(){this.countryDropDownInfographics.get("value")!=this.countryDropDownReports.get("value")&&(this.countryDropDownInfographics.set("value",this.countryDropDownReports.get("value")),this._countryChange())},_countryChange:function(){this._setConfigForCountry(this.selectedCountryID);
this.selectedCountryID=this.countryDropDownInfographics.get("value");this._loadConfigForCountry(this.selectedCountryID)},_setConfigForCountry:function(a){var b=null;m.forEach(this.config.countryConfig,function(c){c.countryID==a&&(b=c)});b||(b={countryID:a,allowEsriReports:!0,allowEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,disabledReports:[],disabledInfographics:[]});b.allowEsriInfographics=0<this.infographicsTreeGrid.tree.data[0].leafCount?
0!=this.infographicsTreeGrid.tree.data[0].selectCount:!0;b.allowMyInfographics=0<this.infographicsTreeGrid.tree.data[1].leafCount?0!=this.infographicsTreeGrid.tree.data[1].selectCount:!0;b.allowSharedInfographics=0<this.infographicsTreeGrid.tree.data[2].leafCount?0!=this.infographicsTreeGrid.tree.data[2].selectCount:!0;var c=this.infographicsTreeGrid.tree.data[0].children.concat(this.infographicsTreeGrid.tree.data[1].children).concat(this.infographicsTreeGrid.tree.data[2].children);b.disabledInfographics=
this._getDisabledReports(c);b.allowEsriReports=0<this.reportsTreeGrid.tree.data[0].leafCount?0!=this.reportsTreeGrid.tree.data[0].selectCount:!0;b.allowMyReports=0<this.reportsTreeGrid.tree.data[1].leafCount?0!=this.reportsTreeGrid.tree.data[1].selectCount:!0;b.allowSharedReports=0<this.reportsTreeGrid.tree.data[2].leafCount?0!=this.reportsTreeGrid.tree.data[2].selectCount:!0;c=this.reportsTreeGrid.tree.data[0].children.concat(this.reportsTreeGrid.tree.data[1].children).concat(this.reportsTreeGrid.tree.data[2].children);
b.disabledReports=this._getDisabledReports(c);var d=-1;m.forEach(this.config.countryConfig,function(b,c){b.countryID==a&&(d=c)});-1!=d?this.config.countryConfig[d]=b:this.config.countryConfig.push(b)},_loadConfigForCountry:function(a){var c=this;b.getAvailableInfographicReports(a).then(function(b){m.forEach(b,function(a){m.forEach(a.children,function(a){a.selected=!0})});c.infographicsTreeGrid||(c.infographicsTreeGrid=new d({tree:new f(b),showHeader:!1},c.infographicTreeGridContainer));var e=-1;m.forEach(c.config.countryConfig,
function(b,c){b.countryID==a&&(e=c)});-1!=e&&m.forEach(c.config.countryConfig[e].disabledInfographics,function(a){m.forEach(b,function(b){m.forEach(b.children,function(b){a==b.value&&(b.selected=!1)})})});c.infographicsTreeGrid.tree.clear();c.infographicsTreeGrid.tree.addNodes(b)});b.getAvailableClassicReports(a).then(function(b){m.forEach(b,function(a){m.forEach(a.children,function(a){a.selected=!0})});c.reportsTreeGrid||(c.reportsTreeGrid=new d({tree:new f(b),showHeader:!1},c.reportTreeGridContainer));
var e=-1;m.forEach(c.config.countryConfig,function(b,c){b.countryID==a&&(e=c)});-1!=e&&m.forEach(c.config.countryConfig[e].disabledReports,function(a){m.forEach(b,function(b){m.forEach(b.children,function(b){a==c._getClassicReportId(b)&&(b.selected=!1)})})});c.reportsTreeGrid.tree.clear();c.reportsTreeGrid.tree.addNodes(b)})},_getClassicReportId:function(a){return a.value&&a.value.itemid?a.value.itemid:a.value},_getDisabledReports:function(a){var b=[];m.forEach(a,function(a){a.selected||(a.value&&
a.value.itemid?b.push(a.value.itemid):b.push(a.value))});return b},_setRingDTWTConfig:function(){this.config.ringDefaults=this._getRadii(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3);this.config.driveTimeDefaults=this._getRadii(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3);this.config.walkTimeDefaults=this._getRadii(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3);this.config.ringUnitDefault=this.ringsBufferUnits.get("value");
this.config.driveTimeUnitDefault=this.driveTimeBufferUnits.get("value");this.config.walkTimeUnitDefault=this.walkTimeBufferUnits.get("value");this.config.ringDisabled=this.disabledRingsOption.checked;this.config.driveTimeDisabled=this.disabledDriveTimeOption.checked;this.config.walkTimeDisabled=this.disabledWalkTimeOption.checked;this.config.infographicsDisabled=this.disabledInfographicsOption.checked;this.config.reportsDisabled=this.disabledReportsOption.checked},_loadRingDTWTConfig:function(){this._setRadii(this.ringsBufferRadii1,
this.ringsBufferRadii2,this.ringsBufferRadii3,this.config.ringDefaults);this.ringsBufferUnits.set("value",this.config.ringUnitDefault);this.disabledRingsOption.setChecked(this.config.ringDisabled);this._setRadii(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,this.config.driveTimeDefaults);this.driveTimeBufferUnits.set("value",this.config.driveTimeUnitDefault);this.disabledDriveTimeOption.setChecked(this.config.driveTimeDisabled);this._setRadii(this.walkTimeBufferRadii1,
this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,this.config.walkTimeDefaults);this.walkTimeBufferUnits.set("value",this.config.walkTimeUnitDefault);this.disabledWalkTimeOption.setChecked(this.config.walkTimeDisabled);this.disabledInfographicsOption.setChecked(this.config.infographicsDisabled);this.disabledReportsOption.setChecked(this.config.reportsDisabled)},_getRadii:function(a,b,c){a=a.get("value");b=b.get("value");c=c.get("value");var d=[];""!=a&&d.push(a);""!=b&&d.push(b);""!=c&&d.push(c);
return d},_setRadii:function(a,b,c,d){0<d.length?a.set("value",d[0]):a.set("value","");1<d.length?b.set("value",d[1]):b.set("value","");2<d.length?c.set("value",d[2]):c.set("value","")},_validateRingDTWT:function(){var b=!0,c=!0,d=!1,c=b=a.validateInvalidValues(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,this.ringValidationErrorMessage,this.nls.thisEntryIsNotValid);b||(this.tab.selectTab(this.nls.rings),d=!0);b=a.validateInvalidValues(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,
this.driveTimeBufferRadii3,this.driveTimeValidationErrorMessage,this.nls.thisEntryIsNotValid);c=c&&b;b||d||(this.tab.selectTab(this.nls.driveTime),d=!0);b=a.validateInvalidValues(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,this.walkTimeValidationErrorMessage,this.nls.thisEntryIsNotValid);c=c&&b;b||d||(this.tab.selectTab(this.nls.walkTime),d=!0);if(!c)return c;tabChange=!1;c=b=a.validateMinMaxValues(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,
a.MIN_RINGS_VALUE,a.MAX_RINGS_VALUE,this.ringValidationErrorMessage,this.nls.invalidValueRing);b||(this.tab.selectTab(this.nls.rings),d=!0);b=a.validateMinMaxValues(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,a.MIN_DTWT_VALUE,a.MAX_DTWT_VALUE,this.driveTimeValidationErrorMessage,this.nls.invalidValueDTWT);c=c&&b;b||d||(this.tab.selectTab(this.nls.driveTime),d=!0);b=a.validateMinMaxValues(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,
a.MIN_DTWT_VALUE,a.MAX_DTWT_VALUE,this.walkTimeValidationErrorMessage,this.nls.invalidValueDTWT);c=c&&b;b||d||(this.tab.selectTab(this.nls.walkTime),d=!0);return c}})});